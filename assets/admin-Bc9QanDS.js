import"./modulepreload-polyfill-B5Qt9EMX.js";import{L as Tb,_ as Eb,g as ze,F as Ab,a as cr,i as XE,p as Sb,u as wb,d as Ng,c as bb,b as ZE,e as tf,h as Ib,j as Rb,k as JE,l as Vb,C as $E,r as oT,S as Db,f as Vl}from"./index.esm-DYxK39bG.js";import"./index.esm-DtlehpGn.js";function Cb(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Fm={exports:{}},lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function xb(){if(uT)return lu;uT=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:a,type:r,key:h,ref:l!==void 0?l:null,props:u}}return lu.Fragment=t,lu.jsx=n,lu.jsxs=n,lu}var cT;function Nb(){return cT||(cT=1,Fm.exports=xb()),Fm.exports}var ne=Nb(),jm={exports:{}},At={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function Mb(){if(hT)return At;hT=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),b=Symbol.iterator;function B(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,tt={};function mt(N,X,st){this.props=N,this.context=X,this.refs=tt,this.updater=st||J}mt.prototype.isReactComponent={},mt.prototype.setState=function(N,X){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,X,"setState")},mt.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function _t(){}_t.prototype=mt.prototype;function ct(N,X,st){this.props=N,this.context=X,this.refs=tt,this.updater=st||J}var Vt=ct.prototype=new _t;Vt.constructor=ct,$(Vt,mt.prototype),Vt.isPureReactComponent=!0;var lt=Array.isArray;function ht(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function D(N,X,st){var ot=st.ref;return{$$typeof:a,type:N,key:X,ref:ot!==void 0?ot:null,props:st}}function M(N,X){return D(N.type,X,N.props)}function x(N){return typeof N=="object"&&N!==null&&N.$$typeof===a}function P(N){var X={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(st){return X[st]})}var R=/\/+/g;function oe(N,X){return typeof N=="object"&&N!==null&&N.key!=null?P(""+N.key):X.toString(36)}function Ue(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ht,ht):(N.status="pending",N.then(function(X){N.status==="pending"&&(N.status="fulfilled",N.value=X)},function(X){N.status==="pending"&&(N.status="rejected",N.reason=X)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Q(N,X,st,ot,Tt){var It=typeof N;(It==="undefined"||It==="boolean")&&(N=null);var zt=!1;if(N===null)zt=!0;else switch(It){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(N.$$typeof){case a:case t:zt=!0;break;case T:return zt=N._init,Q(zt(N._payload),X,st,ot,Tt)}}if(zt)return Tt=Tt(N),zt=ot===""?"."+oe(N,0):ot,lt(Tt)?(st="",zt!=null&&(st=zt.replace(R,"$&/")+"/"),Q(Tt,X,st,"",function(vs){return vs})):Tt!=null&&(x(Tt)&&(Tt=M(Tt,st+(Tt.key==null||N&&N.key===Tt.key?"":(""+Tt.key).replace(R,"$&/")+"/")+zt)),X.push(Tt)),1;zt=0;var Le=ot===""?".":ot+":";if(lt(N))for(var ue=0;ue<N.length;ue++)ot=N[ue],It=Le+oe(ot,ue),zt+=Q(ot,X,st,It,Tt);else if(ue=B(N),typeof ue=="function")for(N=ue.call(N),ue=0;!(ot=N.next()).done;)ot=ot.value,It=Le+oe(ot,ue++),zt+=Q(ot,X,st,It,Tt);else if(It==="object"){if(typeof N.then=="function")return Q(Ue(N),X,st,ot,Tt);throw X=String(N),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return zt}function rt(N,X,st){if(N==null)return N;var ot=[],Tt=0;return Q(N,ot,"","",function(It){return X.call(st,It,Tt++)}),ot}function yt(N){if(N._status===-1){var X=N._result;X=X(),X.then(function(st){(N._status===0||N._status===-1)&&(N._status=1,N._result=st)},function(st){(N._status===0||N._status===-1)&&(N._status=2,N._result=st)}),N._status===-1&&(N._status=0,N._result=X)}if(N._status===1)return N._result.default;throw N._result}var Lt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Ht={map:rt,forEach:function(N,X,st){rt(N,function(){X.apply(this,arguments)},st)},count:function(N){var X=0;return rt(N,function(){X++}),X},toArray:function(N){return rt(N,function(X){return X})||[]},only:function(N){if(!x(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return At.Activity=A,At.Children=Ht,At.Component=mt,At.Fragment=n,At.Profiler=l,At.PureComponent=ct,At.StrictMode=r,At.Suspense=g,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,At.__COMPILER_RUNTIME={__proto__:null,c:function(N){return I.H.useMemoCache(N)}},At.cache=function(N){return function(){return N.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(N,X,st){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ot=$({},N.props),Tt=N.key;if(X!=null)for(It in X.key!==void 0&&(Tt=""+X.key),X)!w.call(X,It)||It==="key"||It==="__self"||It==="__source"||It==="ref"&&X.ref===void 0||(ot[It]=X[It]);var It=arguments.length-2;if(It===1)ot.children=st;else if(1<It){for(var zt=Array(It),Le=0;Le<It;Le++)zt[Le]=arguments[Le+2];ot.children=zt}return D(N.type,Tt,ot)},At.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},At.createElement=function(N,X,st){var ot,Tt={},It=null;if(X!=null)for(ot in X.key!==void 0&&(It=""+X.key),X)w.call(X,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(Tt[ot]=X[ot]);var zt=arguments.length-2;if(zt===1)Tt.children=st;else if(1<zt){for(var Le=Array(zt),ue=0;ue<zt;ue++)Le[ue]=arguments[ue+2];Tt.children=Le}if(N&&N.defaultProps)for(ot in zt=N.defaultProps,zt)Tt[ot]===void 0&&(Tt[ot]=zt[ot]);return D(N,It,Tt)},At.createRef=function(){return{current:null}},At.forwardRef=function(N){return{$$typeof:m,render:N}},At.isValidElement=x,At.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:yt}},At.memo=function(N,X){return{$$typeof:_,type:N,compare:X===void 0?null:X}},At.startTransition=function(N){var X=I.T,st={};I.T=st;try{var ot=N(),Tt=I.S;Tt!==null&&Tt(st,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(ht,Lt)}catch(It){Lt(It)}finally{X!==null&&st.types!==null&&(X.types=st.types),I.T=X}},At.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},At.use=function(N){return I.H.use(N)},At.useActionState=function(N,X,st){return I.H.useActionState(N,X,st)},At.useCallback=function(N,X){return I.H.useCallback(N,X)},At.useContext=function(N){return I.H.useContext(N)},At.useDebugValue=function(){},At.useDeferredValue=function(N,X){return I.H.useDeferredValue(N,X)},At.useEffect=function(N,X){return I.H.useEffect(N,X)},At.useEffectEvent=function(N){return I.H.useEffectEvent(N)},At.useId=function(){return I.H.useId()},At.useImperativeHandle=function(N,X,st){return I.H.useImperativeHandle(N,X,st)},At.useInsertionEffect=function(N,X){return I.H.useInsertionEffect(N,X)},At.useLayoutEffect=function(N,X){return I.H.useLayoutEffect(N,X)},At.useMemo=function(N,X){return I.H.useMemo(N,X)},At.useOptimistic=function(N,X){return I.H.useOptimistic(N,X)},At.useReducer=function(N,X,st){return I.H.useReducer(N,X,st)},At.useRef=function(N){return I.H.useRef(N)},At.useState=function(N){return I.H.useState(N)},At.useSyncExternalStore=function(N,X,st){return I.H.useSyncExternalStore(N,X,st)},At.useTransition=function(){return I.H.useTransition()},At.version="19.2.4",At}var fT;function Mg(){return fT||(fT=1,jm.exports=Mb()),jm.exports}var Ui=Mg(),Gm={exports:{}},ou={},Hm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT;function Ob(){return dT||(dT=1,(function(a){function t(Q,rt){var yt=Q.length;Q.push(rt);t:for(;0<yt;){var Lt=yt-1>>>1,Ht=Q[Lt];if(0<l(Ht,rt))Q[Lt]=rt,Q[yt]=Ht,yt=Lt;else break t}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var rt=Q[0],yt=Q.pop();if(yt!==rt){Q[0]=yt;t:for(var Lt=0,Ht=Q.length,N=Ht>>>1;Lt<N;){var X=2*(Lt+1)-1,st=Q[X],ot=X+1,Tt=Q[ot];if(0>l(st,yt))ot<Ht&&0>l(Tt,st)?(Q[Lt]=Tt,Q[ot]=yt,Lt=ot):(Q[Lt]=st,Q[X]=yt,Lt=X);else if(ot<Ht&&0>l(Tt,yt))Q[Lt]=Tt,Q[ot]=yt,Lt=ot;else break t}}return rt}function l(Q,rt){var yt=Q.sortIndex-rt.sortIndex;return yt!==0?yt:Q.id-rt.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();a.unstable_now=function(){return h.now()-m}}var g=[],_=[],T=1,A=null,b=3,B=!1,J=!1,$=!1,tt=!1,mt=typeof setTimeout=="function"?setTimeout:null,_t=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;function Vt(Q){for(var rt=n(_);rt!==null;){if(rt.callback===null)r(_);else if(rt.startTime<=Q)r(_),rt.sortIndex=rt.expirationTime,t(g,rt);else break;rt=n(_)}}function lt(Q){if($=!1,Vt(Q),!J)if(n(g)!==null)J=!0,ht||(ht=!0,P());else{var rt=n(_);rt!==null&&Ue(lt,rt.startTime-Q)}}var ht=!1,I=-1,w=5,D=-1;function M(){return tt?!0:!(a.unstable_now()-D<w)}function x(){if(tt=!1,ht){var Q=a.unstable_now();D=Q;var rt=!0;try{t:{J=!1,$&&($=!1,_t(I),I=-1),B=!0;var yt=b;try{e:{for(Vt(Q),A=n(g);A!==null&&!(A.expirationTime>Q&&M());){var Lt=A.callback;if(typeof Lt=="function"){A.callback=null,b=A.priorityLevel;var Ht=Lt(A.expirationTime<=Q);if(Q=a.unstable_now(),typeof Ht=="function"){A.callback=Ht,Vt(Q),rt=!0;break e}A===n(g)&&r(g),Vt(Q)}else r(g);A=n(g)}if(A!==null)rt=!0;else{var N=n(_);N!==null&&Ue(lt,N.startTime-Q),rt=!1}}break t}finally{A=null,b=yt,B=!1}rt=void 0}}finally{rt?P():ht=!1}}}var P;if(typeof ct=="function")P=function(){ct(x)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,oe=R.port2;R.port1.onmessage=x,P=function(){oe.postMessage(null)}}else P=function(){mt(x,0)};function Ue(Q,rt){I=mt(function(){Q(a.unstable_now())},rt)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Q){Q.callback=null},a.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var rt=3;break;default:rt=b}var yt=b;b=rt;try{return Q()}finally{b=yt}},a.unstable_requestPaint=function(){tt=!0},a.unstable_runWithPriority=function(Q,rt){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var yt=b;b=Q;try{return rt()}finally{b=yt}},a.unstable_scheduleCallback=function(Q,rt,yt){var Lt=a.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Lt+yt:Lt):yt=Lt,Q){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=yt+Ht,Q={id:T++,callback:rt,priorityLevel:Q,startTime:yt,expirationTime:Ht,sortIndex:-1},yt>Lt?(Q.sortIndex=yt,t(_,Q),n(g)===null&&Q===n(_)&&($?(_t(I),I=-1):$=!0,Ue(lt,yt-Lt))):(Q.sortIndex=Ht,t(g,Q),J||B||(J=!0,ht||(ht=!0,P()))),Q},a.unstable_shouldYield=M,a.unstable_wrapCallback=function(Q){var rt=b;return function(){var yt=b;b=rt;try{return Q.apply(this,arguments)}finally{b=yt}}}})(Qm)),Qm}var mT;function Pb(){return mT||(mT=1,Hm.exports=Ob()),Hm.exports}var Km={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function zb(){if(gT)return nn;gT=1;var a=Mg();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,_,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:g,containerInfo:_,implementation:T}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,nn.createPortal=function(g,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,T)},nn.flushSync=function(g){var _=h.T,T=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=_,r.p=T,r.d.f()}},nn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},nn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},nn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var T=_.as,A=m(T,_.crossOrigin),b=typeof _.integrity=="string"?_.integrity:void 0,B=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:b,fetchPriority:B}):T==="script"&&r.d.X(g,{crossOrigin:A,integrity:b,fetchPriority:B,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},nn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=m(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},nn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,A=m(T,_.crossOrigin);r.d.L(g,T,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},nn.preloadModule=function(g,_){if(typeof g=="string")if(_){var T=m(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},nn.requestFormReset=function(g){r.d.r(g)},nn.unstable_batchedUpdates=function(g,_){return g(_)},nn.useFormState=function(g,_,T){return h.H.useFormState(g,_,T)},nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},nn.version="19.2.4",nn}var pT;function Ub(){if(pT)return Km.exports;pT=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Km.exports=zb(),Km.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T;function Lb(){if(_T)return ou;_T=1;var a=Pb(),t=Mg(),n=Ub();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,s=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(s=i.return),e=i.return;while(e)}return i.tag===3?s:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function _(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var s=e,o=i;;){var f=s.return;if(f===null)break;var d=f.alternate;if(d===null){if(o=f.return,o!==null){s=o;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===s)return g(f),e;if(d===o)return g(f),i;d=d.sibling}throw Error(r(188))}if(s.return!==o.return)s=f,o=d;else{for(var y=!1,E=f.child;E;){if(E===s){y=!0,s=f,o=d;break}if(E===o){y=!0,o=f,s=d;break}E=E.sibling}if(!y){for(E=d.child;E;){if(E===s){y=!0,s=d,o=f;break}if(E===o){y=!0,o=d,s=f;break}E=E.sibling}if(!y)throw Error(r(189))}}if(s.alternate!==o)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:i}function T(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=T(e),i!==null)return i;e=e.sibling}return null}var A=Object.assign,b=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),mt=Symbol.for("react.profiler"),_t=Symbol.for("react.consumer"),ct=Symbol.for("react.context"),Vt=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=x&&e[x]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $:return"Fragment";case mt:return"Profiler";case tt:return"StrictMode";case lt:return"Suspense";case ht:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case J:return"Portal";case ct:return e.displayName||"Context";case _t:return(e._context.displayName||"Context")+".Consumer";case Vt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return i=e.displayName||null,i!==null?i:oe(e.type)||"Memo";case w:i=e._payload,e=e._init;try{return oe(e(i))}catch{}}return null}var Ue=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},Lt=[],Ht=-1;function N(e){return{current:e}}function X(e){0>Ht||(e.current=Lt[Ht],Lt[Ht]=null,Ht--)}function st(e,i){Ht++,Lt[Ht]=e.current,e.current=i}var ot=N(null),Tt=N(null),It=N(null),zt=N(null);function Le(e,i){switch(st(It,i),st(Tt,e),st(ot,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?xv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=xv(i),e=Nv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}X(ot),st(ot,e)}function ue(){X(ot),X(Tt),X(It)}function vs(e){e.memoizedState!==null&&st(zt,e);var i=ot.current,s=Nv(i,e.type);i!==s&&(st(Tt,e),st(ot,s))}function wa(e){Tt.current===e&&(X(ot),X(Tt)),zt.current===e&&(X(zt),iu._currentValue=yt)}var ba,Ia;function gi(e){if(ba===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);ba=i&&i[1]||"",Ia=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ba+e+Ia}var no=!1;function Ts(e,i){if(!e||no)return"";no=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(G){var k=G}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(G){k=G}e.call(Y.prototype)}}else{try{throw Error()}catch(G){k=G}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(G){if(G&&k&&typeof G.stack=="string")return[G.stack,k.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),y=d[0],E=d[1];if(y&&E){var V=y.split(`
`),q=E.split(`
`);for(f=o=0;o<V.length&&!V[o].includes("DetermineComponentFrameRoot");)o++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(o===V.length||f===q.length)for(o=V.length-1,f=q.length-1;1<=o&&0<=f&&V[o]!==q[f];)f--;for(;1<=o&&0<=f;o--,f--)if(V[o]!==q[f]){if(o!==1||f!==1)do if(o--,f--,0>f||V[o]!==q[f]){var H=`
`+V[o].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=o&&0<=f);break}}}finally{no=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?gi(s):""}function io(e,i){switch(e.tag){case 26:case 27:case 5:return gi(e.type);case 16:return gi("Lazy");case 13:return e.child!==i&&i!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return Ts(e.type,!1);case 11:return Ts(e.type.render,!1);case 1:return Ts(e.type,!0);case 31:return gi("Activity");default:return""}}function ro(e){try{var i="",s=null;do i+=io(e,s),s=e,e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var be=Object.prototype.hasOwnProperty,qe=a.unstable_scheduleCallback,yr=a.unstable_cancelCallback,Gf=a.unstable_shouldYield,lc=a.unstable_requestPaint,un=a.unstable_now,Es=a.unstable_getCurrentPriorityLevel,so=a.unstable_ImmediatePriority,ao=a.unstable_UserBlockingPriority,vr=a.unstable_NormalPriority,Hf=a.unstable_LowPriority,oc=a.unstable_IdlePriority,uc=a.log,cc=a.unstable_setDisableYieldValue,$n=null,Ke=null;function Un(e){if(typeof uc=="function"&&cc(e),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode($n,e)}catch{}}var ye=Math.clz32?Math.clz32:fc,hc=Math.log,Ra=Math.LN2;function fc(e){return e>>>=0,e===0?32:31-(hc(e)/Ra|0)|0}var pi=256,As=262144,Ie=4194304;function _i(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yi(e,i,s){var o=e.pendingLanes;if(o===0)return 0;var f=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~d,o!==0?f=_i(o):(y&=E,y!==0?f=_i(y):s||(s=E&~e,s!==0&&(f=_i(s))))):(E=o&~d,E!==0?f=_i(E):y!==0?f=_i(y):s||(s=o&~e,s!==0&&(f=_i(s)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,s=i&-i,d>=s||d===32&&(s&4194048)!==0)?i:f}function Wn(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Qf(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dc(){var e=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),e}function vi(e){for(var i=[],s=0;31>s;s++)i.push(e);return i}function Ss(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Kf(e,i,s,o,f,d){var y=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var E=e.entanglements,V=e.expirationTimes,q=e.hiddenUpdates;for(s=y&~s;0<s;){var H=31-ye(s),Y=1<<H;E[H]=0,V[H]=-1;var k=q[H];if(k!==null)for(q[H]=null,H=0;H<k.length;H++){var G=k[H];G!==null&&(G.lane&=-536870913)}s&=~Y}o!==0&&ws(e,o,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~i))}function ws(e,i,s){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-ye(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|s&261930}function lo(e,i){var s=e.entangledLanes|=i;for(e=e.entanglements;s;){var o=31-ye(s),f=1<<o;f&i|e[o]&i&&(e[o]|=i),s&=~f}}function oo(e,i){var s=i&-i;return s=(s&42)!==0?1:bs(s),(s&(e.suspendedLanes|i))!==0?0:s}function bs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function mc(){var e=rt.p;return e!==0?e:(e=window.event,e===void 0?32:eT(e.type))}function ti(e,i){var s=rt.p;try{return rt.p=e,i()}finally{rt.p=s}}var ei=Math.random().toString(36).slice(2),Re="__reactFiber$"+ei,Fe="__reactProps$"+ei,Ti="__reactContainer$"+ei,Va="__reactEvents$"+ei,Yf="__reactListeners$"+ei,gc="__reactHandles$"+ei,pc="__reactResources$"+ei,Ei="__reactMarker$"+ei;function Da(e){delete e[Re],delete e[Fe],delete e[Va],delete e[Yf],delete e[gc]}function Ai(e){var i=e[Re];if(i)return i;for(var s=e.parentNode;s;){if(i=s[Ti]||s[Re]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(e=qv(e);e!==null;){if(s=e[Re])return s;e=qv(e)}return i}e=s,s=e.parentNode}return null}function Ln(e){if(e=e[Re]||e[Ti]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function In(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Si(e){var i=e[pc];return i||(i=e[pc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ve(e){e[Ei]=!0}var uo=new Set,co={};function wi(e,i){bi(e,i),bi(e+"Capture",i)}function bi(e,i){for(co[e]=i,e=0;e<i.length;e++)uo.add(i[e])}var ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fo={},mo={};function _c(e){return be.call(mo,e)?!0:be.call(fo,e)?!1:ho.test(e)?mo[e]=!0:(fo[e]=!0,!1)}function Ca(e,i,s){if(_c(i))if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+s)}}function Rn(e,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+s)}}function De(e,i,s,o){if(o===null)e.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(i,s,""+o)}}function je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tr(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function go(e,i,s){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,d=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(y){s=""+y,d.call(this,y)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Qt(e){if(!e._valueTracker){var i=Tr(e)?"checked":"value";e._valueTracker=go(e,i,""+e[i])}}function Is(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var s=i.getValue(),o="";return e&&(o=Tr(e)?e.checked?"true":"false":e.value),e=o,e!==s?(i.setValue(e),!0):!1}function Ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rs=/[\n"\\]/g;function pn(e){return e.replace(Rs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function xa(e,i,s,o,f,d,y,E){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),i!=null?y==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+je(i)):e.value!==""+je(i)&&(e.value=""+je(i)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),i!=null?po(e,y,je(i)):s!=null?po(e,y,je(s)):o!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+je(E):e.removeAttribute("name")}function yc(e,i,s,o,f,d,y,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Qt(e);return}s=s!=null?""+je(s):"",i=i!=null?""+je(i):s,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Qt(e)}function po(e,i,s){i==="number"&&Ii(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Er(e,i,s,o){if(e=e.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=i.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&o&&(e[s].defaultSelected=!0)}else{for(s=""+je(s),i=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function vc(e,i,s){if(i!=null&&(i=""+je(i),i!==e.value&&(e.value=i),s==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=s!=null?""+je(s):""}function Ar(e,i,s,o){if(i==null){if(o!=null){if(s!=null)throw Error(r(92));if(Ue(o)){if(1<o.length)throw Error(r(93));o=o[0]}s=o}s==null&&(s=""),i=s}s=je(i),e.defaultValue=s,o=e.textContent,o===s&&o!==""&&o!==null&&(e.value=o),Qt(e)}function _n(e,i){if(i){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=i;return}}e.textContent=i}var Tc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _o(e,i,s){var o=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,s):typeof s!="number"||s===0||Tc.has(i)?i==="float"?e.cssFloat=s:e[i]=(""+s).trim():e[i]=s+"px"}function yo(e,i,s){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in i)o=i[f],i.hasOwnProperty(f)&&s[f]!==o&&_o(e,f,o)}else for(var d in i)i.hasOwnProperty(d)&&_o(e,d,i[d])}function Na(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ec=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(e){return Sr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ni(){}var vo=null;function qn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wr=null,Ri=null;function Vs(e){var i=Ln(e);if(i&&(e=i.stateNode)){var s=e[Fe]||null;t:switch(e=i.stateNode,i.type){case"input":if(xa(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var o=s[i];if(o!==e&&o.form===e.form){var f=o[Fe]||null;if(!f)throw Error(r(90));xa(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)o=s[i],o.form===e.form&&Is(o)}break t;case"textarea":vc(e,s.value,s.defaultValue);break t;case"select":i=s.value,i!=null&&Er(e,!!s.multiple,i,!1)}}}var Oa=!1;function br(e,i,s){if(Oa)return e(i,s);Oa=!0;try{var o=e(i);return o}finally{if(Oa=!1,(wr!==null||Ri!==null)&&(mh(),wr&&(i=wr,e=Ri,Ri=wr=null,Vs(i),e)))for(i=0;i<e.length;i++)Vs(e[i])}}function ii(e,i){var s=e.stateNode;if(s===null)return null;var o=s[Fe]||null;if(o===null)return null;s=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ds=!1;if(Bn)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{Ds=!1}var Vi=null,To=null,Cs=null;function Eo(){if(Cs)return Cs;var e,i=To,s=i.length,o,f="value"in Vi?Vi.value:Vi.textContent,d=f.length;for(e=0;e<s&&i[e]===f[e];e++);var y=s-e;for(o=1;o<=y&&i[s-o]===f[d-o];o++);return Cs=f.slice(e,1<o?1-o:void 0)}function xs(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Qi(){return!0}function ri(){return!1}function Ye(e){function i(s,o,f,d,y){this._reactName=s,this._targetInst=f,this.type=o,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(s=e[E],this[E]=s?s(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Qi:ri,this.isPropagationStopped=ri,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),i}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=Ye(Ki),Ir=A({},Ki,{view:0,detail:0}),Ao=Ye(Ir),Rr,Pa,Ci,za=A({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(Rr=e.screenX-Ci.screenX,Pa=e.screenY-Ci.screenY):Pa=Rr=0,Ci=e),Rr)},movementY:function(e){return"movementY"in e?e.movementY:Pa}}),So=Ye(za),Ns=A({},za,{dataTransfer:0}),Ac=Ye(Ns),Sc=A({},Ir,{relatedTarget:0}),Ms=Ye(Sc),wo=A({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),wc=Ye(wo),Ua=A({},Ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bc=Ye(Ua),Ic=A({},Ki,{data:0}),xi=Ye(Ic),Rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Dc[e])?!!i[e]:!1}function Vr(){return Cc}var cn=A({},Ir,{key:function(e){if(e.key){var i=Rc[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(e){return e.type==="keypress"?xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xc=Ye(cn),Nc=A({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Ye(Nc),c=A({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),p=Ye(c),v=A({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Ye(v),U=A({},za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),j=Ye(U),et=A({},Ki,{newState:0,oldState:0}),St=Ye(et),ve=[9,13,27,32],Ft=Bn&&"CompositionEvent"in window,ce=null;Bn&&"documentMode"in document&&(ce=document.documentMode);var kn=Bn&&"TextEvent"in window&&!ce,Ni=Bn&&(!Ft||ce&&8<ce&&11>=ce),si=" ",ai=!1;function Os(e,i){switch(e){case"keyup":return ve.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qa=!1;function GS(e,i){switch(e){case"compositionend":return La(i);case"keypress":return i.which!==32?null:(ai=!0,si);case"textInput":return e=i.data,e===si&&ai?null:e;default:return null}}function HS(e,i){if(qa)return e==="compositionend"||!Ft&&Os(e,i)?(e=Eo(),Cs=To=Vi=null,qa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ni&&i.locale!=="ko"?null:i.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!QS[e.type]:i==="textarea"}function jp(e,i,s,o){wr?Ri?Ri.push(o):Ri=[o]:wr=o,i=Eh(i,"onChange"),0<i.length&&(s=new Di("onChange","change",null,s,o),e.push({event:s,listeners:i}))}var bo=null,Io=null;function KS(e){bv(e,0)}function Mc(e){var i=In(e);if(Is(i))return e}function Gp(e,i){if(e==="change")return i}var Hp=!1;if(Bn){var Xf;if(Bn){var Zf="oninput"in document;if(!Zf){var Qp=document.createElement("div");Qp.setAttribute("oninput","return;"),Zf=typeof Qp.oninput=="function"}Xf=Zf}else Xf=!1;Hp=Xf&&(!document.documentMode||9<document.documentMode)}function Kp(){bo&&(bo.detachEvent("onpropertychange",Yp),Io=bo=null)}function Yp(e){if(e.propertyName==="value"&&Mc(Io)){var i=[];jp(i,Io,e,qn(e)),br(KS,i)}}function YS(e,i,s){e==="focusin"?(Kp(),bo=i,Io=s,bo.attachEvent("onpropertychange",Yp)):e==="focusout"&&Kp()}function XS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mc(Io)}function ZS(e,i){if(e==="click")return Mc(i)}function JS(e,i){if(e==="input"||e==="change")return Mc(i)}function $S(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Vn=typeof Object.is=="function"?Object.is:$S;function Ro(e,i){if(Vn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var s=Object.keys(e),o=Object.keys(i);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var f=s[o];if(!be.call(i,f)||!Vn(e[f],i[f]))return!1}return!0}function Xp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zp(e,i){var s=Xp(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=i&&o>=i)return{node:s,offset:i-e};e=o}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Xp(s)}}function Jp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Jp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function $p(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ii(e.document);i instanceof e.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)e=i.contentWindow;else break;i=Ii(e.document)}return i}function Jf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var WS=Bn&&"documentMode"in document&&11>=document.documentMode,Ba=null,$f=null,Vo=null,Wf=!1;function Wp(e,i,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Wf||Ba==null||Ba!==Ii(o)||(o=Ba,"selectionStart"in o&&Jf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vo&&Ro(Vo,o)||(Vo=o,o=Eh($f,"onSelect"),0<o.length&&(i=new Di("onSelect","select",null,i,s),e.push({event:i,listeners:o}),i.target=Ba)))}function Ps(e,i){var s={};return s[e.toLowerCase()]=i.toLowerCase(),s["Webkit"+e]="webkit"+i,s["Moz"+e]="moz"+i,s}var ka={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},td={},t_={};Bn&&(t_=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function zs(e){if(td[e])return td[e];if(!ka[e])return e;var i=ka[e],s;for(s in i)if(i.hasOwnProperty(s)&&s in t_)return td[e]=i[s];return e}var e_=zs("animationend"),n_=zs("animationiteration"),i_=zs("animationstart"),tw=zs("transitionrun"),ew=zs("transitionstart"),nw=zs("transitioncancel"),r_=zs("transitionend"),s_=new Map,ed="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ed.push("scrollEnd");function li(e,i){s_.set(e,i),wi(i,[e])}var Oc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Fn=[],Fa=0,nd=0;function Pc(){for(var e=Fa,i=nd=Fa=0;i<e;){var s=Fn[i];Fn[i++]=null;var o=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var d=Fn[i];if(Fn[i++]=null,o!==null&&f!==null){var y=o.pending;y===null?f.next=f:(f.next=y.next,y.next=f),o.pending=f}d!==0&&a_(s,f,d)}}function zc(e,i,s,o){Fn[Fa++]=e,Fn[Fa++]=i,Fn[Fa++]=s,Fn[Fa++]=o,nd|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function id(e,i,s,o){return zc(e,i,s,o),Uc(e)}function Us(e,i){return zc(e,null,null,i),Uc(e)}function a_(e,i,s){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s);for(var f=!1,d=e.return;d!==null;)d.childLanes|=s,o=d.alternate,o!==null&&(o.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-ye(s),e=d.hiddenUpdates,o=e[f],o===null?e[f]=[i]:o.push(i),i.lane=s|536870912),d):null}function Uc(e){if(50<Zo)throw Zo=0,fm=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ja={};function iw(e,i,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,i,s,o){return new iw(e,i,s,o)}function rd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xi(e,i){var s=e.alternate;return s===null?(s=Dn(e.tag,i,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=i,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,i=e.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function l_(e,i){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,i=s.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Lc(e,i,s,o,f,d){var y=0;if(o=e,typeof e=="function")rd(e)&&(y=1);else if(typeof e=="string")y=ob(e,s,ot.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case D:return e=Dn(31,s,i,f),e.elementType=D,e.lanes=d,e;case $:return Ls(s.children,f,d,i);case tt:y=8,f|=24;break;case mt:return e=Dn(12,s,i,f|2),e.elementType=mt,e.lanes=d,e;case lt:return e=Dn(13,s,i,f),e.elementType=lt,e.lanes=d,e;case ht:return e=Dn(19,s,i,f),e.elementType=ht,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ct:y=10;break t;case _t:y=9;break t;case Vt:y=11;break t;case I:y=14;break t;case w:y=16,o=null;break t}y=29,s=Error(r(130,e===null?"null":typeof e,"")),o=null}return i=Dn(y,s,i,f),i.elementType=e,i.type=o,i.lanes=d,i}function Ls(e,i,s,o){return e=Dn(7,e,o,i),e.lanes=s,e}function sd(e,i,s){return e=Dn(6,e,null,i),e.lanes=s,e}function o_(e){var i=Dn(18,null,null,0);return i.stateNode=e,i}function ad(e,i,s){return i=Dn(4,e.children!==null?e.children:[],e.key,i),i.lanes=s,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var u_=new WeakMap;function jn(e,i){if(typeof e=="object"&&e!==null){var s=u_.get(e);return s!==void 0?s:(i={value:e,source:i,stack:ro(i)},u_.set(e,i),i)}return{value:e,source:i,stack:ro(i)}}var Ga=[],Ha=0,qc=null,Do=0,Gn=[],Hn=0,Dr=null,Mi=1,Oi="";function Zi(e,i){Ga[Ha++]=Do,Ga[Ha++]=qc,qc=e,Do=i}function c_(e,i,s){Gn[Hn++]=Mi,Gn[Hn++]=Oi,Gn[Hn++]=Dr,Dr=e;var o=Mi;e=Oi;var f=32-ye(o)-1;o&=~(1<<f),s+=1;var d=32-ye(i)+f;if(30<d){var y=f-f%5;d=(o&(1<<y)-1).toString(32),o>>=y,f-=y,Mi=1<<32-ye(i)+f|s<<f|o,Oi=d+e}else Mi=1<<d|s<<f|o,Oi=e}function ld(e){e.return!==null&&(Zi(e,1),c_(e,1,0))}function od(e){for(;e===qc;)qc=Ga[--Ha],Ga[Ha]=null,Do=Ga[--Ha],Ga[Ha]=null;for(;e===Dr;)Dr=Gn[--Hn],Gn[Hn]=null,Oi=Gn[--Hn],Gn[Hn]=null,Mi=Gn[--Hn],Gn[Hn]=null}function h_(e,i){Gn[Hn++]=Mi,Gn[Hn++]=Oi,Gn[Hn++]=Dr,Mi=i.id,Oi=i.overflow,Dr=e}var Xe=null,se=null,Pt=!1,Cr=null,Qn=!1,ud=Error(r(519));function xr(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Co(jn(i,e)),ud}function f_(e){var i=e.stateNode,s=e.type,o=e.memoizedProps;switch(i[Re]=e,i[Fe]=o,s){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(s=0;s<$o.length;s++)Ct($o[s],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":Ct("invalid",i),yc(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ct("invalid",i);break;case"textarea":Ct("invalid",i),Ar(i,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||o.suppressHydrationWarning===!0||Dv(i.textContent,s)?(o.popover!=null&&(Ct("beforetoggle",i),Ct("toggle",i)),o.onScroll!=null&&Ct("scroll",i),o.onScrollEnd!=null&&Ct("scrollend",i),o.onClick!=null&&(i.onclick=ni),i=!0):i=!1,i||xr(e,!0)}function d_(e){for(Xe=e.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Xe=Xe.return}}function Qa(e){if(e!==Xe)return!1;if(!Pt)return d_(e),Pt=!0,!1;var i=e.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Rm(e.type,e.memoizedProps)),s=!s),s&&se&&xr(e),d_(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));se=Lv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));se=Lv(e)}else i===27?(i=se,Hr(e.type)?(e=Nm,Nm=null,se=e):se=i):se=Xe?Yn(e.stateNode.nextSibling):null;return!0}function qs(){se=Xe=null,Pt=!1}function cd(){var e=Cr;return e!==null&&(En===null?En=e:En.push.apply(En,e),Cr=null),e}function Co(e){Cr===null?Cr=[e]:Cr.push(e)}var hd=N(null),Bs=null,Ji=null;function Nr(e,i,s){st(hd,i._currentValue),i._currentValue=s}function $i(e){e._currentValue=hd.current,X(hd)}function fd(e,i,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===s)break;e=e.return}}function dd(e,i,s,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var y=f.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=f;for(var V=0;V<i.length;V++)if(E.context===i[V]){d.lanes|=s,E=d.alternate,E!==null&&(E.lanes|=s),fd(d.return,s,e),o||(y=null);break t}d=E.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(r(341));y.lanes|=s,d=y.alternate,d!==null&&(d.lanes|=s),fd(y,s,e),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===e){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function Ka(e,i,s,o){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var E=f.type;Vn(f.pendingProps.value,y.value)||(e!==null?e.push(E):e=[E])}}else if(f===zt.current){if(y=f.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(iu):e=[iu])}f=f.return}e!==null&&dd(i,e,s,o),i.flags|=262144}function Bc(e){for(e=e.firstContext;e!==null;){if(!Vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ks(e){Bs=e,Ji=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return m_(Bs,e)}function kc(e,i){return Bs===null&&ks(e),m_(e,i)}function m_(e,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Ji===null){if(e===null)throw Error(r(308));Ji=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ji=Ji.next=i;return s}var rw=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(s,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(s){return s()})}},sw=a.unstable_scheduleCallback,aw=a.unstable_NormalPriority,Ce={$$typeof:ct,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function md(){return{controller:new rw,data:new Map,refCount:0}}function xo(e){e.refCount--,e.refCount===0&&sw(aw,function(){e.controller.abort()})}var No=null,gd=0,Ya=0,Xa=null;function lw(e,i){if(No===null){var s=No=[];gd=0,Ya=ym(),Xa={status:"pending",value:void 0,then:function(o){s.push(o)}}}return gd++,i.then(g_,g_),i}function g_(){if(--gd===0&&No!==null){Xa!==null&&(Xa.status="fulfilled");var e=No;No=null,Ya=0,Xa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function ow(e,i){var s=[],o={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(o.status="rejected",o.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),o}var p_=Q.S;Q.S=function(e,i){Wy=un(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&lw(e,i),p_!==null&&p_(e,i)};var Fs=N(null);function pd(){var e=Fs.current;return e!==null?e:ee.pooledCache}function Fc(e,i){i===null?st(Fs,Fs.current):st(Fs,i.pool)}function __(){var e=pd();return e===null?null:{parent:Ce._currentValue,pool:e}}var Za=Error(r(460)),_d=Error(r(474)),jc=Error(r(542)),Gc={then:function(){}};function y_(e){return e=e.status,e==="fulfilled"||e==="rejected"}function v_(e,i,s){switch(s=e[s],s===void 0?e.push(i):s!==i&&(i.then(ni,ni),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,E_(e),e;default:if(typeof i.status=="string")i.then(ni,ni);else{if(e=ee,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=o}},function(o){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,E_(e),e}throw Gs=i,Za}}function js(e){try{var i=e._init;return i(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Gs=s,Za):s}}var Gs=null;function T_(){if(Gs===null)throw Error(r(459));var e=Gs;return Gs=null,e}function E_(e){if(e===Za||e===jc)throw Error(r(483))}var Ja=null,Mo=0;function Hc(e){var i=Mo;return Mo+=1,Ja===null&&(Ja=[]),v_(Ja,e,i)}function Oo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Qc(e,i){throw i.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function A_(e){function i(O,C){if(e){var L=O.deletions;L===null?(O.deletions=[C],O.flags|=16):L.push(C)}}function s(O,C){if(!e)return null;for(;C!==null;)i(O,C),C=C.sibling;return null}function o(O){for(var C=new Map;O!==null;)O.key!==null?C.set(O.key,O):C.set(O.index,O),O=O.sibling;return C}function f(O,C){return O=Xi(O,C),O.index=0,O.sibling=null,O}function d(O,C,L){return O.index=L,e?(L=O.alternate,L!==null?(L=L.index,L<C?(O.flags|=67108866,C):L):(O.flags|=67108866,C)):(O.flags|=1048576,C)}function y(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function E(O,C,L,K){return C===null||C.tag!==6?(C=sd(L,O.mode,K),C.return=O,C):(C=f(C,L),C.return=O,C)}function V(O,C,L,K){var pt=L.type;return pt===$?H(O,C,L.props.children,K,L.key):C!==null&&(C.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===w&&js(pt)===C.type)?(C=f(C,L.props),Oo(C,L),C.return=O,C):(C=Lc(L.type,L.key,L.props,null,O.mode,K),Oo(C,L),C.return=O,C)}function q(O,C,L,K){return C===null||C.tag!==4||C.stateNode.containerInfo!==L.containerInfo||C.stateNode.implementation!==L.implementation?(C=ad(L,O.mode,K),C.return=O,C):(C=f(C,L.children||[]),C.return=O,C)}function H(O,C,L,K,pt){return C===null||C.tag!==7?(C=Ls(L,O.mode,K,pt),C.return=O,C):(C=f(C,L),C.return=O,C)}function Y(O,C,L){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=sd(""+C,O.mode,L),C.return=O,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case B:return L=Lc(C.type,C.key,C.props,null,O.mode,L),Oo(L,C),L.return=O,L;case J:return C=ad(C,O.mode,L),C.return=O,C;case w:return C=js(C),Y(O,C,L)}if(Ue(C)||P(C))return C=Ls(C,O.mode,L,null),C.return=O,C;if(typeof C.then=="function")return Y(O,Hc(C),L);if(C.$$typeof===ct)return Y(O,kc(O,C),L);Qc(O,C)}return null}function k(O,C,L,K){var pt=C!==null?C.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return pt!==null?null:E(O,C,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case B:return L.key===pt?V(O,C,L,K):null;case J:return L.key===pt?q(O,C,L,K):null;case w:return L=js(L),k(O,C,L,K)}if(Ue(L)||P(L))return pt!==null?null:H(O,C,L,K,null);if(typeof L.then=="function")return k(O,C,Hc(L),K);if(L.$$typeof===ct)return k(O,C,kc(O,L),K);Qc(O,L)}return null}function G(O,C,L,K,pt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return O=O.get(L)||null,E(C,O,""+K,pt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case B:return O=O.get(K.key===null?L:K.key)||null,V(C,O,K,pt);case J:return O=O.get(K.key===null?L:K.key)||null,q(C,O,K,pt);case w:return K=js(K),G(O,C,L,K,pt)}if(Ue(K)||P(K))return O=O.get(L)||null,H(C,O,K,pt,null);if(typeof K.then=="function")return G(O,C,L,Hc(K),pt);if(K.$$typeof===ct)return G(O,C,L,kc(C,K),pt);Qc(C,K)}return null}function ut(O,C,L,K){for(var pt=null,qt=null,dt=C,Rt=C=0,Mt=null;dt!==null&&Rt<L.length;Rt++){dt.index>Rt?(Mt=dt,dt=null):Mt=dt.sibling;var Bt=k(O,dt,L[Rt],K);if(Bt===null){dt===null&&(dt=Mt);break}e&&dt&&Bt.alternate===null&&i(O,dt),C=d(Bt,C,Rt),qt===null?pt=Bt:qt.sibling=Bt,qt=Bt,dt=Mt}if(Rt===L.length)return s(O,dt),Pt&&Zi(O,Rt),pt;if(dt===null){for(;Rt<L.length;Rt++)dt=Y(O,L[Rt],K),dt!==null&&(C=d(dt,C,Rt),qt===null?pt=dt:qt.sibling=dt,qt=dt);return Pt&&Zi(O,Rt),pt}for(dt=o(dt);Rt<L.length;Rt++)Mt=G(dt,O,Rt,L[Rt],K),Mt!==null&&(e&&Mt.alternate!==null&&dt.delete(Mt.key===null?Rt:Mt.key),C=d(Mt,C,Rt),qt===null?pt=Mt:qt.sibling=Mt,qt=Mt);return e&&dt.forEach(function(Zr){return i(O,Zr)}),Pt&&Zi(O,Rt),pt}function vt(O,C,L,K){if(L==null)throw Error(r(151));for(var pt=null,qt=null,dt=C,Rt=C=0,Mt=null,Bt=L.next();dt!==null&&!Bt.done;Rt++,Bt=L.next()){dt.index>Rt?(Mt=dt,dt=null):Mt=dt.sibling;var Zr=k(O,dt,Bt.value,K);if(Zr===null){dt===null&&(dt=Mt);break}e&&dt&&Zr.alternate===null&&i(O,dt),C=d(Zr,C,Rt),qt===null?pt=Zr:qt.sibling=Zr,qt=Zr,dt=Mt}if(Bt.done)return s(O,dt),Pt&&Zi(O,Rt),pt;if(dt===null){for(;!Bt.done;Rt++,Bt=L.next())Bt=Y(O,Bt.value,K),Bt!==null&&(C=d(Bt,C,Rt),qt===null?pt=Bt:qt.sibling=Bt,qt=Bt);return Pt&&Zi(O,Rt),pt}for(dt=o(dt);!Bt.done;Rt++,Bt=L.next())Bt=G(dt,O,Rt,Bt.value,K),Bt!==null&&(e&&Bt.alternate!==null&&dt.delete(Bt.key===null?Rt:Bt.key),C=d(Bt,C,Rt),qt===null?pt=Bt:qt.sibling=Bt,qt=Bt);return e&&dt.forEach(function(vb){return i(O,vb)}),Pt&&Zi(O,Rt),pt}function te(O,C,L,K){if(typeof L=="object"&&L!==null&&L.type===$&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case B:t:{for(var pt=L.key;C!==null;){if(C.key===pt){if(pt=L.type,pt===$){if(C.tag===7){s(O,C.sibling),K=f(C,L.props.children),K.return=O,O=K;break t}}else if(C.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===w&&js(pt)===C.type){s(O,C.sibling),K=f(C,L.props),Oo(K,L),K.return=O,O=K;break t}s(O,C);break}else i(O,C);C=C.sibling}L.type===$?(K=Ls(L.props.children,O.mode,K,L.key),K.return=O,O=K):(K=Lc(L.type,L.key,L.props,null,O.mode,K),Oo(K,L),K.return=O,O=K)}return y(O);case J:t:{for(pt=L.key;C!==null;){if(C.key===pt)if(C.tag===4&&C.stateNode.containerInfo===L.containerInfo&&C.stateNode.implementation===L.implementation){s(O,C.sibling),K=f(C,L.children||[]),K.return=O,O=K;break t}else{s(O,C);break}else i(O,C);C=C.sibling}K=ad(L,O.mode,K),K.return=O,O=K}return y(O);case w:return L=js(L),te(O,C,L,K)}if(Ue(L))return ut(O,C,L,K);if(P(L)){if(pt=P(L),typeof pt!="function")throw Error(r(150));return L=pt.call(L),vt(O,C,L,K)}if(typeof L.then=="function")return te(O,C,Hc(L),K);if(L.$$typeof===ct)return te(O,C,kc(O,L),K);Qc(O,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,C!==null&&C.tag===6?(s(O,C.sibling),K=f(C,L),K.return=O,O=K):(s(O,C),K=sd(L,O.mode,K),K.return=O,O=K),y(O)):s(O,C)}return function(O,C,L,K){try{Mo=0;var pt=te(O,C,L,K);return Ja=null,pt}catch(dt){if(dt===Za||dt===jc)throw dt;var qt=Dn(29,dt,null,O.mode);return qt.lanes=K,qt.return=O,qt}finally{}}}var Hs=A_(!0),S_=A_(!1),Mr=!1;function yd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vd(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Or(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pr(e,i,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(jt&2)!==0){var f=o.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),o.pending=i,i=Uc(e),a_(e,null,s),i}return zc(e,o,i,s),Uc(e)}function Po(e,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,s|=o,i.lanes=s,lo(e,s)}}function Td(e,i){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var f=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var y={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?f=d=y:d=d.next=y,s=s.next}while(s!==null);d===null?f=d=i:d=d.next=i}else f=d=i;s={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=i:e.next=i,s.lastBaseUpdate=i}var Ed=!1;function zo(){if(Ed){var e=Xa;if(e!==null)throw e}}function Uo(e,i,s,o){Ed=!1;var f=e.updateQueue;Mr=!1;var d=f.firstBaseUpdate,y=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var V=E,q=V.next;V.next=null,y===null?d=q:y.next=q,y=V;var H=e.alternate;H!==null&&(H=H.updateQueue,E=H.lastBaseUpdate,E!==y&&(E===null?H.firstBaseUpdate=q:E.next=q,H.lastBaseUpdate=V))}if(d!==null){var Y=f.baseState;y=0,H=q=V=null,E=d;do{var k=E.lane&-536870913,G=k!==E.lane;if(G?(Nt&k)===k:(o&k)===k){k!==0&&k===Ya&&(Ed=!0),H!==null&&(H=H.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var ut=e,vt=E;k=i;var te=s;switch(vt.tag){case 1:if(ut=vt.payload,typeof ut=="function"){Y=ut.call(te,Y,k);break t}Y=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=vt.payload,k=typeof ut=="function"?ut.call(te,Y,k):ut,k==null)break t;Y=A({},Y,k);break t;case 2:Mr=!0}}k=E.callback,k!==null&&(e.flags|=64,G&&(e.flags|=8192),G=f.callbacks,G===null?f.callbacks=[k]:G.push(k))}else G={lane:k,tag:E.tag,payload:E.payload,callback:E.callback,next:null},H===null?(q=H=G,V=Y):H=H.next=G,y|=k;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;G=E,E=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);H===null&&(V=Y),f.baseState=V,f.firstBaseUpdate=q,f.lastBaseUpdate=H,d===null&&(f.shared.lanes=0),Br|=y,e.lanes=y,e.memoizedState=Y}}function w_(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function b_(e,i){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)w_(s[e],i)}var $a=N(null),Kc=N(0);function I_(e,i){e=lr,st(Kc,e),st($a,i),lr=e|i.baseLanes}function Ad(){st(Kc,lr),st($a,$a.current)}function Sd(){lr=Kc.current,X($a),X(Kc)}var Cn=N(null),Kn=null;function zr(e){var i=e.alternate;st(Te,Te.current&1),st(Cn,e),Kn===null&&(i===null||$a.current!==null||i.memoizedState!==null)&&(Kn=e)}function wd(e){st(Te,Te.current),st(Cn,e),Kn===null&&(Kn=e)}function R_(e){e.tag===22?(st(Te,Te.current),st(Cn,e),Kn===null&&(Kn=e)):Ur()}function Ur(){st(Te,Te.current),st(Cn,Cn.current)}function xn(e){X(Cn),Kn===e&&(Kn=null),X(Te)}var Te=N(0);function Yc(e){for(var i=e;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Cm(s)||xm(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,wt=null,$t=null,xe=null,Xc=!1,Wa=!1,Qs=!1,Zc=0,Lo=0,tl=null,uw=0;function ge(){throw Error(r(321))}function bd(e,i){if(i===null)return!1;for(var s=0;s<i.length&&s<e.length;s++)if(!Vn(e[s],i[s]))return!1;return!0}function Id(e,i,s,o,f,d){return Wi=d,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=e===null||e.memoizedState===null?cy:kd,Qs=!1,d=s(o,f),Qs=!1,Wa&&(d=D_(i,s,o,f)),V_(e),d}function V_(e){Q.H=ko;var i=$t!==null&&$t.next!==null;if(Wi=0,xe=$t=wt=null,Xc=!1,Lo=0,tl=null,i)throw Error(r(300));e===null||Ne||(e=e.dependencies,e!==null&&Bc(e)&&(Ne=!0))}function D_(e,i,s,o){wt=e;var f=0;do{if(Wa&&(tl=null),Lo=0,Wa=!1,25<=f)throw Error(r(301));if(f+=1,xe=$t=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=hy,d=i(s,o)}while(Wa);return d}function cw(){var e=Q.H,i=e.useState()[0];return i=typeof i.then=="function"?qo(i):i,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(wt.flags|=1024),i}function Rd(){var e=Zc!==0;return Zc=0,e}function Vd(e,i,s){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~s}function Dd(e){if(Xc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Xc=!1}Wi=0,xe=$t=wt=null,Wa=!1,Lo=Zc=0,tl=null}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?wt.memoizedState=xe=e:xe=xe.next=e,xe}function Ee(){if($t===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var i=xe===null?wt.memoizedState:xe.next;if(i!==null)xe=i,$t=e;else{if(e===null)throw wt.alternate===null?Error(r(467)):Error(r(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},xe===null?wt.memoizedState=xe=e:xe=xe.next=e}return xe}function Jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qo(e){var i=Lo;return Lo+=1,tl===null&&(tl=[]),e=v_(tl,e,i),i=wt,(xe===null?i.memoizedState:xe.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?cy:kd),e}function $c(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qo(e);if(e.$$typeof===ct)return Ze(e)}throw Error(r(438,String(e)))}function Cd(e){var i=null,s=wt.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var o=wt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=Jc(),wt.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(e),o=0;o<e;o++)s[o]=M;return i.index++,s}function tr(e,i){return typeof i=="function"?i(e):i}function Wc(e){var i=Ee();return xd(i,$t,e)}function xd(e,i,s){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var f=e.baseQueue,d=o.pending;if(d!==null){if(f!==null){var y=f.next;f.next=d.next,d.next=y}i.baseQueue=f=d,o.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var E=y=null,V=null,q=i,H=!1;do{var Y=q.lane&-536870913;if(Y!==q.lane?(Nt&Y)===Y:(Wi&Y)===Y){var k=q.revertLane;if(k===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),Y===Ya&&(H=!0);else if((Wi&k)===k){q=q.next,k===Ya&&(H=!0);continue}else Y={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},V===null?(E=V=Y,y=d):V=V.next=Y,wt.lanes|=k,Br|=k;Y=q.action,Qs&&s(d,Y),d=q.hasEagerState?q.eagerState:s(d,Y)}else k={lane:Y,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},V===null?(E=V=k,y=d):V=V.next=k,wt.lanes|=Y,Br|=Y;q=q.next}while(q!==null&&q!==i);if(V===null?y=d:V.next=E,!Vn(d,e.memoizedState)&&(Ne=!0,H&&(s=Xa,s!==null)))throw s;e.memoizedState=d,e.baseState=y,e.baseQueue=V,o.lastRenderedState=d}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Nd(e){var i=Ee(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var o=s.dispatch,f=s.pending,d=i.memoizedState;if(f!==null){s.pending=null;var y=f=f.next;do d=e(d,y.action),y=y.next;while(y!==f);Vn(d,i.memoizedState)||(Ne=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),s.lastRenderedState=d}return[d,o]}function C_(e,i,s){var o=wt,f=Ee(),d=Pt;if(d){if(s===void 0)throw Error(r(407));s=s()}else s=i();var y=!Vn(($t||f).memoizedState,s);if(y&&(f.memoizedState=s,Ne=!0),f=f.queue,Pd(M_.bind(null,o,f,e),[e]),f.getSnapshot!==i||y||xe!==null&&xe.memoizedState.tag&1){if(o.flags|=2048,el(9,{destroy:void 0},N_.bind(null,o,f,s,i),null),ee===null)throw Error(r(349));d||(Wi&127)!==0||x_(o,i,s)}return s}function x_(e,i,s){e.flags|=16384,e={getSnapshot:i,value:s},i=wt.updateQueue,i===null?(i=Jc(),wt.updateQueue=i,i.stores=[e]):(s=i.stores,s===null?i.stores=[e]:s.push(e))}function N_(e,i,s,o){i.value=s,i.getSnapshot=o,O_(i)&&P_(e)}function M_(e,i,s){return s(function(){O_(i)&&P_(e)})}function O_(e){var i=e.getSnapshot;e=e.value;try{var s=i();return!Vn(e,s)}catch{return!0}}function P_(e){var i=Us(e,2);i!==null&&An(i,e,2)}function Md(e){var i=hn();if(typeof e=="function"){var s=e;if(e=s(),Qs){Un(!0);try{s()}finally{Un(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:e},i}function z_(e,i,s,o){return e.baseState=s,xd(e,$t,typeof o=="function"?o:tr)}function hw(e,i,s,o,f){if(nh(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};Q.T!==null?s(!0):d.isTransition=!1,o(d),s=i.pending,s===null?(d.next=i.pending=d,U_(i,d)):(d.next=s.next,i.pending=s.next=d)}}function U_(e,i){var s=i.action,o=i.payload,f=e.state;if(i.isTransition){var d=Q.T,y={};Q.T=y;try{var E=s(f,o),V=Q.S;V!==null&&V(y,E),L_(e,i,E)}catch(q){Od(e,i,q)}finally{d!==null&&y.types!==null&&(d.types=y.types),Q.T=d}}else try{d=s(f,o),L_(e,i,d)}catch(q){Od(e,i,q)}}function L_(e,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){q_(e,i,o)},function(o){return Od(e,i,o)}):q_(e,i,s)}function q_(e,i,s){i.status="fulfilled",i.value=s,B_(i),e.state=s,i=e.pending,i!==null&&(s=i.next,s===i?e.pending=null:(s=s.next,i.next=s,U_(e,s)))}function Od(e,i,s){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=s,B_(i),i=i.next;while(i!==o)}e.action=null}function B_(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function k_(e,i){return i}function F_(e,i){if(Pt){var s=ee.formState;if(s!==null){t:{var o=wt;if(Pt){if(se){e:{for(var f=se,d=Qn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Yn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){se=Yn(f.nextSibling),o=f.data==="F!";break t}}xr(o)}o=!1}o&&(i=s[0])}}return s=hn(),s.memoizedState=s.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k_,lastRenderedState:i},s.queue=o,s=ly.bind(null,wt,o),o.dispatch=s,o=Md(!1),d=Bd.bind(null,wt,!1,o.queue),o=hn(),f={state:i,dispatch:null,action:e,pending:null},o.queue=f,s=hw.bind(null,wt,f,d,s),f.dispatch=s,o.memoizedState=e,[i,s,!1]}function j_(e){var i=Ee();return G_(i,$t,e)}function G_(e,i,s){if(i=xd(e,i,k_)[0],e=Wc(tr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=qo(i)}catch(y){throw y===Za?jc:y}else o=i;i=Ee();var f=i.queue,d=f.dispatch;return s!==i.memoizedState&&(wt.flags|=2048,el(9,{destroy:void 0},fw.bind(null,f,s),null)),[o,d,e]}function fw(e,i){e.action=i}function H_(e){var i=Ee(),s=$t;if(s!==null)return G_(i,s,e);Ee(),i=i.memoizedState,s=Ee();var o=s.queue.dispatch;return s.memoizedState=e,[i,o,!1]}function el(e,i,s,o){return e={tag:e,create:s,deps:o,inst:i,next:null},i=wt.updateQueue,i===null&&(i=Jc(),wt.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,i.lastEffect=e),e}function Q_(){return Ee().memoizedState}function th(e,i,s,o){var f=hn();wt.flags|=e,f.memoizedState=el(1|i,{destroy:void 0},s,o===void 0?null:o)}function eh(e,i,s,o){var f=Ee();o=o===void 0?null:o;var d=f.memoizedState.inst;$t!==null&&o!==null&&bd(o,$t.memoizedState.deps)?f.memoizedState=el(i,d,s,o):(wt.flags|=e,f.memoizedState=el(1|i,d,s,o))}function K_(e,i){th(8390656,8,e,i)}function Pd(e,i){eh(2048,8,e,i)}function dw(e){wt.flags|=4;var i=wt.updateQueue;if(i===null)i=Jc(),wt.updateQueue=i,i.events=[e];else{var s=i.events;s===null?i.events=[e]:s.push(e)}}function Y_(e){var i=Ee().memoizedState;return dw({ref:i,nextImpl:e}),function(){if((jt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function X_(e,i){return eh(4,2,e,i)}function Z_(e,i){return eh(4,4,e,i)}function J_(e,i){if(typeof i=="function"){e=e();var s=i(e);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function $_(e,i,s){s=s!=null?s.concat([e]):null,eh(4,4,J_.bind(null,i,e),s)}function zd(){}function W_(e,i){var s=Ee();i=i===void 0?null:i;var o=s.memoizedState;return i!==null&&bd(i,o[1])?o[0]:(s.memoizedState=[e,i],e)}function ty(e,i){var s=Ee();i=i===void 0?null:i;var o=s.memoizedState;if(i!==null&&bd(i,o[1]))return o[0];if(o=e(),Qs){Un(!0);try{e()}finally{Un(!1)}}return s.memoizedState=[o,i],o}function Ud(e,i,s){return s===void 0||(Wi&1073741824)!==0&&(Nt&261930)===0?e.memoizedState=i:(e.memoizedState=s,e=ev(),wt.lanes|=e,Br|=e,s)}function ey(e,i,s,o){return Vn(s,i)?s:$a.current!==null?(e=Ud(e,s,o),Vn(e,i)||(Ne=!0),e):(Wi&42)===0||(Wi&1073741824)!==0&&(Nt&261930)===0?(Ne=!0,e.memoizedState=s):(e=ev(),wt.lanes|=e,Br|=e,i)}function ny(e,i,s,o,f){var d=rt.p;rt.p=d!==0&&8>d?d:8;var y=Q.T,E={};Q.T=E,Bd(e,!1,i,s);try{var V=f(),q=Q.S;if(q!==null&&q(E,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var H=ow(V,o);Bo(e,i,H,On(e))}else Bo(e,i,o,On(e))}catch(Y){Bo(e,i,{then:function(){},status:"rejected",reason:Y},On())}finally{rt.p=d,y!==null&&E.types!==null&&(y.types=E.types),Q.T=y}}function mw(){}function Ld(e,i,s,o){if(e.tag!==5)throw Error(r(476));var f=iy(e).queue;ny(e,f,i,yt,s===null?mw:function(){return ry(e),s(o)})}function iy(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:yt},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:s},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function ry(e){var i=iy(e);i.next===null&&(i=e.alternate.memoizedState),Bo(e,i.next.queue,{},On())}function qd(){return Ze(iu)}function sy(){return Ee().memoizedState}function ay(){return Ee().memoizedState}function gw(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var s=On();e=Or(s);var o=Pr(i,e,s);o!==null&&(An(o,i,s),Po(o,i,s)),i={cache:md()},e.payload=i;return}i=i.return}}function pw(e,i,s){var o=On();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},nh(e)?oy(i,s):(s=id(e,i,s,o),s!==null&&(An(s,e,o),uy(s,i,o)))}function ly(e,i,s){var o=On();Bo(e,i,s,o)}function Bo(e,i,s,o){var f={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(nh(e))oy(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,E=d(y,s);if(f.hasEagerState=!0,f.eagerState=E,Vn(E,y))return zc(e,i,f,0),ee===null&&Pc(),!1}catch{}finally{}if(s=id(e,i,f,o),s!==null)return An(s,e,o),uy(s,i,o),!0}return!1}function Bd(e,i,s,o){if(o={lane:2,revertLane:ym(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},nh(e)){if(i)throw Error(r(479))}else i=id(e,s,o,2),i!==null&&An(i,e,2)}function nh(e){var i=e.alternate;return e===wt||i!==null&&i===wt}function oy(e,i){Wa=Xc=!0;var s=e.pending;s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i}function uy(e,i,s){if((s&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,s|=o,i.lanes=s,lo(e,s)}}var ko={readContext:Ze,use:$c,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge};ko.useEffectEvent=ge;var cy={readContext:Ze,use:$c,useCallback:function(e,i){return hn().memoizedState=[e,i===void 0?null:i],e},useContext:Ze,useEffect:K_,useImperativeHandle:function(e,i,s){s=s!=null?s.concat([e]):null,th(4194308,4,J_.bind(null,i,e),s)},useLayoutEffect:function(e,i){return th(4194308,4,e,i)},useInsertionEffect:function(e,i){th(4,2,e,i)},useMemo:function(e,i){var s=hn();i=i===void 0?null:i;var o=e();if(Qs){Un(!0);try{e()}finally{Un(!1)}}return s.memoizedState=[o,i],o},useReducer:function(e,i,s){var o=hn();if(s!==void 0){var f=s(i);if(Qs){Un(!0);try{s(i)}finally{Un(!1)}}}else f=i;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=pw.bind(null,wt,e),[o.memoizedState,e]},useRef:function(e){var i=hn();return e={current:e},i.memoizedState=e},useState:function(e){e=Md(e);var i=e.queue,s=ly.bind(null,wt,i);return i.dispatch=s,[e.memoizedState,s]},useDebugValue:zd,useDeferredValue:function(e,i){var s=hn();return Ud(s,e,i)},useTransition:function(){var e=Md(!1);return e=ny.bind(null,wt,e.queue,!0,!1),hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,s){var o=wt,f=hn();if(Pt){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),ee===null)throw Error(r(349));(Nt&127)!==0||x_(o,i,s)}f.memoizedState=s;var d={value:s,getSnapshot:i};return f.queue=d,K_(M_.bind(null,o,d,e),[e]),o.flags|=2048,el(9,{destroy:void 0},N_.bind(null,o,d,s,i),null),s},useId:function(){var e=hn(),i=ee.identifierPrefix;if(Pt){var s=Oi,o=Mi;s=(o&~(1<<32-ye(o)-1)).toString(32)+s,i="_"+i+"R_"+s,s=Zc++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=uw++,i="_"+i+"r_"+s.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:qd,useFormState:F_,useActionState:F_,useOptimistic:function(e){var i=hn();i.memoizedState=i.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=Bd.bind(null,wt,!0,s),s.dispatch=i,[e,i]},useMemoCache:Cd,useCacheRefresh:function(){return hn().memoizedState=gw.bind(null,wt)},useEffectEvent:function(e){var i=hn(),s={impl:e};return i.memoizedState=s,function(){if((jt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}},kd={readContext:Ze,use:$c,useCallback:W_,useContext:Ze,useEffect:Pd,useImperativeHandle:$_,useInsertionEffect:X_,useLayoutEffect:Z_,useMemo:ty,useReducer:Wc,useRef:Q_,useState:function(){return Wc(tr)},useDebugValue:zd,useDeferredValue:function(e,i){var s=Ee();return ey(s,$t.memoizedState,e,i)},useTransition:function(){var e=Wc(tr)[0],i=Ee().memoizedState;return[typeof e=="boolean"?e:qo(e),i]},useSyncExternalStore:C_,useId:sy,useHostTransitionStatus:qd,useFormState:j_,useActionState:j_,useOptimistic:function(e,i){var s=Ee();return z_(s,$t,e,i)},useMemoCache:Cd,useCacheRefresh:ay};kd.useEffectEvent=Y_;var hy={readContext:Ze,use:$c,useCallback:W_,useContext:Ze,useEffect:Pd,useImperativeHandle:$_,useInsertionEffect:X_,useLayoutEffect:Z_,useMemo:ty,useReducer:Nd,useRef:Q_,useState:function(){return Nd(tr)},useDebugValue:zd,useDeferredValue:function(e,i){var s=Ee();return $t===null?Ud(s,e,i):ey(s,$t.memoizedState,e,i)},useTransition:function(){var e=Nd(tr)[0],i=Ee().memoizedState;return[typeof e=="boolean"?e:qo(e),i]},useSyncExternalStore:C_,useId:sy,useHostTransitionStatus:qd,useFormState:H_,useActionState:H_,useOptimistic:function(e,i){var s=Ee();return $t!==null?z_(s,$t,e,i):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Cd,useCacheRefresh:ay};hy.useEffectEvent=Y_;function Fd(e,i,s,o){i=e.memoizedState,s=s(o,i),s=s==null?i:A({},i,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var jd={enqueueSetState:function(e,i,s){e=e._reactInternals;var o=On(),f=Or(o);f.payload=i,s!=null&&(f.callback=s),i=Pr(e,f,o),i!==null&&(An(i,e,o),Po(i,e,o))},enqueueReplaceState:function(e,i,s){e=e._reactInternals;var o=On(),f=Or(o);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=Pr(e,f,o),i!==null&&(An(i,e,o),Po(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var s=On(),o=Or(s);o.tag=2,i!=null&&(o.callback=i),i=Pr(e,o,s),i!==null&&(An(i,e,s),Po(i,e,s))}};function fy(e,i,s,o,f,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,y):i.prototype&&i.prototype.isPureReactComponent?!Ro(s,o)||!Ro(f,d):!0}function dy(e,i,s,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,o),i.state!==e&&jd.enqueueReplaceState(i,i.state,null)}function Ks(e,i){var s=i;if("ref"in i){s={};for(var o in i)o!=="ref"&&(s[o]=i[o])}if(e=e.defaultProps){s===i&&(s=A({},s));for(var f in e)s[f]===void 0&&(s[f]=e[f])}return s}function my(e){Oc(e)}function gy(e){console.error(e)}function py(e){Oc(e)}function ih(e,i){try{var s=e.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function _y(e,i,s){try{var o=e.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gd(e,i,s){return s=Or(s),s.tag=3,s.payload={element:null},s.callback=function(){ih(e,i)},s}function yy(e){return e=Or(e),e.tag=3,e}function vy(e,i,s,o){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var d=o.value;e.payload=function(){return f(d)},e.callback=function(){_y(i,s,o)}}var y=s.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){_y(i,s,o),typeof f!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function _w(e,i,s,o,f){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=s.alternate,i!==null&&Ka(i,s,f,!0),s=Cn.current,s!==null){switch(s.tag){case 31:case 13:return Kn===null?gh():s.alternate===null&&pe===0&&(pe=3),s.flags&=-257,s.flags|=65536,s.lanes=f,o===Gc?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([o]):i.add(o),gm(e,o,f)),!1;case 22:return s.flags|=65536,o===Gc?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([o]):s.add(o)),gm(e,o,f)),!1}throw Error(r(435,s.tag))}return gm(e,o,f),gh(),!1}if(Pt)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,o!==ud&&(e=Error(r(422),{cause:o}),Co(jn(e,s)))):(o!==ud&&(i=Error(r(423),{cause:o}),Co(jn(i,s))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=jn(o,s),f=Gd(e.stateNode,o,f),Td(e,f),pe!==4&&(pe=2)),!1;var d=Error(r(520),{cause:o});if(d=jn(d,s),Xo===null?Xo=[d]:Xo.push(d),pe!==4&&(pe=2),i===null)return!0;o=jn(o,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,e=f&-f,s.lanes|=e,e=Gd(s.stateNode,o,e),Td(s,e),!1;case 1:if(i=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(kr===null||!kr.has(d))))return s.flags|=65536,f&=-f,s.lanes|=f,f=yy(f),vy(f,e,s,o),Td(s,f),!1}s=s.return}while(s!==null);return!1}var Hd=Error(r(461)),Ne=!1;function Je(e,i,s,o){i.child=e===null?S_(i,null,s,o):Hs(i,e.child,s,o)}function Ty(e,i,s,o,f){s=s.render;var d=i.ref;if("ref"in o){var y={};for(var E in o)E!=="ref"&&(y[E]=o[E])}else y=o;return ks(i),o=Id(e,i,s,y,d,f),E=Rd(),e!==null&&!Ne?(Vd(e,i,f),er(e,i,f)):(Pt&&E&&ld(i),i.flags|=1,Je(e,i,o,f),i.child)}function Ey(e,i,s,o,f){if(e===null){var d=s.type;return typeof d=="function"&&!rd(d)&&d.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=d,Ay(e,i,d,o,f)):(e=Lc(s.type,null,o,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Wd(e,f)){var y=d.memoizedProps;if(s=s.compare,s=s!==null?s:Ro,s(y,o)&&e.ref===i.ref)return er(e,i,f)}return i.flags|=1,e=Xi(d,o),e.ref=i.ref,e.return=i,i.child=e}function Ay(e,i,s,o,f){if(e!==null){var d=e.memoizedProps;if(Ro(d,o)&&e.ref===i.ref)if(Ne=!1,i.pendingProps=o=d,Wd(e,f))(e.flags&131072)!==0&&(Ne=!0);else return i.lanes=e.lanes,er(e,i,f)}return Qd(e,i,s,o,f)}function Sy(e,i,s,o){var f=o.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,e!==null){for(o=i.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~d}else o=0,i.child=null;return wy(e,i,d,s,o)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Fc(i,d!==null?d.cachePool:null),d!==null?I_(i,d):Ad(),R_(i);else return o=i.lanes=536870912,wy(e,i,d!==null?d.baseLanes|s:s,s,o)}else d!==null?(Fc(i,d.cachePool),I_(i,d),Ur(),i.memoizedState=null):(e!==null&&Fc(i,null),Ad(),Ur());return Je(e,i,f,s),i.child}function Fo(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function wy(e,i,s,o,f){var d=pd();return d=d===null?null:{parent:Ce._currentValue,pool:d},i.memoizedState={baseLanes:s,cachePool:d},e!==null&&Fc(i,null),Ad(),R_(i),e!==null&&Ka(e,i,o,!0),i.childLanes=f,null}function rh(e,i){return i=ah({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function by(e,i,s){return Hs(i,e.child,null,s),e=rh(i,i.pendingProps),e.flags|=2,xn(i),i.memoizedState=null,e}function yw(e,i,s){var o=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Pt){if(o.mode==="hidden")return e=rh(i,o),i.lanes=536870912,Fo(null,e);if(wd(i),(e=se)?(e=Uv(e,Qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Dr!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},s=o_(e),s.return=i,i.child=s,Xe=i,se=null)):e=null,e===null)throw xr(i);return i.lanes=536870912,null}return rh(i,o)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(wd(i),f)if(i.flags&256)i.flags&=-257,i=by(e,i,s);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ne||Ka(e,i,s,!1),f=(s&e.childLanes)!==0,Ne||f){if(o=ee,o!==null&&(y=oo(o,s),y!==0&&y!==d.retryLane))throw d.retryLane=y,Us(e,y),An(o,e,y),Hd;gh(),i=by(e,i,s)}else e=d.treeContext,se=Yn(y.nextSibling),Xe=i,Pt=!0,Cr=null,Qn=!1,e!==null&&h_(i,e),i=rh(i,o),i.flags|=4096;return i}return e=Xi(e.child,{mode:o.mode,children:o.children}),e.ref=i.ref,i.child=e,e.return=i,e}function sh(e,i){var s=i.ref;if(s===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(e===null||e.ref!==s)&&(i.flags|=4194816)}}function Qd(e,i,s,o,f){return ks(i),s=Id(e,i,s,o,void 0,f),o=Rd(),e!==null&&!Ne?(Vd(e,i,f),er(e,i,f)):(Pt&&o&&ld(i),i.flags|=1,Je(e,i,s,f),i.child)}function Iy(e,i,s,o,f,d){return ks(i),i.updateQueue=null,s=D_(i,o,s,f),V_(e),o=Rd(),e!==null&&!Ne?(Vd(e,i,d),er(e,i,d)):(Pt&&o&&ld(i),i.flags|=1,Je(e,i,s,d),i.child)}function Ry(e,i,s,o,f){if(ks(i),i.stateNode===null){var d=ja,y=s.contextType;typeof y=="object"&&y!==null&&(d=Ze(y)),d=new s(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=jd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},yd(i),y=s.contextType,d.context=typeof y=="object"&&y!==null?Ze(y):ja,d.state=i.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Fd(i,s,y,o),d.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&jd.enqueueReplaceState(d,d.state,null),Uo(i,o,d,f),zo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,V=Ks(s,E);d.props=V;var q=d.context,H=s.contextType;y=ja,typeof H=="object"&&H!==null&&(y=Ze(H));var Y=s.getDerivedStateFromProps;H=typeof Y=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,H||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||q!==y)&&dy(i,d,o,y),Mr=!1;var k=i.memoizedState;d.state=k,Uo(i,o,d,f),zo(),q=i.memoizedState,E||k!==q||Mr?(typeof Y=="function"&&(Fd(i,s,Y,o),q=i.memoizedState),(V=Mr||fy(i,s,V,o,k,q,y))?(H||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=q),d.props=o,d.state=q,d.context=y,o=V):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,vd(e,i),y=i.memoizedProps,H=Ks(s,y),d.props=H,Y=i.pendingProps,k=d.context,q=s.contextType,V=ja,typeof q=="object"&&q!==null&&(V=Ze(q)),E=s.getDerivedStateFromProps,(q=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==Y||k!==V)&&dy(i,d,o,V),Mr=!1,k=i.memoizedState,d.state=k,Uo(i,o,d,f),zo();var G=i.memoizedState;y!==Y||k!==G||Mr||e!==null&&e.dependencies!==null&&Bc(e.dependencies)?(typeof E=="function"&&(Fd(i,s,E,o),G=i.memoizedState),(H=Mr||fy(i,s,H,o,k,G,V)||e!==null&&e.dependencies!==null&&Bc(e.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,G,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,G,V)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=G),d.props=o,d.state=G,d.context=V,o=H):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&k===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,sh(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=Hs(i,e.child,null,f),i.child=Hs(i,null,s,f)):Je(e,i,s,f),i.memoizedState=d.state,e=i.child):e=er(e,i,f),e}function Vy(e,i,s,o){return qs(),i.flags|=256,Je(e,i,s,o),i.child}var Kd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yd(e){return{baseLanes:e,cachePool:__()}}function Xd(e,i,s){return e=e!==null?e.childLanes&~s:0,i&&(e|=Mn),e}function Dy(e,i,s){var o=i.pendingProps,f=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(Te.current&2)!==0),y&&(f=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,e===null){if(Pt){if(f?zr(i):Ur(),(e=se)?(e=Uv(e,Qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Dr!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},s=o_(e),s.return=i,i.child=s,Xe=i,se=null)):e=null,e===null)throw xr(i);return xm(e)?i.lanes=32:i.lanes=536870912,null}var E=o.children;return o=o.fallback,f?(Ur(),f=i.mode,E=ah({mode:"hidden",children:E},f),o=Ls(o,f,s,null),E.return=i,o.return=i,E.sibling=o,i.child=E,o=i.child,o.memoizedState=Yd(s),o.childLanes=Xd(e,y,s),i.memoizedState=Kd,Fo(null,o)):(zr(i),Zd(i,E))}var V=e.memoizedState;if(V!==null&&(E=V.dehydrated,E!==null)){if(d)i.flags&256?(zr(i),i.flags&=-257,i=Jd(e,i,s)):i.memoizedState!==null?(Ur(),i.child=e.child,i.flags|=128,i=null):(Ur(),E=o.fallback,f=i.mode,o=ah({mode:"visible",children:o.children},f),E=Ls(E,f,s,null),E.flags|=2,o.return=i,E.return=i,o.sibling=E,i.child=o,Hs(i,e.child,null,s),o=i.child,o.memoizedState=Yd(s),o.childLanes=Xd(e,y,s),i.memoizedState=Kd,i=Fo(null,o));else if(zr(i),xm(E)){if(y=E.nextSibling&&E.nextSibling.dataset,y)var q=y.dgst;y=q,o=Error(r(419)),o.stack="",o.digest=y,Co({value:o,source:null,stack:null}),i=Jd(e,i,s)}else if(Ne||Ka(e,i,s,!1),y=(s&e.childLanes)!==0,Ne||y){if(y=ee,y!==null&&(o=oo(y,s),o!==0&&o!==V.retryLane))throw V.retryLane=o,Us(e,o),An(y,e,o),Hd;Cm(E)||gh(),i=Jd(e,i,s)}else Cm(E)?(i.flags|=192,i.child=e.child,i=null):(e=V.treeContext,se=Yn(E.nextSibling),Xe=i,Pt=!0,Cr=null,Qn=!1,e!==null&&h_(i,e),i=Zd(i,o.children),i.flags|=4096);return i}return f?(Ur(),E=o.fallback,f=i.mode,V=e.child,q=V.sibling,o=Xi(V,{mode:"hidden",children:o.children}),o.subtreeFlags=V.subtreeFlags&65011712,q!==null?E=Xi(q,E):(E=Ls(E,f,s,null),E.flags|=2),E.return=i,o.return=i,o.sibling=E,i.child=o,Fo(null,o),o=i.child,E=e.child.memoizedState,E===null?E=Yd(s):(f=E.cachePool,f!==null?(V=Ce._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=__(),E={baseLanes:E.baseLanes|s,cachePool:f}),o.memoizedState=E,o.childLanes=Xd(e,y,s),i.memoizedState=Kd,Fo(e.child,o)):(zr(i),s=e.child,e=s.sibling,s=Xi(s,{mode:"visible",children:o.children}),s.return=i,s.sibling=null,e!==null&&(y=i.deletions,y===null?(i.deletions=[e],i.flags|=16):y.push(e)),i.child=s,i.memoizedState=null,s)}function Zd(e,i){return i=ah({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function ah(e,i){return e=Dn(22,e,null,i),e.lanes=0,e}function Jd(e,i,s){return Hs(i,e.child,null,s),e=Zd(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Cy(e,i,s){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),fd(e.return,i,s)}function $d(e,i,s,o,f,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:f,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=s,y.tailMode=f,y.treeForkCount=d)}function xy(e,i,s){var o=i.pendingProps,f=o.revealOrder,d=o.tail;o=o.children;var y=Te.current,E=(y&2)!==0;if(E?(y=y&1|2,i.flags|=128):y&=1,st(Te,y),Je(e,i,o,s),o=Pt?Do:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cy(e,s,i);else if(e.tag===19)Cy(e,s,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(s=i.child,f=null;s!==null;)e=s.alternate,e!==null&&Yc(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),$d(i,!1,f,s,d,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Yc(e)===null){i.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}$d(i,!0,s,null,d,o);break;case"together":$d(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function er(e,i,s){if(e!==null&&(i.dependencies=e.dependencies),Br|=i.lanes,(s&i.childLanes)===0)if(e!==null){if(Ka(e,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,s=Xi(e,e.pendingProps),i.child=s,s.return=i;e.sibling!==null;)e=e.sibling,s=s.sibling=Xi(e,e.pendingProps),s.return=i;s.sibling=null}return i.child}function Wd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Bc(e)))}function vw(e,i,s){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),Nr(i,Ce,e.memoizedState.cache),qs();break;case 27:case 5:vs(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:Nr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,wd(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(zr(i),i.flags|=128,null):(s&i.child.childLanes)!==0?Dy(e,i,s):(zr(i),e=er(e,i,s),e!==null?e.sibling:null);zr(i);break;case 19:var f=(e.flags&128)!==0;if(o=(s&i.childLanes)!==0,o||(Ka(e,i,s,!1),o=(s&i.childLanes)!==0),f){if(o)return xy(e,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Te,Te.current),o)break;return null;case 22:return i.lanes=0,Sy(e,i,s,i.pendingProps);case 24:Nr(i,Ce,e.memoizedState.cache)}return er(e,i,s)}function Ny(e,i,s){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ne=!0;else{if(!Wd(e,s)&&(i.flags&128)===0)return Ne=!1,vw(e,i,s);Ne=(e.flags&131072)!==0}else Ne=!1,Pt&&(i.flags&1048576)!==0&&c_(i,Do,i.index);switch(i.lanes=0,i.tag){case 16:t:{var o=i.pendingProps;if(e=js(i.elementType),i.type=e,typeof e=="function")rd(e)?(o=Ks(e,o),i.tag=1,i=Ry(null,i,e,o,s)):(i.tag=0,i=Qd(null,i,e,o,s));else{if(e!=null){var f=e.$$typeof;if(f===Vt){i.tag=11,i=Ty(null,i,e,o,s);break t}else if(f===I){i.tag=14,i=Ey(null,i,e,o,s);break t}}throw i=oe(e)||e,Error(r(306,i,""))}}return i;case 0:return Qd(e,i,i.type,i.pendingProps,s);case 1:return o=i.type,f=Ks(o,i.pendingProps),Ry(e,i,o,f,s);case 3:t:{if(Le(i,i.stateNode.containerInfo),e===null)throw Error(r(387));o=i.pendingProps;var d=i.memoizedState;f=d.element,vd(e,i),Uo(i,o,null,s);var y=i.memoizedState;if(o=y.cache,Nr(i,Ce,o),o!==d.cache&&dd(i,[Ce],s,!0),zo(),o=y.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Vy(e,i,o,s);break t}else if(o!==f){f=jn(Error(r(424)),i),Co(f),i=Vy(e,i,o,s);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(se=Yn(e.firstChild),Xe=i,Pt=!0,Cr=null,Qn=!0,s=S_(i,null,o,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(qs(),o===f){i=er(e,i,s);break t}Je(e,i,o,s)}i=i.child}return i;case 26:return sh(e,i),e===null?(s=jv(i.type,null,i.pendingProps,null))?i.memoizedState=s:Pt||(s=i.type,e=i.pendingProps,o=Ah(It.current).createElement(s),o[Re]=i,o[Fe]=e,$e(o,s,e),Ve(o),i.stateNode=o):i.memoizedState=jv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return vs(i),e===null&&Pt&&(o=i.stateNode=Bv(i.type,i.pendingProps,It.current),Xe=i,Qn=!0,f=se,Hr(i.type)?(Nm=f,se=Yn(o.firstChild)):se=f),Je(e,i,i.pendingProps.children,s),sh(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Pt&&((f=o=se)&&(o=Xw(o,i.type,i.pendingProps,Qn),o!==null?(i.stateNode=o,Xe=i,se=Yn(o.firstChild),Qn=!1,f=!0):f=!1),f||xr(i)),vs(i),f=i.type,d=i.pendingProps,y=e!==null?e.memoizedProps:null,o=d.children,Rm(f,d)?o=null:y!==null&&Rm(f,y)&&(i.flags|=32),i.memoizedState!==null&&(f=Id(e,i,cw,null,null,s),iu._currentValue=f),sh(e,i),Je(e,i,o,s),i.child;case 6:return e===null&&Pt&&((e=s=se)&&(s=Zw(s,i.pendingProps,Qn),s!==null?(i.stateNode=s,Xe=i,se=null,e=!0):e=!1),e||xr(i)),null;case 13:return Dy(e,i,s);case 4:return Le(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Hs(i,null,o,s):Je(e,i,o,s),i.child;case 11:return Ty(e,i,i.type,i.pendingProps,s);case 7:return Je(e,i,i.pendingProps,s),i.child;case 8:return Je(e,i,i.pendingProps.children,s),i.child;case 12:return Je(e,i,i.pendingProps.children,s),i.child;case 10:return o=i.pendingProps,Nr(i,i.type,o.value),Je(e,i,o.children,s),i.child;case 9:return f=i.type._context,o=i.pendingProps.children,ks(i),f=Ze(f),o=o(f),i.flags|=1,Je(e,i,o,s),i.child;case 14:return Ey(e,i,i.type,i.pendingProps,s);case 15:return Ay(e,i,i.type,i.pendingProps,s);case 19:return xy(e,i,s);case 31:return yw(e,i,s);case 22:return Sy(e,i,s,i.pendingProps);case 24:return ks(i),o=Ze(Ce),e===null?(f=pd(),f===null&&(f=ee,d=md(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=s),f=d),i.memoizedState={parent:o,cache:f},yd(i),Nr(i,Ce,f)):((e.lanes&s)!==0&&(vd(e,i),Uo(i,null,null,s),zo()),f=e.memoizedState,d=i.memoizedState,f.parent!==o?(f={parent:o,cache:o},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Nr(i,Ce,o)):(o=d.cache,Nr(i,Ce,o),o!==f.cache&&dd(i,[Ce],s,!0))),Je(e,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function nr(e){e.flags|=4}function tm(e,i,s,o,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(sv())e.flags|=8192;else throw Gs=Gc,_d}else e.flags&=-16777217}function My(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yv(i))if(sv())e.flags|=8192;else throw Gs=Gc,_d}function lh(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?dc():536870912,e.lanes|=i,sl|=i)}function jo(e,i){if(!Pt)switch(e.tailMode){case"hidden":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ae(e){var i=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(i)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=s,i}function Tw(e,i,s){var o=i.pendingProps;switch(od(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ae(i),null;case 1:return ae(i),null;case 3:return s=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),$i(Ce),ue(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Qa(i)?nr(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cd())),ae(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(nr(i),d!==null?(ae(i),My(i,d)):(ae(i),tm(i,f,null,o,s))):d?d!==e.memoizedState?(nr(i),ae(i),My(i,d)):(ae(i),i.flags&=-16777217):(e=e.memoizedProps,e!==o&&nr(i),ae(i),tm(i,f,e,o,s)),null;case 27:if(wa(i),s=It.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&nr(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return ae(i),null}e=ot.current,Qa(i)?f_(i):(e=Bv(f,o,s),i.stateNode=e,nr(i))}return ae(i),null;case 5:if(wa(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&nr(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return ae(i),null}if(d=ot.current,Qa(i))f_(i);else{var y=Ah(It.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?y.createElement(f,{is:o.is}):y.createElement(f)}}d[Re]=i,d[Fe]=o;t:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break t;for(;y.sibling===null;){if(y.return===null||y.return===i)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;t:switch($e(d,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&nr(i)}}return ae(i),tm(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,s),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&nr(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(e=It.current,Qa(i)){if(e=i.stateNode,s=i.memoizedProps,o=null,f=Xe,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Re]=i,e=!!(e.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||Dv(e.nodeValue,s)),e||xr(i,!0)}else e=Ah(e).createTextNode(o),e[Re]=i,i.stateNode=e}return ae(i),null;case 31:if(s=i.memoizedState,e===null||e.memoizedState!==null){if(o=Qa(i),s!==null){if(e===null){if(!o)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Re]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ae(i),e=!1}else s=cd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return i.flags&256?(xn(i),i):(xn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ae(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Qa(i),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Re]=i}else qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ae(i),f=!1}else f=cd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(xn(i),i):(xn(i),null)}return xn(i),(i.flags&128)!==0?(i.lanes=s,i):(s=o!==null,e=e!==null&&e.memoizedState!==null,s&&(o=i.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==f&&(o.flags|=2048)),s!==e&&s&&(i.child.flags|=8192),lh(i,i.updateQueue),ae(i),null);case 4:return ue(),e===null&&Am(i.stateNode.containerInfo),ae(i),null;case 10:return $i(i.type),ae(i),null;case 19:if(X(Te),o=i.memoizedState,o===null)return ae(i),null;if(f=(i.flags&128)!==0,d=o.rendering,d===null)if(f)jo(o,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Yc(e),d!==null){for(i.flags|=128,jo(o,!1),e=d.updateQueue,i.updateQueue=e,lh(i,e),i.subtreeFlags=0,e=s,s=i.child;s!==null;)l_(s,e),s=s.sibling;return st(Te,Te.current&1|2),Pt&&Zi(i,o.treeForkCount),i.child}e=e.sibling}o.tail!==null&&un()>fh&&(i.flags|=128,f=!0,jo(o,!1),i.lanes=4194304)}else{if(!f)if(e=Yc(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,lh(i,e),jo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Pt)return ae(i),null}else 2*un()-o.renderingStartTime>fh&&s!==536870912&&(i.flags|=128,f=!0,jo(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(e=o.last,e!==null?e.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=un(),e.sibling=null,s=Te.current,st(Te,f?s&1|2:s&1),Pt&&Zi(i,o.treeForkCount),e):(ae(i),null);case 22:case 23:return xn(i),Sd(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(s&536870912)!==0&&(i.flags&128)===0&&(ae(i),i.subtreeFlags&6&&(i.flags|=8192)):ae(i),s=i.updateQueue,s!==null&&lh(i,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==s&&(i.flags|=2048),e!==null&&X(Fs),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),$i(Ce),ae(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Ew(e,i){switch(od(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return $i(Ce),ue(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return wa(i),null;case 31:if(i.memoizedState!==null){if(xn(i),i.alternate===null)throw Error(r(340));qs()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(xn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));qs()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return X(Te),null;case 4:return ue(),null;case 10:return $i(i.type),null;case 22:case 23:return xn(i),Sd(),e!==null&&X(Fs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return $i(Ce),null;case 25:return null;default:return null}}function Oy(e,i){switch(od(i),i.tag){case 3:$i(Ce),ue();break;case 26:case 27:case 5:wa(i);break;case 4:ue();break;case 31:i.memoizedState!==null&&xn(i);break;case 13:xn(i);break;case 19:X(Te);break;case 10:$i(i.type);break;case 22:case 23:xn(i),Sd(),e!==null&&X(Fs);break;case 24:$i(Ce)}}function Go(e,i){try{var s=i.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var f=o.next;s=f;do{if((s.tag&e)===e){o=void 0;var d=s.create,y=s.inst;o=d(),y.destroy=o}s=s.next}while(s!==f)}}catch(E){Yt(i,i.return,E)}}function Lr(e,i,s){try{var o=i.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var d=f.next;o=d;do{if((o.tag&e)===e){var y=o.inst,E=y.destroy;if(E!==void 0){y.destroy=void 0,f=i;var V=s,q=E;try{q()}catch(H){Yt(f,V,H)}}}o=o.next}while(o!==d)}}catch(H){Yt(i,i.return,H)}}function Py(e){var i=e.updateQueue;if(i!==null){var s=e.stateNode;try{b_(i,s)}catch(o){Yt(e,e.return,o)}}}function zy(e,i,s){s.props=Ks(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(o){Yt(e,i,o)}}function Ho(e,i){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof s=="function"?e.refCleanup=s(o):s.current=o}}catch(f){Yt(e,i,f)}}function Pi(e,i){var s=e.ref,o=e.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(f){Yt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Yt(e,i,f)}else s.current=null}function Uy(e){var i=e.type,s=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break t;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(f){Yt(e,e.return,f)}}function em(e,i,s){try{var o=e.stateNode;jw(o,e.type,s,i),o[Fe]=i}catch(f){Yt(e,e.return,f)}}function Ly(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hr(e.type)||e.tag===4}function nm(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function im(e,i,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(e),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=ni));else if(o!==4&&(o===27&&Hr(e.type)&&(s=e.stateNode,i=null),e=e.child,e!==null))for(im(e,i,s),e=e.sibling;e!==null;)im(e,i,s),e=e.sibling}function oh(e,i,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?s.insertBefore(e,i):s.appendChild(e);else if(o!==4&&(o===27&&Hr(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(oh(e,i,s),e=e.sibling;e!==null;)oh(e,i,s),e=e.sibling}function qy(e){var i=e.stateNode,s=e.memoizedProps;try{for(var o=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);$e(i,o,s),i[Re]=e,i[Fe]=s}catch(d){Yt(e,e.return,d)}}var ir=!1,Me=!1,rm=!1,By=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Aw(e,i){if(e=e.containerInfo,bm=Dh,e=$p(e),Jf(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var f=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break t}var y=0,E=-1,V=-1,q=0,H=0,Y=e,k=null;e:for(;;){for(var G;Y!==s||f!==0&&Y.nodeType!==3||(E=y+f),Y!==d||o!==0&&Y.nodeType!==3||(V=y+o),Y.nodeType===3&&(y+=Y.nodeValue.length),(G=Y.firstChild)!==null;)k=Y,Y=G;for(;;){if(Y===e)break e;if(k===s&&++q===f&&(E=y),k===d&&++H===o&&(V=y),(G=Y.nextSibling)!==null)break;Y=k,k=Y.parentNode}Y=G}s=E===-1||V===-1?null:{start:E,end:V}}else s=null}s=s||{start:0,end:0}}else s=null;for(Im={focusedElem:e,selectionRange:s},Dh=!1,Ge=i;Ge!==null;)if(i=Ge,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Ge=e;else for(;Ge!==null;){switch(i=Ge,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)f=e[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=i,f=d.memoizedProps,d=d.memoizedState,o=s.stateNode;try{var ut=Ks(s.type,f);e=o.getSnapshotBeforeUpdate(ut,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(vt){Yt(s,s.return,vt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,s=e.nodeType,s===9)Dm(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,Ge=e;break}Ge=i.return}}function ky(e,i,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:sr(e,s),o&4&&Go(5,s);break;case 1:if(sr(e,s),o&4)if(e=s.stateNode,i===null)try{e.componentDidMount()}catch(y){Yt(s,s.return,y)}else{var f=Ks(s.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Yt(s,s.return,y)}}o&64&&Py(s),o&512&&Ho(s,s.return);break;case 3:if(sr(e,s),o&64&&(e=s.updateQueue,e!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{b_(e,i)}catch(y){Yt(s,s.return,y)}}break;case 27:i===null&&o&4&&qy(s);case 26:case 5:sr(e,s),i===null&&o&4&&Uy(s),o&512&&Ho(s,s.return);break;case 12:sr(e,s);break;case 31:sr(e,s),o&4&&Gy(e,s);break;case 13:sr(e,s),o&4&&Hy(e,s),o&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=xw.bind(null,s),Jw(e,s))));break;case 22:if(o=s.memoizedState!==null||ir,!o){i=i!==null&&i.memoizedState!==null||Me,f=ir;var d=Me;ir=o,(Me=i)&&!d?ar(e,s,(s.subtreeFlags&8772)!==0):sr(e,s),ir=f,Me=d}break;case 30:break;default:sr(e,s)}}function Fy(e){var i=e.alternate;i!==null&&(e.alternate=null,Fy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Da(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var he=null,yn=!1;function rr(e,i,s){for(s=s.child;s!==null;)jy(e,i,s),s=s.sibling}function jy(e,i,s){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount($n,s)}catch{}switch(s.tag){case 26:Me||Pi(s,i),rr(e,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Me||Pi(s,i);var o=he,f=yn;Hr(s.type)&&(he=s.stateNode,yn=!1),rr(e,i,s),tu(s.stateNode),he=o,yn=f;break;case 5:Me||Pi(s,i);case 6:if(o=he,f=yn,he=null,rr(e,i,s),he=o,yn=f,he!==null)if(yn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(s.stateNode)}catch(d){Yt(s,i,d)}else try{he.removeChild(s.stateNode)}catch(d){Yt(s,i,d)}break;case 18:he!==null&&(yn?(e=he,Pv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),dl(e)):Pv(he,s.stateNode));break;case 4:o=he,f=yn,he=s.stateNode.containerInfo,yn=!0,rr(e,i,s),he=o,yn=f;break;case 0:case 11:case 14:case 15:Lr(2,s,i),Me||Lr(4,s,i),rr(e,i,s);break;case 1:Me||(Pi(s,i),o=s.stateNode,typeof o.componentWillUnmount=="function"&&zy(s,i,o)),rr(e,i,s);break;case 21:rr(e,i,s);break;case 22:Me=(o=Me)||s.memoizedState!==null,rr(e,i,s),Me=o;break;default:rr(e,i,s)}}function Gy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{dl(e)}catch(s){Yt(i,i.return,s)}}}function Hy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{dl(e)}catch(s){Yt(i,i.return,s)}}function Sw(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new By),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new By),i;default:throw Error(r(435,e.tag))}}function uh(e,i){var s=Sw(e);i.forEach(function(o){if(!s.has(o)){s.add(o);var f=Nw.bind(null,e,o);o.then(f,f)}})}function vn(e,i){var s=i.deletions;if(s!==null)for(var o=0;o<s.length;o++){var f=s[o],d=e,y=i,E=y;t:for(;E!==null;){switch(E.tag){case 27:if(Hr(E.type)){he=E.stateNode,yn=!1;break t}break;case 5:he=E.stateNode,yn=!1;break t;case 3:case 4:he=E.stateNode.containerInfo,yn=!0;break t}E=E.return}if(he===null)throw Error(r(160));jy(d,y,f),he=null,yn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Qy(i,e),i=i.sibling}var oi=null;function Qy(e,i){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vn(i,e),Tn(e),o&4&&(Lr(3,e,e.return),Go(3,e),Lr(5,e,e.return));break;case 1:vn(i,e),Tn(e),o&512&&(Me||s===null||Pi(s,s.return)),o&64&&ir&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var f=oi;if(vn(i,e),Tn(e),o&512&&(Me||s===null||Pi(s,s.return)),o&4){var d=s!==null?s.memoizedState:null;if(o=e.memoizedState,s===null)if(o===null)if(e.stateNode===null){t:{o=e.type,s=e.memoizedProps,f=f.ownerDocument||f;e:switch(o){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ei]||d[Re]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(o),f.head.insertBefore(d,f.querySelector("head > title"))),$e(d,o,s),d[Re]=e,Ve(d),o=d;break t;case"link":var y=Qv("link","href",f).get(o+(s.href||""));if(y){for(var E=0;E<y.length;E++)if(d=y[E],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){y.splice(E,1);break e}}d=f.createElement(o),$e(d,o,s),f.head.appendChild(d);break;case"meta":if(y=Qv("meta","content",f).get(o+(s.content||""))){for(E=0;E<y.length;E++)if(d=y[E],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){y.splice(E,1);break e}}d=f.createElement(o),$e(d,o,s),f.head.appendChild(d);break;default:throw Error(r(468,o))}d[Re]=e,Ve(d),o=d}e.stateNode=o}else Kv(f,e.type,e.stateNode);else e.stateNode=Hv(f,o,e.memoizedProps);else d!==o?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,o===null?Kv(f,e.type,e.stateNode):Hv(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&em(e,e.memoizedProps,s.memoizedProps)}break;case 27:vn(i,e),Tn(e),o&512&&(Me||s===null||Pi(s,s.return)),s!==null&&o&4&&em(e,e.memoizedProps,s.memoizedProps);break;case 5:if(vn(i,e),Tn(e),o&512&&(Me||s===null||Pi(s,s.return)),e.flags&32){f=e.stateNode;try{_n(f,"")}catch(ut){Yt(e,e.return,ut)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,em(e,f,s!==null?s.memoizedProps:f)),o&1024&&(rm=!0);break;case 6:if(vn(i,e),Tn(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,s=e.stateNode;try{s.nodeValue=o}catch(ut){Yt(e,e.return,ut)}}break;case 3:if(bh=null,f=oi,oi=Sh(i.containerInfo),vn(i,e),oi=f,Tn(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{dl(i.containerInfo)}catch(ut){Yt(e,e.return,ut)}rm&&(rm=!1,Ky(e));break;case 4:o=oi,oi=Sh(e.stateNode.containerInfo),vn(i,e),Tn(e),oi=o;break;case 12:vn(i,e),Tn(e);break;case 31:vn(i,e),Tn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,uh(e,o)));break;case 13:vn(i,e),Tn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(hh=un()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,uh(e,o)));break;case 22:f=e.memoizedState!==null;var V=s!==null&&s.memoizedState!==null,q=ir,H=Me;if(ir=q||f,Me=H||V,vn(i,e),Me=H,ir=q,Tn(e),o&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||V||ir||Me||Ys(e)),s=null,i=e;;){if(i.tag===5||i.tag===26){if(s===null){V=s=i;try{if(d=V.stateNode,f)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=V.stateNode;var Y=V.memoizedProps.style,k=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(ut){Yt(V,V.return,ut)}}}else if(i.tag===6){if(s===null){V=i;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(ut){Yt(V,V.return,ut)}}}else if(i.tag===18){if(s===null){V=i;try{var G=V.stateNode;f?zv(G,!0):zv(V.stateNode,!1)}catch(ut){Yt(V,V.return,ut)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,uh(e,s))));break;case 19:vn(i,e),Tn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,uh(e,o)));break;case 30:break;case 21:break;default:vn(i,e),Tn(e)}}function Tn(e){var i=e.flags;if(i&2){try{for(var s,o=e.return;o!==null;){if(Ly(o)){s=o;break}o=o.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var f=s.stateNode,d=nm(e);oh(e,d,f);break;case 5:var y=s.stateNode;s.flags&32&&(_n(y,""),s.flags&=-33);var E=nm(e);oh(e,E,y);break;case 3:case 4:var V=s.stateNode.containerInfo,q=nm(e);im(e,q,V);break;default:throw Error(r(161))}}catch(H){Yt(e,e.return,H)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ky(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ky(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function sr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ky(e,i.alternate,i),i=i.sibling}function Ys(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Lr(4,i,i.return),Ys(i);break;case 1:Pi(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&zy(i,i.return,s),Ys(i);break;case 27:tu(i.stateNode);case 26:case 5:Pi(i,i.return),Ys(i);break;case 22:i.memoizedState===null&&Ys(i);break;case 30:Ys(i);break;default:Ys(i)}e=e.sibling}}function ar(e,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,f=e,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:ar(f,d,s),Go(4,d);break;case 1:if(ar(f,d,s),o=d,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Yt(o,o.return,q)}if(o=d,f=o.updateQueue,f!==null){var E=o.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)w_(V[f],E)}catch(q){Yt(o,o.return,q)}}s&&y&64&&Py(d),Ho(d,d.return);break;case 27:qy(d);case 26:case 5:ar(f,d,s),s&&o===null&&y&4&&Uy(d),Ho(d,d.return);break;case 12:ar(f,d,s);break;case 31:ar(f,d,s),s&&y&4&&Gy(f,d);break;case 13:ar(f,d,s),s&&y&4&&Hy(f,d);break;case 22:d.memoizedState===null&&ar(f,d,s),Ho(d,d.return);break;case 30:break;default:ar(f,d,s)}i=i.sibling}}function sm(e,i){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&xo(s))}function am(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&xo(e))}function ui(e,i,s,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yy(e,i,s,o),i=i.sibling}function Yy(e,i,s,o){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ui(e,i,s,o),f&2048&&Go(9,i);break;case 1:ui(e,i,s,o);break;case 3:ui(e,i,s,o),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&xo(e)));break;case 12:if(f&2048){ui(e,i,s,o),e=i.stateNode;try{var d=i.memoizedProps,y=d.id,E=d.onPostCommit;typeof E=="function"&&E(y,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(V){Yt(i,i.return,V)}}else ui(e,i,s,o);break;case 31:ui(e,i,s,o);break;case 13:ui(e,i,s,o);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?ui(e,i,s,o):Qo(e,i):d._visibility&2?ui(e,i,s,o):(d._visibility|=2,nl(e,i,s,o,(i.subtreeFlags&10256)!==0||!1)),f&2048&&sm(y,i);break;case 24:ui(e,i,s,o),f&2048&&am(i.alternate,i);break;default:ui(e,i,s,o)}}function nl(e,i,s,o,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,y=i,E=s,V=o,q=y.flags;switch(y.tag){case 0:case 11:case 15:nl(d,y,E,V,f),Go(8,y);break;case 23:break;case 22:var H=y.stateNode;y.memoizedState!==null?H._visibility&2?nl(d,y,E,V,f):Qo(d,y):(H._visibility|=2,nl(d,y,E,V,f)),f&&q&2048&&sm(y.alternate,y);break;case 24:nl(d,y,E,V,f),f&&q&2048&&am(y.alternate,y);break;default:nl(d,y,E,V,f)}i=i.sibling}}function Qo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=e,o=i,f=o.flags;switch(o.tag){case 22:Qo(s,o),f&2048&&sm(o.alternate,o);break;case 24:Qo(s,o),f&2048&&am(o.alternate,o);break;default:Qo(s,o)}i=i.sibling}}var Ko=8192;function il(e,i,s){if(e.subtreeFlags&Ko)for(e=e.child;e!==null;)Xy(e,i,s),e=e.sibling}function Xy(e,i,s){switch(e.tag){case 26:il(e,i,s),e.flags&Ko&&e.memoizedState!==null&&ub(s,oi,e.memoizedState,e.memoizedProps);break;case 5:il(e,i,s);break;case 3:case 4:var o=oi;oi=Sh(e.stateNode.containerInfo),il(e,i,s),oi=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ko,Ko=16777216,il(e,i,s),Ko=o):il(e,i,s));break;default:il(e,i,s)}}function Zy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Yo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var o=i[s];Ge=o,$y(o,e)}Zy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jy(e),e=e.sibling}function Jy(e){switch(e.tag){case 0:case 11:case 15:Yo(e),e.flags&2048&&Lr(9,e,e.return);break;case 3:Yo(e);break;case 12:Yo(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,ch(e)):Yo(e);break;default:Yo(e)}}function ch(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var o=i[s];Ge=o,$y(o,e)}Zy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Lr(8,i,i.return),ch(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,ch(i));break;default:ch(i)}e=e.sibling}}function $y(e,i){for(;Ge!==null;){var s=Ge;switch(s.tag){case 0:case 11:case 15:Lr(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:xo(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,Ge=o;else t:for(s=e;Ge!==null;){o=Ge;var f=o.sibling,d=o.return;if(Fy(o),o===s){Ge=null;break t}if(f!==null){f.return=d,Ge=f;break t}Ge=d}}}var ww={getCacheForType:function(e){var i=Ze(Ce),s=i.data.get(e);return s===void 0&&(s=e(),i.data.set(e,s)),s},cacheSignal:function(){return Ze(Ce).controller.signal}},bw=typeof WeakMap=="function"?WeakMap:Map,jt=0,ee=null,Dt=null,Nt=0,Kt=0,Nn=null,qr=!1,rl=!1,lm=!1,lr=0,pe=0,Br=0,Xs=0,om=0,Mn=0,sl=0,Xo=null,En=null,um=!1,hh=0,Wy=0,fh=1/0,dh=null,kr=null,Be=0,Fr=null,al=null,or=0,cm=0,hm=null,tv=null,Zo=0,fm=null;function On(){return(jt&2)!==0&&Nt!==0?Nt&-Nt:Q.T!==null?ym():mc()}function ev(){if(Mn===0)if((Nt&536870912)===0||Pt){var e=As;As<<=1,(As&3932160)===0&&(As=262144),Mn=e}else Mn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Mn}function An(e,i,s){(e===ee&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)&&(ll(e,0),jr(e,Nt,Mn,!1)),Ss(e,s),((jt&2)===0||e!==ee)&&(e===ee&&((jt&2)===0&&(Xs|=s),pe===4&&jr(e,Nt,Mn,!1)),zi(e))}function nv(e,i,s){if((jt&6)!==0)throw Error(r(327));var o=!s&&(i&127)===0&&(i&e.expiredLanes)===0||Wn(e,i),f=o?Vw(e,i):mm(e,i,!0),d=o;do{if(f===0){rl&&!o&&jr(e,i,0,!1);break}else{if(s=e.current.alternate,d&&!Iw(s)){f=mm(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;t:{var E=e;f=Xo;var V=E.current.memoizedState.isDehydrated;if(V&&(ll(E,y).flags|=256),y=mm(E,y,!1),y!==2){if(lm&&!V){E.errorRecoveryDisabledLanes|=d,Xs|=d,f=4;break t}d=En,En=f,d!==null&&(En===null?En=d:En.push.apply(En,d))}f=y}if(d=!1,f!==2)continue}}if(f===1){ll(e,0),jr(e,i,0,!0);break}t:{switch(o=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:jr(o,i,Mn,!qr);break t;case 2:En=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=hh+300-un(),10<f)){if(jr(o,i,Mn,!qr),yi(o,0,!0)!==0)break t;or=i,o.timeoutHandle=Mv(iv.bind(null,o,s,En,dh,um,i,Mn,Xs,sl,qr,d,"Throttled",-0,0),f);break t}iv(o,s,En,dh,um,i,Mn,Xs,sl,qr,d,null,-0,0)}}break}while(!0);zi(e)}function iv(e,i,s,o,f,d,y,E,V,q,H,Y,k,G){if(e.timeoutHandle=-1,Y=i.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},Xy(i,d,Y);var ut=(d&62914560)===d?hh-un():(d&4194048)===d?Wy-un():0;if(ut=cb(Y,ut),ut!==null){or=d,e.cancelPendingCommit=ut(hv.bind(null,e,i,d,s,o,f,y,E,V,H,Y,null,k,G)),jr(e,d,y,!q);return}}hv(e,i,d,s,o,f,y,E,V)}function Iw(e){for(var i=e;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var f=s[o],d=f.getSnapshot;f=f.value;try{if(!Vn(d(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function jr(e,i,s,o){i&=~om,i&=~Xs,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var f=i;0<f;){var d=31-ye(f),y=1<<d;o[d]=-1,f&=~y}s!==0&&ws(e,s,i)}function mh(){return(jt&6)===0?(Jo(0),!1):!0}function dm(){if(Dt!==null){if(Kt===0)var e=Dt.return;else e=Dt,Ji=Bs=null,Dd(e),Ja=null,Mo=0,e=Dt;for(;e!==null;)Oy(e.alternate,e),e=e.return;Dt=null}}function ll(e,i){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Qw(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),or=0,dm(),ee=e,Dt=s=Xi(e.current,null),Nt=i,Kt=0,Nn=null,qr=!1,rl=Wn(e,i),lm=!1,sl=Mn=om=Xs=Br=pe=0,En=Xo=null,um=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var f=31-ye(o),d=1<<f;i|=e[f],o&=~d}return lr=i,Pc(),s}function rv(e,i){wt=null,Q.H=ko,i===Za||i===jc?(i=T_(),Kt=3):i===_d?(i=T_(),Kt=4):Kt=i===Hd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Dt===null&&(pe=1,ih(e,jn(i,e.current)))}function sv(){var e=Cn.current;return e===null?!0:(Nt&4194048)===Nt?Kn===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?e===Kn:!1}function av(){var e=Q.H;return Q.H=ko,e===null?ko:e}function lv(){var e=Q.A;return Q.A=ww,e}function gh(){pe=4,qr||(Nt&4194048)!==Nt&&Cn.current!==null||(rl=!0),(Br&134217727)===0&&(Xs&134217727)===0||ee===null||jr(ee,Nt,Mn,!1)}function mm(e,i,s){var o=jt;jt|=2;var f=av(),d=lv();(ee!==e||Nt!==i)&&(dh=null,ll(e,i)),i=!1;var y=pe;t:do try{if(Kt!==0&&Dt!==null){var E=Dt,V=Nn;switch(Kt){case 8:dm(),y=6;break t;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var q=Kt;if(Kt=0,Nn=null,ol(e,E,V,q),s&&rl){y=0;break t}break;default:q=Kt,Kt=0,Nn=null,ol(e,E,V,q)}}Rw(),y=pe;break}catch(H){rv(e,H)}while(!0);return i&&e.shellSuspendCounter++,Ji=Bs=null,jt=o,Q.H=f,Q.A=d,Dt===null&&(ee=null,Nt=0,Pc()),y}function Rw(){for(;Dt!==null;)ov(Dt)}function Vw(e,i){var s=jt;jt|=2;var o=av(),f=lv();ee!==e||Nt!==i?(dh=null,fh=un()+500,ll(e,i)):rl=Wn(e,i);t:do try{if(Kt!==0&&Dt!==null){i=Dt;var d=Nn;e:switch(Kt){case 1:Kt=0,Nn=null,ol(e,i,d,1);break;case 2:case 9:if(y_(d)){Kt=0,Nn=null,uv(i);break}i=function(){Kt!==2&&Kt!==9||ee!==e||(Kt=7),zi(e)},d.then(i,i);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:y_(d)?(Kt=0,Nn=null,uv(i)):(Kt=0,Nn=null,ol(e,i,d,7));break;case 5:var y=null;switch(Dt.tag){case 26:y=Dt.memoizedState;case 5:case 27:var E=Dt;if(y?Yv(y):E.stateNode.complete){Kt=0,Nn=null;var V=E.sibling;if(V!==null)Dt=V;else{var q=E.return;q!==null?(Dt=q,ph(q)):Dt=null}break e}}Kt=0,Nn=null,ol(e,i,d,5);break;case 6:Kt=0,Nn=null,ol(e,i,d,6);break;case 8:dm(),pe=6;break t;default:throw Error(r(462))}}Dw();break}catch(H){rv(e,H)}while(!0);return Ji=Bs=null,Q.H=o,Q.A=f,jt=s,Dt!==null?0:(ee=null,Nt=0,Pc(),pe)}function Dw(){for(;Dt!==null&&!Gf();)ov(Dt)}function ov(e){var i=Ny(e.alternate,e,lr);e.memoizedProps=e.pendingProps,i===null?ph(e):Dt=i}function uv(e){var i=e,s=i.alternate;switch(i.tag){case 15:case 0:i=Iy(s,i,i.pendingProps,i.type,void 0,Nt);break;case 11:i=Iy(s,i,i.pendingProps,i.type.render,i.ref,Nt);break;case 5:Dd(i);default:Oy(s,i),i=Dt=l_(i,lr),i=Ny(s,i,lr)}e.memoizedProps=e.pendingProps,i===null?ph(e):Dt=i}function ol(e,i,s,o){Ji=Bs=null,Dd(i),Ja=null,Mo=0;var f=i.return;try{if(_w(e,f,i,s,Nt)){pe=1,ih(e,jn(s,e.current)),Dt=null;return}}catch(d){if(f!==null)throw Dt=f,d;pe=1,ih(e,jn(s,e.current)),Dt=null;return}i.flags&32768?(Pt||o===1?e=!0:rl||(Nt&536870912)!==0?e=!1:(qr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),cv(i,e)):ph(i)}function ph(e){var i=e;do{if((i.flags&32768)!==0){cv(i,qr);return}e=i.return;var s=Tw(i.alternate,i,lr);if(s!==null){Dt=s;return}if(i=i.sibling,i!==null){Dt=i;return}Dt=i=e}while(i!==null);pe===0&&(pe=5)}function cv(e,i){do{var s=Ew(e.alternate,e);if(s!==null){s.flags&=32767,Dt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=s}while(e!==null);pe=6,Dt=null}function hv(e,i,s,o,f,d,y,E,V){e.cancelPendingCommit=null;do _h();while(Be!==0);if((jt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=nd,Kf(e,s,d,y,E,V),e===ee&&(Dt=ee=null,Nt=0),al=i,Fr=e,or=s,cm=d,hm=f,tv=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Mw(vr,function(){return pv(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null,f=rt.p,rt.p=2,y=jt,jt|=4;try{Aw(e,i,s)}finally{jt=y,rt.p=f,Q.T=o}}Be=1,fv(),dv(),mv()}}function fv(){if(Be===1){Be=0;var e=Fr,i=al,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=Q.T,Q.T=null;var o=rt.p;rt.p=2;var f=jt;jt|=4;try{Qy(i,e);var d=Im,y=$p(e.containerInfo),E=d.focusedElem,V=d.selectionRange;if(y!==E&&E&&E.ownerDocument&&Jp(E.ownerDocument.documentElement,E)){if(V!==null&&Jf(E)){var q=V.start,H=V.end;if(H===void 0&&(H=q),"selectionStart"in E)E.selectionStart=q,E.selectionEnd=Math.min(H,E.value.length);else{var Y=E.ownerDocument||document,k=Y&&Y.defaultView||window;if(k.getSelection){var G=k.getSelection(),ut=E.textContent.length,vt=Math.min(V.start,ut),te=V.end===void 0?vt:Math.min(V.end,ut);!G.extend&&vt>te&&(y=te,te=vt,vt=y);var O=Zp(E,vt),C=Zp(E,te);if(O&&C&&(G.rangeCount!==1||G.anchorNode!==O.node||G.anchorOffset!==O.offset||G.focusNode!==C.node||G.focusOffset!==C.offset)){var L=Y.createRange();L.setStart(O.node,O.offset),G.removeAllRanges(),vt>te?(G.addRange(L),G.extend(C.node,C.offset)):(L.setEnd(C.node,C.offset),G.addRange(L))}}}}for(Y=[],G=E;G=G.parentNode;)G.nodeType===1&&Y.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var K=Y[E];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Dh=!!bm,Im=bm=null}finally{jt=f,rt.p=o,Q.T=s}}e.current=i,Be=2}}function dv(){if(Be===2){Be=0;var e=Fr,i=al,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=Q.T,Q.T=null;var o=rt.p;rt.p=2;var f=jt;jt|=4;try{ky(e,i.alternate,i)}finally{jt=f,rt.p=o,Q.T=s}}Be=3}}function mv(){if(Be===4||Be===3){Be=0,lc();var e=Fr,i=al,s=or,o=tv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Be=5:(Be=0,al=Fr=null,gv(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(kr=null),Hi(s),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot($n,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=Q.T,f=rt.p,rt.p=2,Q.T=null;try{for(var d=e.onRecoverableError,y=0;y<o.length;y++){var E=o[y];d(E.value,{componentStack:E.stack})}}finally{Q.T=i,rt.p=f}}(or&3)!==0&&_h(),zi(e),f=e.pendingLanes,(s&261930)!==0&&(f&42)!==0?e===fm?Zo++:(Zo=0,fm=e):Zo=0,Jo(0)}}function gv(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,xo(i)))}function _h(){return fv(),dv(),mv(),pv()}function pv(){if(Be!==5)return!1;var e=Fr,i=cm;cm=0;var s=Hi(or),o=Q.T,f=rt.p;try{rt.p=32>s?32:s,Q.T=null,s=hm,hm=null;var d=Fr,y=or;if(Be=0,al=Fr=null,or=0,(jt&6)!==0)throw Error(r(331));var E=jt;if(jt|=4,Jy(d.current),Yy(d,d.current,y,s),jt=E,Jo(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot($n,d)}catch{}return!0}finally{rt.p=f,Q.T=o,gv(e,i)}}function _v(e,i,s){i=jn(s,i),i=Gd(e.stateNode,i,2),e=Pr(e,i,2),e!==null&&(Ss(e,2),zi(e))}function Yt(e,i,s){if(e.tag===3)_v(e,e,s);else for(;i!==null;){if(i.tag===3){_v(i,e,s);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(kr===null||!kr.has(o))){e=jn(s,e),s=yy(2),o=Pr(i,s,2),o!==null&&(vy(s,o,i,e),Ss(o,2),zi(o));break}}i=i.return}}function gm(e,i,s){var o=e.pingCache;if(o===null){o=e.pingCache=new bw;var f=new Set;o.set(i,f)}else f=o.get(i),f===void 0&&(f=new Set,o.set(i,f));f.has(s)||(lm=!0,f.add(s),e=Cw.bind(null,e,i,s),i.then(e,e))}function Cw(e,i,s){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,ee===e&&(Nt&s)===s&&(pe===4||pe===3&&(Nt&62914560)===Nt&&300>un()-hh?(jt&2)===0&&ll(e,0):om|=s,sl===Nt&&(sl=0)),zi(e)}function yv(e,i){i===0&&(i=dc()),e=Us(e,i),e!==null&&(Ss(e,i),zi(e))}function xw(e){var i=e.memoizedState,s=0;i!==null&&(s=i.retryLane),yv(e,s)}function Nw(e,i){var s=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),yv(e,s)}function Mw(e,i){return qe(e,i)}var yh=null,ul=null,pm=!1,vh=!1,_m=!1,Gr=0;function zi(e){e!==ul&&e.next===null&&(ul===null?yh=ul=e:ul=ul.next=e),vh=!0,pm||(pm=!0,Pw())}function Jo(e,i){if(!_m&&vh){_m=!0;do for(var s=!1,o=yh;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var d=0;else{var y=o.suspendedLanes,E=o.pingedLanes;d=(1<<31-ye(42|e)+1)-1,d&=f&~(y&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Av(o,d))}else d=Nt,d=yi(o,o===ee?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Wn(o,d)||(s=!0,Av(o,d));o=o.next}while(s);_m=!1}}function Ow(){vv()}function vv(){vh=pm=!1;var e=0;Gr!==0&&Hw()&&(e=Gr);for(var i=un(),s=null,o=yh;o!==null;){var f=o.next,d=Tv(o,i);d===0?(o.next=null,s===null?yh=f:s.next=f,f===null&&(ul=s)):(s=o,(e!==0||(d&3)!==0)&&(vh=!0)),o=f}Be!==0&&Be!==5||Jo(e),Gr!==0&&(Gr=0)}function Tv(e,i){for(var s=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-ye(d),E=1<<y,V=f[y];V===-1?((E&s)===0||(E&o)!==0)&&(f[y]=Qf(E,i)):V<=i&&(e.expiredLanes|=E),d&=~E}if(i=ee,s=Nt,s=yi(e,e===i?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,s===0||e===i&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&yr(o),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Wn(e,s)){if(i=s&-s,i===e.callbackPriority)return i;switch(o!==null&&yr(o),Hi(s)){case 2:case 8:s=ao;break;case 32:s=vr;break;case 268435456:s=oc;break;default:s=vr}return o=Ev.bind(null,e),s=qe(s,o),e.callbackPriority=i,e.callbackNode=s,i}return o!==null&&o!==null&&yr(o),e.callbackPriority=2,e.callbackNode=null,2}function Ev(e,i){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(_h()&&e.callbackNode!==s)return null;var o=Nt;return o=yi(e,e===ee?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(nv(e,o,i),Tv(e,un()),e.callbackNode!=null&&e.callbackNode===s?Ev.bind(null,e):null)}function Av(e,i){if(_h())return null;nv(e,i,!0)}function Pw(){Kw(function(){(jt&6)!==0?qe(so,Ow):vv()})}function ym(){if(Gr===0){var e=Ya;e===0&&(e=pi,pi<<=1,(pi&261888)===0&&(pi=256)),Gr=e}return Gr}function Sv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ma(""+e)}function wv(e,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,e.id&&s.setAttribute("form",e.id),i.parentNode.insertBefore(s,i),e=new FormData(e),s.parentNode.removeChild(s),e}function zw(e,i,s,o,f){if(i==="submit"&&s&&s.stateNode===f){var d=Sv((f[Fe]||null).action),y=o.submitter;y&&(i=(i=y[Fe]||null)?Sv(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var E=new Di("action","action",null,o,f);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Gr!==0){var V=y?wv(f,y):new FormData(f);Ld(s,{pending:!0,data:V,method:f.method,action:d},null,V)}}else typeof d=="function"&&(E.preventDefault(),V=y?wv(f,y):new FormData(f),Ld(s,{pending:!0,data:V,method:f.method,action:d},d,V))},currentTarget:f}]})}}for(var vm=0;vm<ed.length;vm++){var Tm=ed[vm],Uw=Tm.toLowerCase(),Lw=Tm[0].toUpperCase()+Tm.slice(1);li(Uw,"on"+Lw)}li(e_,"onAnimationEnd"),li(n_,"onAnimationIteration"),li(i_,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(tw,"onTransitionRun"),li(ew,"onTransitionStart"),li(nw,"onTransitionCancel"),li(r_,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function bv(e,i){i=(i&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],f=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var y=o.length-1;0<=y;y--){var E=o[y],V=E.instance,q=E.currentTarget;if(E=E.listener,V!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=q;try{d(f)}catch(H){Oc(H)}f.currentTarget=null,d=V}else for(y=0;y<o.length;y++){if(E=o[y],V=E.instance,q=E.currentTarget,E=E.listener,V!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=q;try{d(f)}catch(H){Oc(H)}f.currentTarget=null,d=V}}}}function Ct(e,i){var s=i[Va];s===void 0&&(s=i[Va]=new Set);var o=e+"__bubble";s.has(o)||(Iv(i,e,2,!1),s.add(o))}function Em(e,i,s){var o=0;i&&(o|=4),Iv(s,e,o,i)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Am(e){if(!e[Th]){e[Th]=!0,uo.forEach(function(s){s!=="selectionchange"&&(qw.has(s)||Em(s,!1,e),Em(s,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Th]||(i[Th]=!0,Em("selectionchange",!1,i))}}function Iv(e,i,s,o){switch(eT(i)){case 2:var f=db;break;case 8:f=mb;break;default:f=Um}s=f.bind(null,i,s,e),f=void 0,!Ds||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(i,s,{capture:!0,passive:f}):e.addEventListener(i,s,!0):f!==void 0?e.addEventListener(i,s,{passive:f}):e.addEventListener(i,s,!1)}function Sm(e,i,s,o,f){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var E=o.stateNode.containerInfo;if(E===f)break;if(y===4)for(y=o.return;y!==null;){var V=y.tag;if((V===3||V===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;E!==null;){if(y=Ai(E),y===null)return;if(V=y.tag,V===5||V===6||V===26||V===27){o=d=y;continue t}E=E.parentNode}}o=o.return}br(function(){var q=d,H=qn(s),Y=[];t:{var k=s_.get(e);if(k!==void 0){var G=Di,ut=e;switch(e){case"keypress":if(xs(s)===0)break t;case"keydown":case"keyup":G=xc;break;case"focusin":ut="focus",G=Ms;break;case"focusout":ut="blur",G=Ms;break;case"beforeblur":case"afterblur":G=Ms;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=So;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=p;break;case e_:case n_:case i_:G=wc;break;case r_:G=S;break;case"scroll":case"scrollend":G=Ao;break;case"wheel":G=j;break;case"copy":case"cut":case"paste":G=bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Yi;break;case"toggle":case"beforetoggle":G=St}var vt=(i&4)!==0,te=!vt&&(e==="scroll"||e==="scrollend"),O=vt?k!==null?k+"Capture":null:k;vt=[];for(var C=q,L;C!==null;){var K=C;if(L=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||L===null||O===null||(K=ii(C,O),K!=null&&vt.push(Wo(C,K,L))),te)break;C=C.return}0<vt.length&&(k=new G(k,ut,null,s,H),Y.push({event:k,listeners:vt}))}}if((i&7)===0){t:{if(k=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",k&&s!==vo&&(ut=s.relatedTarget||s.fromElement)&&(Ai(ut)||ut[Ti]))break t;if((G||k)&&(k=H.window===H?H:(k=H.ownerDocument)?k.defaultView||k.parentWindow:window,G?(ut=s.relatedTarget||s.toElement,G=q,ut=ut?Ai(ut):null,ut!==null&&(te=u(ut),vt=ut.tag,ut!==te||vt!==5&&vt!==27&&vt!==6)&&(ut=null)):(G=null,ut=q),G!==ut)){if(vt=So,K="onMouseLeave",O="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(vt=Yi,K="onPointerLeave",O="onPointerEnter",C="pointer"),te=G==null?k:In(G),L=ut==null?k:In(ut),k=new vt(K,C+"leave",G,s,H),k.target=te,k.relatedTarget=L,K=null,Ai(H)===q&&(vt=new vt(O,C+"enter",ut,s,H),vt.target=L,vt.relatedTarget=te,K=vt),te=K,G&&ut)e:{for(vt=Bw,O=G,C=ut,L=0,K=O;K;K=vt(K))L++;K=0;for(var pt=C;pt;pt=vt(pt))K++;for(;0<L-K;)O=vt(O),L--;for(;0<K-L;)C=vt(C),K--;for(;L--;){if(O===C||C!==null&&O===C.alternate){vt=O;break e}O=vt(O),C=vt(C)}vt=null}else vt=null;G!==null&&Rv(Y,k,G,vt,!1),ut!==null&&te!==null&&Rv(Y,te,ut,vt,!0)}}t:{if(k=q?In(q):window,G=k.nodeName&&k.nodeName.toLowerCase(),G==="select"||G==="input"&&k.type==="file")var qt=Gp;else if(Fp(k))if(Hp)qt=JS;else{qt=XS;var dt=YS}else G=k.nodeName,!G||G.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?q&&Na(q.elementType)&&(qt=Gp):qt=ZS;if(qt&&(qt=qt(e,q))){jp(Y,qt,s,H);break t}dt&&dt(e,k,q),e==="focusout"&&q&&k.type==="number"&&q.memoizedProps.value!=null&&po(k,"number",k.value)}switch(dt=q?In(q):window,e){case"focusin":(Fp(dt)||dt.contentEditable==="true")&&(Ba=dt,$f=q,Vo=null);break;case"focusout":Vo=$f=Ba=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,Wp(Y,s,H);break;case"selectionchange":if(WS)break;case"keydown":case"keyup":Wp(Y,s,H)}var Rt;if(Ft)t:{switch(e){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else qa?Os(e,s)&&(Mt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Mt="onCompositionStart");Mt&&(Ni&&s.locale!=="ko"&&(qa||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&qa&&(Rt=Eo()):(Vi=H,To="value"in Vi?Vi.value:Vi.textContent,qa=!0)),dt=Eh(q,Mt),0<dt.length&&(Mt=new xi(Mt,e,null,s,H),Y.push({event:Mt,listeners:dt}),Rt?Mt.data=Rt:(Rt=La(s),Rt!==null&&(Mt.data=Rt)))),(Rt=kn?GS(e,s):HS(e,s))&&(Mt=Eh(q,"onBeforeInput"),0<Mt.length&&(dt=new xi("onBeforeInput","beforeinput",null,s,H),Y.push({event:dt,listeners:Mt}),dt.data=Rt)),zw(Y,e,q,s,H)}bv(Y,i)})}function Wo(e,i,s){return{instance:e,listener:i,currentTarget:s}}function Eh(e,i){for(var s=i+"Capture",o=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ii(e,s),f!=null&&o.unshift(Wo(e,f,d)),f=ii(e,i),f!=null&&o.push(Wo(e,f,d))),e.tag===3)return o;e=e.return}return[]}function Bw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rv(e,i,s,o,f){for(var d=i._reactName,y=[];s!==null&&s!==o;){var E=s,V=E.alternate,q=E.stateNode;if(E=E.tag,V!==null&&V===o)break;E!==5&&E!==26&&E!==27||q===null||(V=q,f?(q=ii(s,d),q!=null&&y.unshift(Wo(s,q,V))):f||(q=ii(s,d),q!=null&&y.push(Wo(s,q,V)))),s=s.return}y.length!==0&&e.push({event:i,listeners:y})}var kw=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function Vv(e){return(typeof e=="string"?e:""+e).replace(kw,`
`).replace(Fw,"")}function Dv(e,i){return i=Vv(i),Vv(e)===i}function Wt(e,i,s,o,f,d){switch(s){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||_n(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&_n(e,""+o);break;case"className":Rn(e,"class",o);break;case"tabIndex":Rn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(e,s,o);break;case"style":yo(e,o,d);break;case"data":if(i!=="object"){Rn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||s!=="href")){e.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=Ma(""+o),e.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(i!=="input"&&Wt(e,i,"name",f.name,f,null),Wt(e,i,"formEncType",f.formEncType,f,null),Wt(e,i,"formMethod",f.formMethod,f,null),Wt(e,i,"formTarget",f.formTarget,f,null)):(Wt(e,i,"encType",f.encType,f,null),Wt(e,i,"method",f.method,f,null),Wt(e,i,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=Ma(""+o),e.setAttribute(s,o);break;case"onClick":o!=null&&(e.onclick=ni);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(s=o.__html,s!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=s}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}s=Ma(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""+o):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":o===!0?e.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,o):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(s,o):e.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(s):e.setAttribute(s,o);break;case"popover":Ct("beforetoggle",e),Ct("toggle",e),Ca(e,"popover",o);break;case"xlinkActuate":De(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":De(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":De(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":De(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":De(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":De(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":De(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":De(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":De(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ca(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Ec.get(s)||s,Ca(e,s,o))}}function wm(e,i,s,o,f,d){switch(s){case"style":yo(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(s=o.__html,s!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=s}}break;case"children":typeof o=="string"?_n(e,o):(typeof o=="number"||typeof o=="bigint")&&_n(e,""+o);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),d=e[Fe]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof o=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(i,o,f);break t}s in e?e[s]=o:o===!0?e.setAttribute(s,""):Ca(e,s,o)}}}function $e(e,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",e),Ct("load",e);var o=!1,f=!1,d;for(d in s)if(s.hasOwnProperty(d)){var y=s[d];if(y!=null)switch(d){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(e,i,d,y,s,null)}}f&&Wt(e,i,"srcSet",s.srcSet,s,null),o&&Wt(e,i,"src",s.src,s,null);return;case"input":Ct("invalid",e);var E=d=y=f=null,V=null,q=null;for(o in s)if(s.hasOwnProperty(o)){var H=s[o];if(H!=null)switch(o){case"name":f=H;break;case"type":y=H;break;case"checked":V=H;break;case"defaultChecked":q=H;break;case"value":d=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:Wt(e,i,o,H,s,null)}}yc(e,d,E,V,q,y,f,!1);return;case"select":Ct("invalid",e),o=y=d=null;for(f in s)if(s.hasOwnProperty(f)&&(E=s[f],E!=null))switch(f){case"value":d=E;break;case"defaultValue":y=E;break;case"multiple":o=E;default:Wt(e,i,f,E,s,null)}i=d,s=y,e.multiple=!!o,i!=null?Er(e,!!o,i,!1):s!=null&&Er(e,!!o,s,!0);return;case"textarea":Ct("invalid",e),d=f=o=null;for(y in s)if(s.hasOwnProperty(y)&&(E=s[y],E!=null))switch(y){case"value":o=E;break;case"defaultValue":f=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Wt(e,i,y,E,s,null)}Ar(e,o,f,d);return;case"option":for(V in s)if(s.hasOwnProperty(V)&&(o=s[V],o!=null))switch(V){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Wt(e,i,V,o,s,null)}return;case"dialog":Ct("beforetoggle",e),Ct("toggle",e),Ct("cancel",e),Ct("close",e);break;case"iframe":case"object":Ct("load",e);break;case"video":case"audio":for(o=0;o<$o.length;o++)Ct($o[o],e);break;case"image":Ct("error",e),Ct("load",e);break;case"details":Ct("toggle",e);break;case"embed":case"source":case"link":Ct("error",e),Ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in s)if(s.hasOwnProperty(q)&&(o=s[q],o!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(e,i,q,o,s,null)}return;default:if(Na(i)){for(H in s)s.hasOwnProperty(H)&&(o=s[H],o!==void 0&&wm(e,i,H,o,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(o=s[E],o!=null&&Wt(e,i,E,o,s,null))}function jw(e,i,s,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,y=null,E=null,V=null,q=null,H=null;for(G in s){var Y=s[G];if(s.hasOwnProperty(G)&&Y!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":V=Y;default:o.hasOwnProperty(G)||Wt(e,i,G,null,o,Y)}}for(var k in o){var G=o[k];if(Y=s[k],o.hasOwnProperty(k)&&(G!=null||Y!=null))switch(k){case"type":d=G;break;case"name":f=G;break;case"checked":q=G;break;case"defaultChecked":H=G;break;case"value":y=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==Y&&Wt(e,i,k,G,o,Y)}}xa(e,y,E,V,q,H,d,f);return;case"select":G=y=E=k=null;for(d in s)if(V=s[d],s.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":G=V;default:o.hasOwnProperty(d)||Wt(e,i,d,null,o,V)}for(f in o)if(d=o[f],V=s[f],o.hasOwnProperty(f)&&(d!=null||V!=null))switch(f){case"value":k=d;break;case"defaultValue":E=d;break;case"multiple":y=d;default:d!==V&&Wt(e,i,f,d,o,V)}i=E,s=y,o=G,k!=null?Er(e,!!s,k,!1):!!o!=!!s&&(i!=null?Er(e,!!s,i,!0):Er(e,!!s,s?[]:"",!1));return;case"textarea":G=k=null;for(E in s)if(f=s[E],s.hasOwnProperty(E)&&f!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Wt(e,i,E,null,o,f)}for(y in o)if(f=o[y],d=s[y],o.hasOwnProperty(y)&&(f!=null||d!=null))switch(y){case"value":k=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&Wt(e,i,y,f,o,d)}vc(e,k,G);return;case"option":for(var ut in s)if(k=s[ut],s.hasOwnProperty(ut)&&k!=null&&!o.hasOwnProperty(ut))switch(ut){case"selected":e.selected=!1;break;default:Wt(e,i,ut,null,o,k)}for(V in o)if(k=o[V],G=s[V],o.hasOwnProperty(V)&&k!==G&&(k!=null||G!=null))switch(V){case"selected":e.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Wt(e,i,V,k,o,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in s)k=s[vt],s.hasOwnProperty(vt)&&k!=null&&!o.hasOwnProperty(vt)&&Wt(e,i,vt,null,o,k);for(q in o)if(k=o[q],G=s[q],o.hasOwnProperty(q)&&k!==G&&(k!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(137,i));break;default:Wt(e,i,q,k,o,G)}return;default:if(Na(i)){for(var te in s)k=s[te],s.hasOwnProperty(te)&&k!==void 0&&!o.hasOwnProperty(te)&&wm(e,i,te,void 0,o,k);for(H in o)k=o[H],G=s[H],!o.hasOwnProperty(H)||k===G||k===void 0&&G===void 0||wm(e,i,H,k,o,G);return}}for(var O in s)k=s[O],s.hasOwnProperty(O)&&k!=null&&!o.hasOwnProperty(O)&&Wt(e,i,O,null,o,k);for(Y in o)k=o[Y],G=s[Y],!o.hasOwnProperty(Y)||k===G||k==null&&G==null||Wt(e,i,Y,k,o,G)}function Cv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var f=s[o],d=f.transferSize,y=f.initiatorType,E=f.duration;if(d&&E&&Cv(y)){for(y=0,E=f.responseEnd,o+=1;o<s.length;o++){var V=s[o],q=V.startTime;if(q>E)break;var H=V.transferSize,Y=V.initiatorType;H&&Cv(Y)&&(V=V.responseEnd,y+=H*(V<E?1:(E-q)/(V-q)))}if(--o,i+=8*(d+y)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var bm=null,Im=null;function Ah(e){return e.nodeType===9?e:e.ownerDocument}function xv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Rm(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vm=null;function Hw(){var e=window.event;return e&&e.type==="popstate"?e===Vm?!1:(Vm=e,!0):(Vm=null,!1)}var Mv=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,Kw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(e){return Ov.resolve(null).then(e).catch(Yw)}:Mv;function Yw(e){setTimeout(function(){throw e})}function Hr(e){return e==="head"}function Pv(e,i){var s=i,o=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(o===0){e.removeChild(f),dl(i);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")tu(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,tu(s);for(var d=s.firstChild;d;){var y=d.nextSibling,E=d.nodeName;d[Ei]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=y}}else s==="body"&&tu(e.ownerDocument.body);s=f}while(s);dl(i)}function zv(e,i){var s=e;e=0;do{var o=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=o}while(s)}function Dm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Dm(s),Da(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Xw(e,i,s,o){for(;e.nodeType===1;){var f=s;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ei])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Yn(e.nextSibling),e===null)break}return null}function Zw(e,i,s){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Yn(e.nextSibling),e===null))return null;return e}function Uv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Yn(e.nextSibling),e===null))return null;return e}function Cm(e){return e.data==="$?"||e.data==="$~"}function xm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jw(e,i){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||s.readyState!=="loading")i();else{var o=function(){i(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Yn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Nm=null;function Lv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(i===0)return Yn(e.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}e=e.nextSibling}return null}function qv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return e;i--}else s!=="/$"&&s!=="/&"||i++}e=e.previousSibling}return null}function Bv(e,i,s){switch(i=Ah(s),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function tu(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Da(e)}var Xn=new Map,kv=new Set;function Sh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ur=rt.d;rt.d={f:$w,r:Ww,D:tb,C:eb,L:nb,m:ib,X:sb,S:rb,M:ab};function $w(){var e=ur.f(),i=mh();return e||i}function Ww(e){var i=Ln(e);i!==null&&i.tag===5&&i.type==="form"?ry(i):ur.r(e)}var cl=typeof document>"u"?null:document;function Fv(e,i,s){var o=cl;if(o&&typeof i=="string"&&i){var f=pn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),kv.has(f)||(kv.add(f),e={rel:e,crossOrigin:s,href:i},o.querySelector(f)===null&&(i=o.createElement("link"),$e(i,"link",e),Ve(i),o.head.appendChild(i)))}}function tb(e){ur.D(e),Fv("dns-prefetch",e,null)}function eb(e,i){ur.C(e,i),Fv("preconnect",e,i)}function nb(e,i,s){ur.L(e,i,s);var o=cl;if(o&&e&&i){var f='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+pn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+pn(s.imageSizes)+'"]')):f+='[href="'+pn(e)+'"]';var d=f;switch(i){case"style":d=hl(e);break;case"script":d=fl(e)}Xn.has(d)||(e=A({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:e,as:i},s),Xn.set(d,e),o.querySelector(f)!==null||i==="style"&&o.querySelector(eu(d))||i==="script"&&o.querySelector(nu(d))||(i=o.createElement("link"),$e(i,"link",e),Ve(i),o.head.appendChild(i)))}}function ib(e,i){ur.m(e,i);var s=cl;if(s&&e){var o=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+pn(o)+'"][href="'+pn(e)+'"]',d=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=fl(e)}if(!Xn.has(d)&&(e=A({rel:"modulepreload",href:e},i),Xn.set(d,e),s.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(nu(d)))return}o=s.createElement("link"),$e(o,"link",e),Ve(o),s.head.appendChild(o)}}}function rb(e,i,s){ur.S(e,i,s);var o=cl;if(o&&e){var f=Si(o).hoistableStyles,d=hl(e);i=i||"default";var y=f.get(d);if(!y){var E={loading:0,preload:null};if(y=o.querySelector(eu(d)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":i},s),(s=Xn.get(d))&&Mm(e,s);var V=y=o.createElement("link");Ve(V),$e(V,"link",e),V._p=new Promise(function(q,H){V.onload=q,V.onerror=H}),V.addEventListener("load",function(){E.loading|=1}),V.addEventListener("error",function(){E.loading|=2}),E.loading|=4,wh(y,i,o)}y={type:"stylesheet",instance:y,count:1,state:E},f.set(d,y)}}}function sb(e,i){ur.X(e,i);var s=cl;if(s&&e){var o=Si(s).hoistableScripts,f=fl(e),d=o.get(f);d||(d=s.querySelector(nu(f)),d||(e=A({src:e,async:!0},i),(i=Xn.get(f))&&Om(e,i),d=s.createElement("script"),Ve(d),$e(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function ab(e,i){ur.M(e,i);var s=cl;if(s&&e){var o=Si(s).hoistableScripts,f=fl(e),d=o.get(f);d||(d=s.querySelector(nu(f)),d||(e=A({src:e,async:!0,type:"module"},i),(i=Xn.get(f))&&Om(e,i),d=s.createElement("script"),Ve(d),$e(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function jv(e,i,s,o){var f=(f=It.current)?Sh(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=hl(s.href),s=Si(f).hoistableStyles,o=s.get(i),o||(o={type:"style",instance:null,count:0,state:null},s.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=hl(s.href);var d=Si(f).hoistableStyles,y=d.get(e);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=f.querySelector(eu(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Xn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Xn.set(e,s),d||lb(f,e,s,y.state))),i&&o===null)throw Error(r(528,""));return y}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=fl(s),s=Si(f).hoistableScripts,o=s.get(i),o||(o={type:"script",instance:null,count:0,state:null},s.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function hl(e){return'href="'+pn(e)+'"'}function eu(e){return'link[rel="stylesheet"]['+e+"]"}function Gv(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function lb(e,i,s,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),$e(i,"link",s),Ve(i),e.head.appendChild(i))}function fl(e){return'[src="'+pn(e)+'"]'}function nu(e){return"script[async]"+e}function Hv(e,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+pn(s.href)+'"]');if(o)return i.instance=o,Ve(o),o;var f=A({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ve(o),$e(o,"style",f),wh(o,s.precedence,e),i.instance=o;case"stylesheet":f=hl(s.href);var d=e.querySelector(eu(f));if(d)return i.state.loading|=4,i.instance=d,Ve(d),d;o=Gv(s),(f=Xn.get(f))&&Mm(o,f),d=(e.ownerDocument||e).createElement("link"),Ve(d);var y=d;return y._p=new Promise(function(E,V){y.onload=E,y.onerror=V}),$e(d,"link",o),i.state.loading|=4,wh(d,s.precedence,e),i.instance=d;case"script":return d=fl(s.src),(f=e.querySelector(nu(d)))?(i.instance=f,Ve(f),f):(o=s,(f=Xn.get(d))&&(o=A({},s),Om(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ve(f),$e(f,"link",o),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,wh(o,s.precedence,e));return i.instance}function wh(e,i,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,d=f,y=0;y<o.length;y++){var E=o[y];if(E.dataset.precedence===i)d=E;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(e,i.firstChild))}function Mm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Om(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var bh=null;function Qv(e,i,s){if(bh===null){var o=new Map,f=bh=new Map;f.set(s,o)}else f=bh,o=f.get(s),o||(o=new Map,f.set(s,o));if(o.has(e))return o;for(o.set(e,null),s=s.getElementsByTagName(e),f=0;f<s.length;f++){var d=s[f];if(!(d[Ei]||d[Re]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=e+y;var E=o.get(y);E?E.push(d):o.set(y,[d])}}return o}function Kv(e,i,s){e=e.ownerDocument||e,e.head.insertBefore(s,i==="title"?e.querySelector("head > title"):null)}function ob(e,i,s){if(s===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Yv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ub(e,i,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=hl(o.href),d=i.querySelector(eu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Ih.bind(e),i.then(e,e)),s.state.loading|=4,s.instance=d,Ve(d);return}d=i.ownerDocument||i,o=Gv(o),(f=Xn.get(f))&&Mm(o,f),d=d.createElement("link"),Ve(d);var y=d;y._p=new Promise(function(E,V){y.onload=E,y.onerror=V}),$e(d,"link",o),s.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Ih.bind(e),i.addEventListener("load",s),i.addEventListener("error",s))}}var Pm=0;function cb(e,i){return e.stylesheets&&e.count===0&&Vh(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var o=setTimeout(function(){if(e.stylesheets&&Vh(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&Pm===0&&(Pm=62500*Gw());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Vh(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Pm?50:800)+i);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Ih(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Rh=null;function Vh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Rh=new Map,i.forEach(hb,e),Rh=null,Ih.call(e))}function hb(e,i){if(!(i.state.loading&4)){var s=Rh.get(e);if(s)var o=s.get(null);else{s=new Map,Rh.set(e,s);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var y=f[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(s.set(y.dataset.precedence,y),o=y)}o&&s.set(null,o)}f=i.instance,y=f.getAttribute("data-precedence"),d=s.get(y)||o,d===o&&s.set(null,f),s.set(y,f),this.count++,o=Ih.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var iu={$$typeof:ct,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function fb(e,i,s,o,f,d,y,E,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Xv(e,i,s,o,f,d,y,E,V,q,H,Y){return e=new fb(e,i,s,y,V,q,H,Y,E),i=1,d===!0&&(i|=24),d=Dn(3,null,null,i),e.current=d,d.stateNode=e,i=md(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:s,cache:i},yd(d),e}function Zv(e){return e?(e=ja,e):ja}function Jv(e,i,s,o,f,d){f=Zv(f),o.context===null?o.context=f:o.pendingContext=f,o=Or(i),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=Pr(e,o,i),s!==null&&(An(s,e,i),Po(s,e,i))}function $v(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<i?s:i}}function zm(e,i){$v(e,i),(e=e.alternate)&&$v(e,i)}function Wv(e){if(e.tag===13||e.tag===31){var i=Us(e,67108864);i!==null&&An(i,e,67108864),zm(e,67108864)}}function tT(e){if(e.tag===13||e.tag===31){var i=On();i=bs(i);var s=Us(e,i);s!==null&&An(s,e,i),zm(e,i)}}var Dh=!0;function db(e,i,s,o){var f=Q.T;Q.T=null;var d=rt.p;try{rt.p=2,Um(e,i,s,o)}finally{rt.p=d,Q.T=f}}function mb(e,i,s,o){var f=Q.T;Q.T=null;var d=rt.p;try{rt.p=8,Um(e,i,s,o)}finally{rt.p=d,Q.T=f}}function Um(e,i,s,o){if(Dh){var f=Lm(o);if(f===null)Sm(e,i,o,Ch,s),nT(e,o);else if(pb(f,e,i,s,o))o.stopPropagation();else if(nT(e,o),i&4&&-1<gb.indexOf(e)){for(;f!==null;){var d=Ln(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=_i(d.pendingLanes);if(y!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;y;){var V=1<<31-ye(y);E.entanglements[1]|=V,y&=~V}zi(d),(jt&6)===0&&(fh=un()+500,Jo(0))}}break;case 31:case 13:E=Us(d,2),E!==null&&An(E,d,2),mh(),zm(d,2)}if(d=Lm(o),d===null&&Sm(e,i,o,Ch,s),d===f)break;f=d}f!==null&&o.stopPropagation()}else Sm(e,i,o,null,s)}}function Lm(e){return e=qn(e),qm(e)}var Ch=null;function qm(e){if(Ch=null,e=Ai(e),e!==null){var i=u(e);if(i===null)e=null;else{var s=i.tag;if(s===13){if(e=h(i),e!==null)return e;e=null}else if(s===31){if(e=m(i),e!==null)return e;e=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Ch=e,null}function eT(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Es()){case so:return 2;case ao:return 8;case vr:case Hf:return 32;case oc:return 268435456;default:return 32}default:return 32}}var Bm=!1,Qr=null,Kr=null,Yr=null,ru=new Map,su=new Map,Xr=[],gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nT(e,i){switch(e){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":ru.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(i.pointerId)}}function au(e,i,s,o,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:s,eventSystemFlags:o,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Ln(i),i!==null&&Wv(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function pb(e,i,s,o,f){switch(i){case"focusin":return Qr=au(Qr,e,i,s,o,f),!0;case"dragenter":return Kr=au(Kr,e,i,s,o,f),!0;case"mouseover":return Yr=au(Yr,e,i,s,o,f),!0;case"pointerover":var d=f.pointerId;return ru.set(d,au(ru.get(d)||null,e,i,s,o,f)),!0;case"gotpointercapture":return d=f.pointerId,su.set(d,au(su.get(d)||null,e,i,s,o,f)),!0}return!1}function iT(e){var i=Ai(e.target);if(i!==null){var s=u(i);if(s!==null){if(i=s.tag,i===13){if(i=h(s),i!==null){e.blockedOn=i,ti(e.priority,function(){tT(s)});return}}else if(i===31){if(i=m(s),i!==null){e.blockedOn=i,ti(e.priority,function(){tT(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var s=Lm(e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);vo=o,s.target.dispatchEvent(o),vo=null}else return i=Ln(s),i!==null&&Wv(i),e.blockedOn=s,!1;i.shift()}return!0}function rT(e,i,s){xh(e)&&s.delete(i)}function _b(){Bm=!1,Qr!==null&&xh(Qr)&&(Qr=null),Kr!==null&&xh(Kr)&&(Kr=null),Yr!==null&&xh(Yr)&&(Yr=null),ru.forEach(rT),su.forEach(rT)}function Nh(e,i){e.blockedOn===i&&(e.blockedOn=null,Bm||(Bm=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_b)))}var Mh=null;function sT(e){Mh!==e&&(Mh=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Mh===e&&(Mh=null);for(var i=0;i<e.length;i+=3){var s=e[i],o=e[i+1],f=e[i+2];if(typeof o!="function"){if(qm(o||s)===null)continue;break}var d=Ln(s);d!==null&&(e.splice(i,3),i-=3,Ld(d,{pending:!0,data:f,method:s.method,action:o},o,f))}}))}function dl(e){function i(V){return Nh(V,e)}Qr!==null&&Nh(Qr,e),Kr!==null&&Nh(Kr,e),Yr!==null&&Nh(Yr,e),ru.forEach(i),su.forEach(i);for(var s=0;s<Xr.length;s++){var o=Xr[s];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Xr.length&&(s=Xr[0],s.blockedOn===null);)iT(s),s.blockedOn===null&&Xr.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var f=s[o],d=s[o+1],y=f[Fe]||null;if(typeof d=="function")y||sT(s);else if(y){var E=null;if(d&&d.hasAttribute("formAction")){if(f=d,y=d[Fe]||null)E=y.formAction;else if(qm(f)!==null)continue}else E=y.action;typeof E=="function"?s[o+1]=E:(s.splice(o,3),o-=3),sT(s)}}}function aT(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function km(e){this._internalRoot=e}Oh.prototype.render=km.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var s=i.current,o=On();Jv(s,o,e,i,null,null)},Oh.prototype.unmount=km.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Jv(e.current,2,null,e,null,null),mh(),i[Ti]=null}};function Oh(e){this._internalRoot=e}Oh.prototype.unstable_scheduleHydration=function(e){if(e){var i=mc();e={blockedOn:null,target:e,priority:i};for(var s=0;s<Xr.length&&i!==0&&i<Xr[s].priority;s++);Xr.splice(s,0,e),s===0&&iT(e)}};var lT=t.version;if(lT!=="19.2.4")throw Error(r(527,lT,"19.2.4"));rt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=_(i),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var yb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{$n=Ph.inject(yb),Ke=Ph}catch{}}return ou.createRoot=function(e,i){if(!l(e))throw Error(r(299));var s=!1,o="",f=my,d=gy,y=py;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=Xv(e,1,!1,null,null,s,o,null,f,d,y,aT),e[Ti]=i.current,Am(e),new km(i)},ou.hydrateRoot=function(e,i,s){if(!l(e))throw Error(r(299));var o=!1,f="",d=my,y=gy,E=py,V=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.formState!==void 0&&(V=s.formState)),i=Xv(e,1,!0,i,s??null,o,f,V,d,y,E,aT),i.context=Zv(null),s=i.current,o=On(),o=bs(o),f=Or(o),f.callback=null,Pr(s,f,o),s=o,i.current.lanes=s,Ss(i,s),zi(i),e[Ti]=i.current,Am(e),new Oh(i)},ou.version="19.2.4",ou}var yT;function qb(){if(yT)return Gm.exports;yT=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Gm.exports=Lb(),Gm.exports}var Bb=qb();const kb=Cb(Bb);var vT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,WE;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function D(){}D.prototype=w.prototype,I.F=w.prototype,I.prototype=new D,I.prototype.constructor=I,I.D=function(M,x,P){for(var R=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)R[oe-2]=arguments[oe];return w.prototype[x].apply(M,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,w,D){D||(D=0);const M=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)M[x]=w.charCodeAt(D++)|w.charCodeAt(D++)<<8|w.charCodeAt(D++)<<16|w.charCodeAt(D++)<<24;else for(x=0;x<16;++x)M[x]=w[D++]|w[D++]<<8|w[D++]<<16|w[D++]<<24;w=I.g[0],D=I.g[1],x=I.g[2];let P=I.g[3],R;R=w+(P^D&(x^P))+M[0]+3614090360&4294967295,w=D+(R<<7&4294967295|R>>>25),R=P+(x^w&(D^x))+M[1]+3905402710&4294967295,P=w+(R<<12&4294967295|R>>>20),R=x+(D^P&(w^D))+M[2]+606105819&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(w^x&(P^w))+M[3]+3250441966&4294967295,D=x+(R<<22&4294967295|R>>>10),R=w+(P^D&(x^P))+M[4]+4118548399&4294967295,w=D+(R<<7&4294967295|R>>>25),R=P+(x^w&(D^x))+M[5]+1200080426&4294967295,P=w+(R<<12&4294967295|R>>>20),R=x+(D^P&(w^D))+M[6]+2821735955&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(w^x&(P^w))+M[7]+4249261313&4294967295,D=x+(R<<22&4294967295|R>>>10),R=w+(P^D&(x^P))+M[8]+1770035416&4294967295,w=D+(R<<7&4294967295|R>>>25),R=P+(x^w&(D^x))+M[9]+2336552879&4294967295,P=w+(R<<12&4294967295|R>>>20),R=x+(D^P&(w^D))+M[10]+4294925233&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(w^x&(P^w))+M[11]+2304563134&4294967295,D=x+(R<<22&4294967295|R>>>10),R=w+(P^D&(x^P))+M[12]+1804603682&4294967295,w=D+(R<<7&4294967295|R>>>25),R=P+(x^w&(D^x))+M[13]+4254626195&4294967295,P=w+(R<<12&4294967295|R>>>20),R=x+(D^P&(w^D))+M[14]+2792965006&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(w^x&(P^w))+M[15]+1236535329&4294967295,D=x+(R<<22&4294967295|R>>>10),R=w+(x^P&(D^x))+M[1]+4129170786&4294967295,w=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(w^D))+M[6]+3225465664&4294967295,P=w+(R<<9&4294967295|R>>>23),R=x+(w^D&(P^w))+M[11]+643717713&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^w&(x^P))+M[0]+3921069994&4294967295,D=x+(R<<20&4294967295|R>>>12),R=w+(x^P&(D^x))+M[5]+3593408605&4294967295,w=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(w^D))+M[10]+38016083&4294967295,P=w+(R<<9&4294967295|R>>>23),R=x+(w^D&(P^w))+M[15]+3634488961&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^w&(x^P))+M[4]+3889429448&4294967295,D=x+(R<<20&4294967295|R>>>12),R=w+(x^P&(D^x))+M[9]+568446438&4294967295,w=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(w^D))+M[14]+3275163606&4294967295,P=w+(R<<9&4294967295|R>>>23),R=x+(w^D&(P^w))+M[3]+4107603335&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^w&(x^P))+M[8]+1163531501&4294967295,D=x+(R<<20&4294967295|R>>>12),R=w+(x^P&(D^x))+M[13]+2850285829&4294967295,w=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(w^D))+M[2]+4243563512&4294967295,P=w+(R<<9&4294967295|R>>>23),R=x+(w^D&(P^w))+M[7]+1735328473&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^w&(x^P))+M[12]+2368359562&4294967295,D=x+(R<<20&4294967295|R>>>12),R=w+(D^x^P)+M[5]+4294588738&4294967295,w=D+(R<<4&4294967295|R>>>28),R=P+(w^D^x)+M[8]+2272392833&4294967295,P=w+(R<<11&4294967295|R>>>21),R=x+(P^w^D)+M[11]+1839030562&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^w)+M[14]+4259657740&4294967295,D=x+(R<<23&4294967295|R>>>9),R=w+(D^x^P)+M[1]+2763975236&4294967295,w=D+(R<<4&4294967295|R>>>28),R=P+(w^D^x)+M[4]+1272893353&4294967295,P=w+(R<<11&4294967295|R>>>21),R=x+(P^w^D)+M[7]+4139469664&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^w)+M[10]+3200236656&4294967295,D=x+(R<<23&4294967295|R>>>9),R=w+(D^x^P)+M[13]+681279174&4294967295,w=D+(R<<4&4294967295|R>>>28),R=P+(w^D^x)+M[0]+3936430074&4294967295,P=w+(R<<11&4294967295|R>>>21),R=x+(P^w^D)+M[3]+3572445317&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^w)+M[6]+76029189&4294967295,D=x+(R<<23&4294967295|R>>>9),R=w+(D^x^P)+M[9]+3654602809&4294967295,w=D+(R<<4&4294967295|R>>>28),R=P+(w^D^x)+M[12]+3873151461&4294967295,P=w+(R<<11&4294967295|R>>>21),R=x+(P^w^D)+M[15]+530742520&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^w)+M[2]+3299628645&4294967295,D=x+(R<<23&4294967295|R>>>9),R=w+(x^(D|~P))+M[0]+4096336452&4294967295,w=D+(R<<6&4294967295|R>>>26),R=P+(D^(w|~x))+M[7]+1126891415&4294967295,P=w+(R<<10&4294967295|R>>>22),R=x+(w^(P|~D))+M[14]+2878612391&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~w))+M[5]+4237533241&4294967295,D=x+(R<<21&4294967295|R>>>11),R=w+(x^(D|~P))+M[12]+1700485571&4294967295,w=D+(R<<6&4294967295|R>>>26),R=P+(D^(w|~x))+M[3]+2399980690&4294967295,P=w+(R<<10&4294967295|R>>>22),R=x+(w^(P|~D))+M[10]+4293915773&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~w))+M[1]+2240044497&4294967295,D=x+(R<<21&4294967295|R>>>11),R=w+(x^(D|~P))+M[8]+1873313359&4294967295,w=D+(R<<6&4294967295|R>>>26),R=P+(D^(w|~x))+M[15]+4264355552&4294967295,P=w+(R<<10&4294967295|R>>>22),R=x+(w^(P|~D))+M[6]+2734768916&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~w))+M[13]+1309151649&4294967295,D=x+(R<<21&4294967295|R>>>11),R=w+(x^(D|~P))+M[4]+4149444226&4294967295,w=D+(R<<6&4294967295|R>>>26),R=P+(D^(w|~x))+M[11]+3174756917&4294967295,P=w+(R<<10&4294967295|R>>>22),R=x+(w^(P|~D))+M[2]+718787259&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~w))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.v=function(I,w){w===void 0&&(w=I.length);const D=w-this.blockSize,M=this.C;let x=this.h,P=0;for(;P<w;){if(x==0)for(;P<=D;)l(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(M[x++]=I.charCodeAt(P++),x==this.blockSize){l(this,M),x=0;break}}else for(;P<w;)if(M[x++]=I[P++],x==this.blockSize){l(this,M),x=0;break}}this.h=x,this.o+=w},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var D=I.length-8;D<I.length;++D)I[D]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,D=0;D<4;++D)for(let M=0;M<32;M+=8)I[w++]=this.g[D]>>>M&255;return I};function u(I,w){var D=m;return Object.prototype.hasOwnProperty.call(D,I)?D[I]:D[I]=w(I)}function h(I,w){this.h=w;const D=[];let M=!0;for(let x=I.length-1;x>=0;x--){const P=I[x]|0;M&&P==w||(D[x]=P,M=!1)}this.g=D}var m={};function g(I){return-128<=I&&I<128?u(I,function(w){return new h([w|0],w<0?-1:0)}):new h([I|0],I<0?-1:0)}function _(I){if(isNaN(I)||!isFinite(I))return A;if(I<0)return tt(_(-I));const w=[];let D=1;for(let M=0;I>=D;M++)w[M]=I/D|0,D*=4294967296;return new h(w,0)}function T(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return tt(T(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=_(Math.pow(w,8));let M=A;for(let P=0;P<I.length;P+=8){var x=Math.min(8,I.length-P);const R=parseInt(I.substring(P,P+x),w);x<8?(x=_(Math.pow(w,x)),M=M.j(x).add(_(R))):(M=M.j(D),M=M.add(_(R)))}return M}var A=g(0),b=g(1),B=g(16777216);a=h.prototype,a.m=function(){if($(this))return-tt(this).m();let I=0,w=1;for(let D=0;D<this.g.length;D++){const M=this.i(D);I+=(M>=0?M:4294967296+M)*w,w*=4294967296}return I},a.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(J(this))return"0";if($(this))return"-"+tt(this).toString(I);const w=_(Math.pow(I,6));var D=this;let M="";for(;;){const x=Vt(D,w).g;D=mt(D,x.j(w));let P=((D.g.length>0?D.g[0]:D.h)>>>0).toString(I);if(D=x,J(D))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},a.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function J(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function $(I){return I.h==-1}a.l=function(I){return I=mt(this,I),$(I)?-1:J(I)?0:1};function tt(I){const w=I.g.length,D=[];for(let M=0;M<w;M++)D[M]=~I.g[M];return new h(D,~I.h).add(b)}a.abs=function(){return $(this)?tt(this):this},a.add=function(I){const w=Math.max(this.g.length,I.g.length),D=[];let M=0;for(let x=0;x<=w;x++){let P=M+(this.i(x)&65535)+(I.i(x)&65535),R=(P>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);M=R>>>16,P&=65535,R&=65535,D[x]=R<<16|P}return new h(D,D[D.length-1]&-2147483648?-1:0)};function mt(I,w){return I.add(tt(w))}a.j=function(I){if(J(this)||J(I))return A;if($(this))return $(I)?tt(this).j(tt(I)):tt(tt(this).j(I));if($(I))return tt(this.j(tt(I)));if(this.l(B)<0&&I.l(B)<0)return _(this.m()*I.m());const w=this.g.length+I.g.length,D=[];for(var M=0;M<2*w;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(let x=0;x<I.g.length;x++){const P=this.i(M)>>>16,R=this.i(M)&65535,oe=I.i(x)>>>16,Ue=I.i(x)&65535;D[2*M+2*x]+=R*Ue,_t(D,2*M+2*x),D[2*M+2*x+1]+=P*Ue,_t(D,2*M+2*x+1),D[2*M+2*x+1]+=R*oe,_t(D,2*M+2*x+1),D[2*M+2*x+2]+=P*oe,_t(D,2*M+2*x+2)}for(I=0;I<w;I++)D[I]=D[2*I+1]<<16|D[2*I];for(I=w;I<2*w;I++)D[I]=0;return new h(D,0)};function _t(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function ct(I,w){this.g=I,this.h=w}function Vt(I,w){if(J(w))throw Error("division by zero");if(J(I))return new ct(A,A);if($(I))return w=Vt(tt(I),w),new ct(tt(w.g),tt(w.h));if($(w))return w=Vt(I,tt(w)),new ct(tt(w.g),w.h);if(I.g.length>30){if($(I)||$(w))throw Error("slowDivide_ only works with positive integers.");for(var D=b,M=w;M.l(I)<=0;)D=lt(D),M=lt(M);var x=ht(D,1),P=ht(M,1);for(M=ht(M,2),D=ht(D,2);!J(M);){var R=P.add(M);R.l(I)<=0&&(x=x.add(D),P=R),M=ht(M,1),D=ht(D,1)}return w=mt(I,x.j(w)),new ct(x,w)}for(x=A;I.l(w)>=0;){for(D=Math.max(1,Math.floor(I.m()/w.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=_(D),R=P.j(w);$(R)||R.l(I)>0;)D-=M,P=_(D),R=P.j(w);J(P)&&(P=b),x=x.add(P),I=mt(I,R)}return new ct(x,I)}a.B=function(I){return Vt(this,I).h},a.and=function(I){const w=Math.max(this.g.length,I.g.length),D=[];for(let M=0;M<w;M++)D[M]=this.i(M)&I.i(M);return new h(D,this.h&I.h)},a.or=function(I){const w=Math.max(this.g.length,I.g.length),D=[];for(let M=0;M<w;M++)D[M]=this.i(M)|I.i(M);return new h(D,this.h|I.h)},a.xor=function(I){const w=Math.max(this.g.length,I.g.length),D=[];for(let M=0;M<w;M++)D[M]=this.i(M)^I.i(M);return new h(D,this.h^I.h)};function lt(I){const w=I.g.length+1,D=[];for(let M=0;M<w;M++)D[M]=I.i(M)<<1|I.i(M-1)>>>31;return new h(D,I.h)}function ht(I,w){const D=w>>5;w%=32;const M=I.g.length-D,x=[];for(let P=0;P<M;P++)x[P]=w>0?I.i(P+D)>>>w|I.i(P+D+1)<<32-w:I.i(P+D);return new h(x,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,WE=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=T,rs=h}).apply(typeof vT<"u"?vT:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t0,gu,e0,jh,ig,n0,i0,r0;(function(){var a,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(c,p){if(p)t:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var U=c[S];if(!(U in v))break t;v=v[U]}c=c[c.length-1],S=v[c],p=p(S),p!=S&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(p){var v=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&v.push([S,p[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function g(c,p,v){return c.call.apply(c.bind,arguments)}function _(c,p,v){return _=g,_.apply(null,arguments)}function T(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function A(c,p){function v(){}v.prototype=p.prototype,c.Z=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(S,U,j){for(var et=Array(arguments.length-2),St=2;St<arguments.length;St++)et[St-2]=arguments[St];return p.prototype[U].apply(S,et)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function B(c){const p=c.length;if(p>0){const v=Array(p);for(let S=0;S<p;S++)v[S]=c[S];return v}return[]}function J(c,p){for(let S=1;S<arguments.length;S++){const U=arguments[S];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const j=U.length||0;c.length=v+j;for(let et=0;et<j;et++)c[v+et]=U[et]}else c.push(U)}}class ${constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function tt(c){h.setTimeout(()=>{throw c},0)}function mt(){var c=I;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class _t{constructor(){this.h=this.g=null}add(p,v){const S=ct.get();S.set(p,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ct=new $(()=>new Vt,c=>c.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,ht=!1,I=new _t,w=()=>{const c=Promise.resolve(void 0);lt=()=>{c.then(D)}};function D(){for(var c;c=mt();){try{c.h.call(c.g)}catch(v){tt(v)}var p=ct;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}ht=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,p),h.removeEventListener("test",v,p)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function oe(c,p){x.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}A(oe,x),oe.prototype.init=function(c,p){const v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ue="closure_listenable_"+(Math.random()*1e6|0),Q=0;function rt(c,p,v,S,U){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!S,this.ha=U,this.key=++Q,this.da=this.fa=!1}function yt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Lt(c,p,v){for(const S in c)p.call(v,c[S],S,c)}function Ht(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function N(c){const p={};for(const v in c)p[v]=c[v];return p}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(c,p){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)c[v]=S[v];for(let j=0;j<X.length;j++)v=X[j],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function ot(c){this.src=c,this.g={},this.h=0}ot.prototype.add=function(c,p,v,S,U){const j=c.toString();c=this.g[j],c||(c=this.g[j]=[],this.h++);const et=It(c,p,S,U);return et>-1?(p=c[et],v||(p.fa=!1)):(p=new rt(p,this.src,j,!!S,U),p.fa=v,c.push(p)),p};function Tt(c,p){const v=p.type;if(v in c.g){var S=c.g[v],U=Array.prototype.indexOf.call(S,p,void 0),j;(j=U>=0)&&Array.prototype.splice.call(S,U,1),j&&(yt(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function It(c,p,v,S){for(let U=0;U<c.length;++U){const j=c[U];if(!j.da&&j.listener==p&&j.capture==!!v&&j.ha==S)return U}return-1}var zt="closure_lm_"+(Math.random()*1e6|0),Le={};function ue(c,p,v,S,U){if(Array.isArray(p)){for(let j=0;j<p.length;j++)ue(c,p[j],v,S,U);return null}return v=ro(v),c&&c[Ue]?c.J(p,v,m(S)?!!S.capture:!1,U):vs(c,p,v,!1,S,U)}function vs(c,p,v,S,U,j){if(!p)throw Error("Invalid event type");const et=m(U)?!!U.capture:!!U;let St=Ts(c);if(St||(c[zt]=St=new ot(c)),v=St.add(p,v,S,et,j),v.proxy)return v;if(S=wa(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)P||(U=et),U===void 0&&(U=!1),c.addEventListener(p.toString(),S,U);else if(c.attachEvent)c.attachEvent(gi(p.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function wa(){function c(v){return p.call(c.src,c.listener,v)}const p=no;return c}function ba(c,p,v,S,U){if(Array.isArray(p))for(var j=0;j<p.length;j++)ba(c,p[j],v,S,U);else S=m(S)?!!S.capture:!!S,v=ro(v),c&&c[Ue]?(c=c.i,j=String(p).toString(),j in c.g&&(p=c.g[j],v=It(p,v,S,U),v>-1&&(yt(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete c.g[j],c.h--)))):c&&(c=Ts(c))&&(p=c.g[p.toString()],c=-1,p&&(c=It(p,v,S,U)),(v=c>-1?p[c]:null)&&Ia(v))}function Ia(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Ue])Tt(p.i,c);else{var v=c.type,S=c.proxy;p.removeEventListener?p.removeEventListener(v,S,c.capture):p.detachEvent?p.detachEvent(gi(v),S):p.addListener&&p.removeListener&&p.removeListener(S),(v=Ts(p))?(Tt(v,c),v.h==0&&(v.src=null,p[zt]=null)):yt(c)}}}function gi(c){return c in Le?Le[c]:Le[c]="on"+c}function no(c,p){if(c.da)c=!0;else{p=new oe(p,this);const v=c.listener,S=c.ha||c.src;c.fa&&Ia(c),c=v.call(S,p)}return c}function Ts(c){return c=c[zt],c instanceof ot?c:null}var io="__closure_events_fn_"+(Math.random()*1e9>>>0);function ro(c){return typeof c=="function"?c:(c[io]||(c[io]=function(p){return c.handleEvent(p)}),c[io])}function be(){M.call(this),this.i=new ot(this),this.M=this,this.G=null}A(be,M),be.prototype[Ue]=!0,be.prototype.removeEventListener=function(c,p,v,S){ba(this,c,p,v,S)};function qe(c,p){var v,S=c.G;if(S)for(v=[];S;S=S.G)v.push(S);if(c=c.M,S=p.type||p,typeof p=="string")p=new x(p,c);else if(p instanceof x)p.target=p.target||c;else{var U=p;p=new x(S,c),st(p,U)}U=!0;let j,et;if(v)for(et=v.length-1;et>=0;et--)j=p.g=v[et],U=yr(j,S,!0,p)&&U;if(j=p.g=c,U=yr(j,S,!0,p)&&U,U=yr(j,S,!1,p)&&U,v)for(et=0;et<v.length;et++)j=p.g=v[et],U=yr(j,S,!1,p)&&U}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const v=c.g[p];for(let S=0;S<v.length;S++)yt(v[S]);delete c.g[p],c.h--}}this.G=null},be.prototype.J=function(c,p,v,S){return this.i.add(String(c),p,!1,v,S)},be.prototype.K=function(c,p,v,S){return this.i.add(String(c),p,!0,v,S)};function yr(c,p,v,S){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let U=!0;for(let j=0;j<p.length;++j){const et=p[j];if(et&&!et.da&&et.capture==v){const St=et.listener,ve=et.ha||et.src;et.fa&&Tt(c.i,et),U=St.call(ve,S)!==!1&&U}}return U&&!S.defaultPrevented}function Gf(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(c,p||0)}function lc(c){c.g=Gf(()=>{c.g=null,c.i&&(c.i=!1,lc(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class un extends M{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:lc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(c){M.call(this),this.h=c,this.g={}}A(Es,M);var so=[];function ao(c){Lt(c.g,function(p,v){this.g.hasOwnProperty(v)&&Ia(p)},c),c.g={}}Es.prototype.N=function(){Es.Z.N.call(this),ao(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=h.JSON.stringify,Hf=h.JSON.parse,oc=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function uc(){}function cc(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ke(){x.call(this,"d")}A(Ke,x);function Un(){x.call(this,"c")}A(Un,x);var ye={},hc=null;function Ra(){return hc=hc||new be}ye.Ia="serverreachability";function fc(c){x.call(this,ye.Ia,c)}A(fc,x);function pi(c){const p=Ra();qe(p,new fc(p))}ye.STAT_EVENT="statevent";function As(c,p){x.call(this,ye.STAT_EVENT,c),this.stat=p}A(As,x);function Ie(c){const p=Ra();qe(p,new As(p,c))}ye.Ja="timingevent";function _i(c,p){x.call(this,ye.Ja,c),this.size=p}A(_i,x);function yi(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},p)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function Qf(c,p,v,S,U,j){c.info(function(){if(c.g)if(j){var et="",St=j.split("&");for(let Ft=0;Ft<St.length;Ft++){var ve=St[Ft].split("=");if(ve.length>1){const ce=ve[0];ve=ve[1];const kn=ce.split("_");et=kn.length>=2&&kn[1]=="type"?et+(ce+"="+ve+"&"):et+(ce+"=redacted&")}}}else et=null;else et=j;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+p+`
`+v+`
`+et})}function dc(c,p,v,S,U,j,et){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+p+`
`+v+`
`+j+" "+et})}function vi(c,p,v,S){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Kf(c,v)+(S?" "+S:"")})}function Ss(c,p){c.info(function(){return"TIMEOUT: "+p})}Wn.prototype.info=function(){};function Kf(c,p){if(!c.g)return p;if(!p)return null;try{const j=JSON.parse(p);if(j){for(c=0;c<j.length;c++)if(Array.isArray(j[c])){var v=j[c];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let et=1;et<S.length;et++)S[et]=""}}}}return vr(j)}catch{return p}}var ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oo;function bs(){}A(bs,uc),bs.prototype.g=function(){return new XMLHttpRequest},oo=new bs;function Hi(c){return encodeURIComponent(String(c))}function mc(c){var p=1;c=c.split(":");const v=[];for(;p>0&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function ti(c,p,v,S){this.j=c,this.i=p,this.l=v,this.S=S||1,this.V=new Es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var Re={},Fe={};function Ti(c,p,v){c.M=1,c.A=Is(De(p)),c.u=v,c.R=!0,Va(c,null)}function Va(c,p){c.F=Date.now(),Ei(c),c.B=De(c.A);var v=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),Na(v.i,"t",S),c.C=0,v=c.j.L,c.h=new ei,c.g=Dc(c.j,v?p:null,!c.u),c.P>0&&(c.O=new un(_(c.Y,c,c.g),c.P)),p=c.V,v=c.g,S=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(so[0]=U.toString()),U=so);for(let j=0;j<U.length;j++){const et=ue(v,U[j],S||p.handleEvent,!1,p.h||p);if(!et)break;p.g[et.key]=et}p=c.J?N(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),pi(),Qf(c.i,c.v,c.B,c.l,c.S,c.u)}ti.prototype.ba=function(c){c=c.target;const p=this.O;p&&ri(c)==3?p.j():this.Y(c)},ti.prototype.Y=function(c){try{if(c==this.g)t:{const St=ri(this.g),ve=this.g.ya(),Ft=this.g.ca();if(!(St<3)&&(St!=3||this.g&&(this.h.h||this.g.la()||Ye(this.g)))){this.K||St!=4||ve==7||(ve==8||Ft<=0?pi(3):pi(2)),Ai(this);var p=this.g.ca();this.X=p;var v=Yf(this);if(this.o=p==200,dc(this.i,this.v,this.B,this.l,this.S,St,p),this.o){if(this.U&&!this.L){e:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var j=S;break e}}j=null}if(c=j)vi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Si(this,c);else{this.o=!1,this.m=3,Ie(12),In(this),Ln(this);break t}}if(this.R){c=!0;let ce;for(;!this.K&&this.C<v.length;)if(ce=pc(this,v),ce==Fe){St==4&&(this.m=4,Ie(14),c=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==Re){this.m=4,Ie(15),vi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else vi(this.i,this.l,ce,null),Si(this,ce);if(gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||v.length!=0||this.h.h||(this.m=1,Ie(16),c=!1),this.o=this.o&&c,!c)vi(this.i,this.l,v,"[Invalid Chunked Response]"),In(this),Ln(this);else if(v.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),wo(et),et.P=!0,Ie(11))}}else vi(this.i,this.l,v,null),Si(this,v);St==4&&In(this),this.o&&!this.K&&(St==4?bc(this.j,this):(this.o=!1,Ei(this)))}else Ki(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),In(this),Ln(this)}}}catch{}finally{}};function Yf(c){if(!gc(c))return c.g.la();const p=Ye(c.g);if(p==="")return"";let v="";const S=p.length,U=ri(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return In(c),Ln(c),"";c.h.i=new h.TextDecoder}for(let j=0;j<S;j++)c.h.h=!0,v+=c.h.i.decode(p[j],{stream:!(U&&j==S-1)});return p.length=0,c.h.g+=v,c.C=0,c.h.g}function gc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function pc(c,p){var v=c.C,S=p.indexOf(`
`,v);return S==-1?Fe:(v=Number(p.substring(v,S)),isNaN(v)?Re:(S+=1,S+v>p.length?Fe:(p=p.slice(S,S+v),c.C=S+v,p)))}ti.prototype.cancel=function(){this.K=!0,In(this)};function Ei(c){c.T=Date.now()+c.H,Da(c,c.H)}function Da(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=yi(_(c.aa,c),p)}function Ai(c){c.D&&(h.clearTimeout(c.D),c.D=null)}ti.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ss(this.i,this.B),this.M!=2&&(pi(),Ie(17)),In(this),this.m=2,Ln(this)):Da(this,this.T-c)};function Ln(c){c.j.I==0||c.K||bc(c.j,c)}function In(c){Ai(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,ao(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function Si(c,p){try{var v=c.j;if(v.I!=0&&(v.g==c||bi(v.h,c))){if(!c.L&&bi(v.h,c)&&v.I==3){try{var S=v.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Ua(v),Rr(v);else break t;Ms(v),Ie(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=yi(_(v.Va,v),6e3));wi(v.h)<=1&&v.ta&&(v.ta=void 0)}else xi(v,11)}else if((c.L||v.g==c)&&Ua(v),!R(p))for(U=v.Ba.g.parse(p),p=0;p<U.length;p++){let Ft=U[p];const ce=Ft[0];if(!(ce<=v.K))if(v.K=ce,Ft=Ft[1],v.I==2)if(Ft[0]=="c"){v.M=Ft[1],v.ba=Ft[2];const kn=Ft[3];kn!=null&&(v.ka=kn,v.j.info("VER="+v.ka));const Ni=Ft[4];Ni!=null&&(v.za=Ni,v.j.info("SVER="+v.za));const si=Ft[5];si!=null&&typeof si=="number"&&si>0&&(S=1.5*si,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ai=c.g;if(ai){const Os=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Os){var j=S.h;j.g||Os.indexOf("spdy")==-1&&Os.indexOf("quic")==-1&&Os.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ho(j,j.h),j.h=null))}if(S.G){const La=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(S.wa=La,Qt(S.J,S.G,La))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var et=c;if(S.na=Vc(S,S.L?S.ba:null,S.W),et.L){fo(S.h,et);var St=et,ve=S.O;ve&&(St.H=ve),St.D&&(Ai(St),Ei(St)),S.g=et}else Sc(S);v.i.length>0&&Ci(v)}else Ft[0]!="stop"&&Ft[0]!="close"||xi(v,7);else v.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?xi(v,7):Ao(v):Ft[0]!="noop"&&v.l&&v.l.qa(Ft),v.A=0)}}pi(4)}catch{}}var Ve=class{constructor(c,p){this.g=c,this.map=p}};function uo(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function co(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wi(c){return c.h?1:c.g?c.g.size:0}function bi(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ho(c,p){c.g?c.g.add(p):c.h=p}function fo(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}uo.prototype.cancel=function(){if(this.i=mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function mo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.G);return p}return B(c.i)}var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ca(c,p){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const S=c[v].indexOf("=");let U,j=null;S>=0?(U=c[v].substring(0,S),j=c[v].substring(S+1)):U=c[v],p(U,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Rn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Rn?(this.l=c.l,je(this,c.j),this.o=c.o,this.g=c.g,Tr(this,c.u),this.h=c.h,go(this,Ec(c.i)),this.m=c.m):c&&(p=String(c).match(_c))?(this.l=!1,je(this,p[1]||"",!0),this.o=Ii(p[2]||""),this.g=Ii(p[3]||"",!0),Tr(this,p[4]),this.h=Ii(p[5]||"",!0),go(this,p[6]||"",!0),this.m=Ii(p[7]||"")):(this.l=!1,this.i=new Ar(null,this.l))}Rn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(Rs(p,xa,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Rs(p,xa,!0),"@"),c.push(Hi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Rs(v,v.charAt(0)=="/"?po:yc,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Rs(v,vc)),c.join("")},Rn.prototype.resolve=function(c){const p=De(this);let v=!!c.j;v?je(p,c.j):v=!!c.o,v?p.o=c.o:v=!!c.g,v?p.g=c.g:v=c.u!=null;var S=c.h;if(v)Tr(p,c.u);else if(v=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=p.h.lastIndexOf("/");U!=-1&&(S=p.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const j=[];for(let et=0;et<U.length;){const St=U[et++];St=="."?S&&et==U.length&&j.push(""):St==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),S&&et==U.length&&j.push("")):(j.push(St),S=!0)}S=j.join("/")}else S=U}return v?p.h=S:v=c.i.toString()!=="",v?go(p,Ec(c.i)):v=!!c.m,v&&(p.m=c.m),p};function De(c){return new Rn(c)}function je(c,p,v){c.j=v?Ii(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Tr(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function go(c,p,v){p instanceof Ar?(c.i=p,Ma(c.i,c.l)):(v||(p=Rs(p,Er)),c.i=new Ar(p,c.l))}function Qt(c,p,v){c.i.set(p,v)}function Is(c){return Qt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ii(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rs(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,pn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var xa=/[#\/\?@]/g,yc=/[#\?:]/g,po=/[#\?]/g,Er=/[#\?@]/g,vc=/#/g;function Ar(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function _n(c){c.g||(c.g=new Map,c.h=0,c.i&&Ca(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}a=Ar.prototype,a.add=function(c,p){_n(this),this.i=null,c=Sr(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function Tc(c,p){_n(c),p=Sr(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function _o(c,p){return _n(c),p=Sr(c,p),c.g.has(p)}a.forEach=function(c,p){_n(this),this.g.forEach(function(v,S){v.forEach(function(U){c.call(p,U,S,this)},this)},this)};function yo(c,p){_n(c);let v=[];if(typeof p=="string")_o(c,p)&&(v=v.concat(c.g.get(Sr(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)v=v.concat(c[p]);return v}a.set=function(c,p){return _n(this),this.i=null,c=Sr(this,c),_o(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},a.get=function(c,p){return c?(c=yo(this,c),c.length>0?String(c[0]):p):p};function Na(c,p,v){Tc(c,p),v.length>0&&(c.i=null,c.g.set(Sr(c,p),B(v)),c.h+=v.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var v=p[S];const U=Hi(v);v=yo(this,v);for(let j=0;j<v.length;j++){let et=U;v[j]!==""&&(et+="="+Hi(v[j])),c.push(et)}}return this.i=c.join("&")};function Ec(c){const p=new Ar;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function Sr(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Ma(c,p){p&&!c.j&&(_n(c),c.i=null,c.g.forEach(function(v,S){const U=S.toLowerCase();S!=U&&(Tc(this,S),Na(this,U,v))},c)),c.j=p}function ni(c,p){const v=new Wn;if(h.Image){const S=new Image;S.onload=T(qn,v,"TestLoadImage: loaded",!0,p,S),S.onerror=T(qn,v,"TestLoadImage: error",!1,p,S),S.onabort=T(qn,v,"TestLoadImage: abort",!1,p,S),S.ontimeout=T(qn,v,"TestLoadImage: timeout",!1,p,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else p(!1)}function vo(c,p){const v=new Wn,S=new AbortController,U=setTimeout(()=>{S.abort(),qn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:S.signal}).then(j=>{clearTimeout(U),j.ok?qn(v,"TestPingServer: ok",!0,p):qn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),qn(v,"TestPingServer: error",!1,p)})}function qn(c,p,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function wr(){this.g=new oc}function Ri(c){this.i=c.Sb||null,this.h=c.ab||!1}A(Ri,uc),Ri.prototype.g=function(){return new Vs(this.i,this.h)};function Vs(c,p){be.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Vs,be),a=Vs.prototype,a.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ii(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,br(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?br(this):ii(this),this.readyState==3&&Oa(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,br(this))},a.Na=function(c){this.g&&(this.response=c,br(this))},a.ga=function(){this.g&&br(this)};function br(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ii(c)}a.setRequestHeader=function(c,p){this.A.append(c,p)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bn(c){let p="";return Lt(c,function(v,S){p+=S,p+=":",p+=v,p+=`\r
`}),p}function Ds(c,p,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=Bn(v),typeof c=="string"?v!=null&&Hi(v):Qt(c,p,v))}function Jt(c){be.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Jt,be);var Vi=/^https?$/i,To=["POST","PUT"];a=Jt.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,p,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oo.g(),this.g.onreadystatechange=b(_(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(j){Cs(this,j);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const j of S.keys())v.set(j,S.get(j));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(j=>j.toLowerCase()=="content-type"),U=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(To,p,void 0)>=0)||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,et]of v)this.g.setRequestHeader(j,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(j){Cs(this,j)}};function Cs(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,Eo(c),Qi(c)}function Eo(c){c.A||(c.A=!0,qe(c,"complete"),qe(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,qe(this,"complete"),qe(this,"abort"),Qi(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),Jt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?xs(this):this.Xa())},a.Xa=function(){xs(this)};function xs(c){if(c.h&&typeof u<"u"){if(c.v&&ri(c)==4)setTimeout(c.Ca.bind(c),0);else if(qe(c,"readystatechange"),ri(c)==4){c.h=!1;try{const j=c.ca();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var S;if(S=j===0){let et=String(c.D).match(_c)[1]||null;!et&&h.self&&h.self.location&&(et=h.self.location.protocol.slice(0,-1)),S=!Vi.test(et?et.toLowerCase():"")}v=S}if(v)qe(c,"complete"),qe(c,"success");else{c.o=6;try{var U=ri(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",Eo(c)}}finally{Qi(c)}}}}function Qi(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,p||qe(c,"ready");try{v.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function ri(c){return c.g?c.g.readyState:0}a.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Hf(p)}};function Ye(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(c){const p={};c=(c.g&&ri(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(R(c[S]))continue;var v=mc(c[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const j=p[U]||[];p[U]=j,j.push(v)}Ht(p,function(S){return S.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Ir(c){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,c),this.Za=Di("retryDelaySeedMs",1e4,c),this.Ta=Di("forwardChannelMaxRetries",2,c),this.va=Di("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new uo(c&&c.concurrentRequestLimit),this.Ba=new wr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=Ir.prototype,a.ka=8,a.I=1,a.connect=function(c,p,v,S){Ie(0),this.W=c,this.H=p||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Vc(this,null,this.W),Ci(this)};function Ao(c){if(Pa(c),c.I==3){var p=c.V++,v=De(c.J);if(Qt(v,"SID",c.M),Qt(v,"RID",p),Qt(v,"TYPE","terminate"),Ns(c,v),p=new ti(c,c.j,p),p.M=2,p.A=Is(De(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=p.A,v=!0),v||(p.g=Dc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ei(p)}Rc(c)}function Rr(c){c.g&&(wo(c),c.g.cancel(),c.g=null)}function Pa(c){Rr(c),c.v&&(h.clearTimeout(c.v),c.v=null),Ua(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function Ci(c){if(!co(c.h)&&!c.m){c.m=!0;var p=c.Ea;lt||w(),ht||(lt(),ht=!0),I.add(p,c),c.D=0}}function za(c,p){return wi(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=yi(_(c.Ea,c,p),Ic(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new ti(this,this.j,c);let j=this.o;if(this.U&&(j?(j=N(j),st(j,this.U)):j=this.U),this.u!==null||this.R||(U.J=j,j=null),this.S)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=Ac(this,U,p),v=De(this.J),Qt(v,"RID",c),Qt(v,"CVER",22),this.G&&Qt(v,"X-HTTP-Session-Id",this.G),Ns(this,v),j&&(this.R?p="headers="+Hi(Bn(j))+"&"+p:this.u&&Ds(v,this.u,j)),ho(this.h,U),this.Ra&&Qt(v,"TYPE","init"),this.S?(Qt(v,"$req",p),Qt(v,"SID","null"),U.U=!0,Ti(U,v,null)):Ti(U,v,p),this.I=2}}else this.I==3&&(c?So(this,c):this.i.length==0||co(this.h)||So(this))};function So(c,p){var v;p?v=p.l:v=c.V++;const S=De(c.J);Qt(S,"SID",c.M),Qt(S,"RID",v),Qt(S,"AID",c.K),Ns(c,S),c.u&&c.o&&Ds(S,c.u,c.o),v=new ti(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Ac(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ho(c.h,v),Ti(v,S,p)}function Ns(c,p){c.H&&Lt(c.H,function(v,S){Qt(p,S,v)}),c.l&&Lt({},function(v,S){Qt(p,S,v)})}function Ac(c,p,v){v=Math.min(c.i.length,v);const S=c.l?_(c.l.Ka,c.l,c):null;t:{var U=c.i;let St=-1;for(;;){const ve=["count="+v];St==-1?v>0?(St=U[0].g,ve.push("ofs="+St)):St=0:ve.push("ofs="+St);let Ft=!0;for(let ce=0;ce<v;ce++){var j=U[ce].g;const kn=U[ce].map;if(j-=St,j<0)St=Math.max(0,U[ce].g-100),Ft=!1;else try{j="req"+j+"_"||"";try{var et=kn instanceof Map?kn:Object.entries(kn);for(const[Ni,si]of et){let ai=si;m(si)&&(ai=vr(si)),ve.push(j+Ni+"="+encodeURIComponent(ai))}}catch(Ni){throw ve.push(j+"type="+encodeURIComponent("_badmap")),Ni}}catch{S&&S(kn)}}if(Ft){et=ve.join("&");break t}}et=void 0}return c=c.i.splice(0,v),p.G=c,et}function Sc(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;lt||w(),ht||(lt(),ht=!0),I.add(p,c),c.A=0}}function Ms(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=yi(_(c.Da,c),Ic(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=yi(_(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),Rr(this),wc(this))};function wo(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function wc(c){c.g=new ti(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=De(c.na);Qt(p,"RID","rpc"),Qt(p,"SID",c.M),Qt(p,"AID",c.K),Qt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Qt(p,"TO",c.ia),Qt(p,"TYPE","xmlhttp"),Ns(c,p),c.u&&c.o&&Ds(p,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Is(De(p)),v.u=null,v.R=!0,Va(v,c)}a.Va=function(){this.C!=null&&(this.C=null,Rr(this),Ms(this),Ie(19))};function Ua(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function bc(c,p){var v=null;if(c.g==p){Ua(c),wo(c),c.g=null;var S=2}else if(bi(c.h,p))v=p.G,fo(c.h,p),S=1;else return;if(c.I!=0){if(p.o)if(S==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var U=c.D;S=Ra(),qe(S,new _i(S,v)),Ci(c)}else Sc(c);else if(U=p.m,U==3||U==0&&p.X>0||!(S==1&&za(c,p)||S==2&&Ms(c)))switch(v&&v.length>0&&(p=c.h,p.i=p.i.concat(v)),U){case 1:xi(c,5);break;case 4:xi(c,10);break;case 3:xi(c,6);break;default:xi(c,2)}}}function Ic(c,p){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*p}function xi(c,p){if(c.j.info("Error code "+p),p==2){var v=_(c.bb,c),S=c.Ua;const U=!S;S=new Rn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||je(S,"https"),Is(S),U?ni(S.toString(),v):vo(S.toString(),v)}else Ie(2);c.I=0,c.l&&c.l.pa(p),Rc(c),Pa(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function Rc(c){if(c.I=0,c.ja=[],c.l){const p=mo(c.h);(p.length!=0||c.i.length!=0)&&(J(c.ja,p),J(c.ja,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.oa()}}function Vc(c,p,v){var S=v instanceof Rn?De(v):new Rn(v);if(S.g!="")p&&(S.g=p+"."+S.g),Tr(S,S.u);else{var U=h.location;S=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;const j=new Rn(null);S&&je(j,S),p&&(j.g=p),U&&Tr(j,U),v&&(j.h=v),S=j}return v=c.G,p=c.wa,v&&p&&Qt(S,v,p),Qt(S,"VER",c.ka),Ns(c,S),S}function Dc(c,p,v){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new Jt(new Ri({ab:v})):new Jt(c.ma),p.Fa(c.L),p}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}a=Cc.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Vr(){}Vr.prototype.g=function(c,p){return new cn(c,p)};function cn(c,p){be.call(this),this.g=new Ir(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!R(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Yi(this)}A(cn,be),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Ao(this.g)},cn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=vr(c),c=v);p.i.push(new Ve(p.Ya++,c)),p.I==3&&Ci(p)},cn.prototype.N=function(){this.g.l=null,delete this.j,Ao(this.g),delete this.g,cn.Z.N.call(this)};function xc(c){Ke.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}A(xc,Ke);function Nc(){Un.call(this),this.status=1}A(Nc,Un);function Yi(c){this.g=c}A(Yi,Cc),Yi.prototype.ra=function(){qe(this.g,"a")},Yi.prototype.qa=function(c){qe(this.g,new xc(c))},Yi.prototype.pa=function(c){qe(this.g,new Nc)},Yi.prototype.oa=function(){qe(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,r0=function(){return new Vr},i0=function(){return Ra()},n0=ye,ig={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,jh=ws,lo.COMPLETE="complete",e0=lo,cc.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",be.prototype.listen=be.prototype.J,gu=cc,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,t0=Jt}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl="12.9.0";function Fb(a){Yl=a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new Tb("@firebase/firestore");function Tl(){return ls.logLevel}function jb(a){ls.setLogLevel(a)}function W(a,...t){if(ls.logLevel<=cr.DEBUG){const n=t.map(Og);ls.debug(`Firestore (${Yl}): ${a}`,...n)}}function Ae(a,...t){if(ls.logLevel<=cr.ERROR){const n=t.map(Og);ls.error(`Firestore (${Yl}): ${a}`,...n)}}function mi(a,...t){if(ls.logLevel<=cr.WARN){const n=t.map(Og);ls.warn(`Firestore (${Yl}): ${a}`,...n)}}function Og(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(a,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,s0(a,r,n)}function s0(a,t,n){let r=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${a.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ae(r),new Error(r)}function ft(a,t,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,a||s0(t,l,r)}function Gb(a,t){a||at(57014,t)}function it(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Ab{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Hb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Qe.UNAUTHENTICATED)))}shutdown(){}}class Qb{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Kb{constructor(t){this.t=t,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ft(this.o===void 0,42304);let r=this.i;const l=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new en;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new en,t.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},m=g=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new en)}}),0),h()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new a0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string",2055,{h:t}),new Qe(t)}}class Yb{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Xb{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Yb(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Qe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class TT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zb{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Eb(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ft(this.o===void 0,3512);const r=u=>{u.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,W("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const l=u=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new TT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new TT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<a;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=Jb(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=t.charAt(l[u]%62))}return r}}function Et(a,t){return a<t?-1:a>t?1:0}function rg(a,t){const n=Math.min(a.length,t.length);for(let r=0;r<n;r++){const l=a.charAt(r),u=t.charAt(r);if(l!==u)return Ym(l)===Ym(u)?Et(l,u):Ym(l)?1:-1}return Et(a.length,t.length)}const $b=55296,Wb=57343;function Ym(a){const t=a.charCodeAt(0);return t>=$b&&t<=Wb}function Dl(a,t,n){return a.length===t.length&&a.every(((r,l)=>n(r,t[l])))}function l0(a){return a+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="__name__";class Li{constructor(t,n,r){n===void 0?n=0:n>t.length&&at(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&at(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Li.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Li?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let l=0;l<r;l++){const u=Li.compareSegments(t.get(l),n.get(l));if(u!==0)return u}return Et(t.length,n.length)}static compareSegments(t,n){const r=Li.isNumericId(t),l=Li.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Li.extractNumericId(t).compare(Li.extractNumericId(n)):rg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return rs.fromString(t.substring(4,t.length-2))}}class xt extends Li{construct(t,n,r){return new xt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new xt(n)}static emptyPath(){return new xt([])}}const tI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class de extends Li{construct(t,n,r){return new de(t,n,r)}static isValidIdentifier(t){return tI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),de.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ET}static keyField(){return new de([ET])}static fromServerFormat(t){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;l<t.length;){const m=t[l];if(m==="\\"){if(l+1===t.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,l+=2}else m==="`"?(h=!h,l++):m!=="."||h?(r+=m,l++):(u(),l++)}if(u(),h)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new de(n)}static emptyPath(){return new de([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.path=t}static fromPath(t){return new nt(xt.fromString(t))}static fromName(t){return new nt(xt.fromString(t).popFirst(5))}static empty(){return new nt(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return xt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new xt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(a,t,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function o0(a,t,n,r){if(t===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function AT(a){if(!nt.isDocumentKey(a))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function ST(a){if(nt.isDocumentKey(a))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function u0(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function vf(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":at(12329,{type:typeof a})}function kt(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vf(a);throw new Z(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return a}function c0(a,t){if(t<=0)throw new Z(F.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(a,t){const n={typeString:a};return t&&(n.value=t),n}function Qu(a,t){if(!u0(a))throw new Z(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const l=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in a)){n=`JSON missing required field: '${r}'`;break}const h=a[r];if(l&&typeof h!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new Z(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=-62135596800,bT=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(t){return Gt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*bT);return new Gt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<wT)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bT}_compareTo(t){return this.seconds===t.seconds?Et(this.nanoseconds,t.nanoseconds):Et(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qu(t,Gt._jsonSchema))return new Gt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-wT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:Pe("string",Gt._jsonSchemaVersion),seconds:Pe("number"),nanoseconds:Pe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static fromTimestamp(t){return new gt(t)}static min(){return new gt(new Gt(0,0))}static max(){return new gt(new Gt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;class ef{constructor(t,n,r,l){this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=l}}function sg(a){return a.fields.find((t=>t.kind===2))}function $s(a){return a.fields.filter((t=>t.kind!==2))}ef.UNKNOWN_ID=-1;class Gh{constructor(t,n){this.fieldPath=t,this.kind=n}}class Du{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new Du(0,zn.min())}}function h0(a,t){const n=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,l=gt.fromTimestamp(r===1e9?new Gt(n+1,0):new Gt(n,r));return new zn(l,nt.empty(),t)}function f0(a){return new zn(a.readTime,a.key,Cl)}class zn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new zn(gt.min(),nt.empty(),Cl)}static max(){return new zn(gt.max(),nt.empty(),Cl)}}function Ug(a,t){let n=a.readTime.compareTo(t.readTime);return n!==0?n:(n=nt.comparator(a.documentKey,t.documentKey),n!==0?n:Et(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ms(a){if(a.code!==F.FAILED_PRECONDITION||a.message!==d0)throw a;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new z(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):z.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):z.reject(n)}static resolve(t){return new z(((n,r)=>{n(t)}))}static reject(t){return new z(((n,r)=>{r(t)}))}static waitFor(t){return new z(((n,r)=>{let l=0,u=0,h=!1;t.forEach((m=>{++l,m.next((()=>{++u,h&&u===l&&n()}),(g=>r(g)))})),h=!0,u===l&&n()}))}static or(t){let n=z.resolve(!1);for(const r of t)n=n.next((l=>l?z.resolve(l):r()));return n}static forEach(t,n){const r=[];return t.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(t,n){return new z(((r,l)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;n(t[_]).next((T=>{h[_]=T,++m,m===u&&r(h)}),(T=>l(T)))}}))}static doWhile(t,n){return new z(((r,l)=>{const u=()=>{t()===!0?n().next((()=>{u()}),l):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="SimpleDb";class Tf{static open(t,n,r,l){try{return new Tf(n,t.transaction(l,r))}catch(u){throw new Tu(n,u)}}constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.S=new en,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Tu(t,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const l=Lg(r.target.error);this.S.reject(new Tu(t,l))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(W(Pn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new nI(n)}}class Fi{static delete(t){return W(Pn,"Removing database:",t),ta(Ib().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!Rb())return!1;if(Fi.F())return!0;const t=tf(),n=Fi.M(t),r=0<n&&n<10,l=g0(t),u=0<l&&l<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,n){return t.store(n)}static M(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,n,r){this.name=t,this.version=n,this.N=r,this.B=null,Fi.M(tf())===12.2&&Ae("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(W(Pn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const l=indexedDB.open(this.name,this.version);l.onsuccess=u=>{const h=u.target.result;n(h)},l.onblocked=()=>{r(new Tu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new Z(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new Z(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new Tu(t,h))},l.onupgradeneeded=u=>{W(Pn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.N.k(h,l.transaction,u.oldVersion,this.version).next((()=>{W(Pn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(t){this.K=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,l){const u=n==="readonly";let h=0;for(;;){++h;try{this.db=await this.L(t);const m=Tf.open(this.db,t,u?"readonly":"readwrite",r),g=l(m).next((_=>(m.C(),_))).catch((_=>(m.abort(_),z.reject(_)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,_=g.name!=="FirebaseError"&&h<3;if(W(Pn,"Transaction failed with error:",g.message,"Retrying:",_),this.close(),!_)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function g0(a){const t=a.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class eI{constructor(t){this.U=t,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(t){this.U=t}done(){this.$=!0}j(t){this.W=t}delete(){return ta(this.U.delete())}}class Tu extends Z{constructor(t,n){super(F.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function gs(a){return a.name==="IndexedDbTransactionError"}class nI{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(W(Pn,"PUT",this.store.name,t,n),r=this.store.put(n,t)):(W(Pn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ta(r)}add(t){return W(Pn,"ADD",this.store.name,t,t),ta(this.store.add(t))}get(t){return ta(this.store.get(t)).next((n=>(n===void 0&&(n=null),W(Pn,"GET",this.store.name,t,n),n)))}delete(t){return W(Pn,"DELETE",this.store.name,t),ta(this.store.delete(t))}count(){return W(Pn,"COUNT",this.store.name),ta(this.store.count())}H(t,n){const r=this.options(t,n),l=r.index?this.store.index(r.index):this.store;if(typeof l.getAll=="function"){const u=l.getAll(r.range);return new z(((h,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{h(g.target.result)}}))}{const u=this.cursor(r),h=[];return this.J(u,((m,g)=>{h.push(g)})).next((()=>h))}}Z(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new z(((l,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{l(h.target.result)}}))}X(t,n){W(Pn,"DELETE ALL",this.store.name);const r=this.options(t,n);r.Y=!1;const l=this.cursor(r);return this.J(l,((u,h,m)=>m.delete()))}ee(t,n){let r;n?r=t:(r={},n=t);const l=this.cursor(r);return this.J(l,n)}te(t){const n=this.cursor({});return new z(((r,l)=>{n.onerror=u=>{const h=Lg(u.target.error);l(h)},n.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next((m=>{m?h.continue():r()})):r()}}))}J(t,n){const r=[];return new z(((l,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void l();const g=new eI(m),_=n(m.primaryKey,m.value,g);if(_ instanceof z){const T=_.catch((A=>(g.done(),z.reject(A))));r.push(T)}g.isDone?l():g.G===null?m.continue():m.continue(g.G)}})).next((()=>z.waitFor(r)))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.Y?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function ta(a){return new z(((t,n)=>{a.onsuccess=r=>{const l=r.target.result;t(l)},a.onerror=r=>{const l=Lg(r.target.error);n(l)}}))}let IT=!1;function Lg(a){const t=Fi.M(tf());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(n)>=0){const r=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IT||(IT=!0,setTimeout((()=>{throw r}),0)),r}}return a}const Eu="IndexBackfiller";class iI{constructor(t,n){this.asyncQueue=t,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){W(Eu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const n=await this.ne.ie();W(Eu,`Documents written: ${n}`)}catch(n){gs(n)?W(Eu,"Ignoring IndexedDB error during index backfill: ",n):await ms(n)}await this.re(6e4)}))}}class rI{constructor(t,n){this.localStore=t,this.persistence=n}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,t)))}se(t,n){const r=new Set;let l=n,u=!0;return z.doWhile((()=>u===!0&&l>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((h=>{if(h!==null&&!r.has(h))return W(Eu,`Processing collection: ${h}`),this.oe(t,h,l).next((m=>{l-=m,r.add(h)}));u=!1})))).next((()=>n-l))}oe(t,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next((l=>this.localStore.localDocuments.getNextDocuments(t,n,l,r).next((u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next((()=>this._e(l,u))).next((m=>(W(Eu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,n,m)))).next((()=>h.size))}))))}_e(t,n){let r=t;return n.changes.forEach(((l,u)=>{const h=f0(u);Ug(h,r)>0&&(r=h)})),new zn(r.readTime,r.documentKey,Math.max(n.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Sn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=-1;function Ku(a){return a==null}function Cu(a){return a===0&&1/a==-1/0}function p0(a){return typeof a=="number"&&Number.isInteger(a)&&!Cu(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="";function ln(a){let t="";for(let n=0;n<a.length;n++)t.length>0&&(t=RT(t)),t=sI(a.get(n),t);return RT(t)}function sI(a,t){let n=t;const r=a.length;for(let l=0;l<r;l++){const u=a.charAt(l);switch(u){case"\0":n+="";break;case nf:n+="";break;default:n+=u}}return n}function RT(a){return a+nf+""}function Bi(a){const t=a.length;if(ft(t>=2,64408,{path:a}),t===2)return ft(a.charAt(0)===nf&&a.charAt(1)==="",56145,{path:a}),xt.emptyPath();const n=t-2,r=[];let l="";for(let u=0;u<t;){const h=a.indexOf(nf,u);switch((h<0||h>n)&&at(50515,{path:a}),a.charAt(h+1)){case"":const m=a.substring(u,h);let g;l.length===0?g=m:(l+=m,g=l,l=""),r.push(g);break;case"":l+=a.substring(u,h),l+="\0";break;case"":l+=a.substring(u,h+1);break;default:at(61167,{path:a})}u=h+2}return new xt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="remoteDocuments",Yu="owner",ml="owner",xu="mutationQueues",aI="userId",ci="mutations",VT="batchId",sa="userMutationsIndex",DT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(a,t){return[a,ln(t)]}function _0(a,t,n){return[a,ln(t),n]}const lI={},xl="documentMutations",rf="remoteDocumentsV14",oI=["prefixPath","collectionGroup","readTime","documentId"],Qh="documentKeyIndex",uI=["prefixPath","collectionGroup","documentId"],y0="collectionGroupIndex",cI=["collectionGroup","readTime","prefixPath","documentId"],Nu="remoteDocumentGlobal",ag="remoteDocumentGlobalKey",Nl="targets",v0="queryTargetsIndex",hI=["canonicalId","targetId"],Ml="targetDocuments",fI=["targetId","path"],qg="documentTargetsIndex",dI=["path","targetId"],sf="targetGlobalKey",oa="targetGlobal",Mu="collectionParents",mI=["collectionId","parent"],Ol="clientMetadata",gI="clientId",Ef="bundles",pI="bundleId",Af="namedQueries",_I="name",Bg="indexConfiguration",yI="indexId",lg="collectionGroupIndex",vI="collectionGroup",Au="indexState",TI=["indexId","uid"],T0="sequenceNumberIndex",EI=["uid","sequenceNumber"],Su="indexEntries",AI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],E0="documentKeyIndex",SI=["indexId","uid","orderedDocumentKey"],Sf="documentOverlays",wI=["userId","collectionPath","documentId"],og="collectionPathOverlayIndex",bI=["userId","collectionPath","largestBatchId"],A0="collectionGroupOverlayIndex",II=["userId","collectionGroup","largestBatchId"],kg="globals",RI="name",S0=[xu,ci,xl,Ws,Nl,Yu,oa,Ml,Ol,Nu,Mu,Ef,Af],VI=[...S0,Sf],w0=[xu,ci,xl,rf,Nl,Yu,oa,Ml,Ol,Nu,Mu,Ef,Af,Sf],b0=w0,Fg=[...b0,Bg,Au,Su],DI=Fg,I0=[...Fg,kg],CI=I0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends m0{constructor(t,n){super(),this.le=t,this.currentSequenceNumber=n}}function ke(a,t){const n=it(a);return Fi.O(n.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(a){let t=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t++;return t}function ps(a,t){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t(n,a[n])}function R0(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,n){this.comparator=t,this.root=n||We.EMPTY}insert(t,n){return new re(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(t){return new re(this.comparator,this.root.remove(t,this.comparator).copy(null,null,We.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Uh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Uh(this.root,t,this.comparator,!0)}}class Uh{constructor(t,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class We{constructor(t,n,r,l,u){this.key=t,this.value=n,this.color=r??We.RED,this.left=l??We.EMPTY,this.right=u??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,l,u){return new We(t??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let l=this;const u=r(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return We.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw at(27949);return t+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(t,n,r,l,u){return this}insert(t,n,r){return new We(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new re(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new xT(this.data.getIterator())}getIteratorFrom(t){return new xT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Zt(this.comparator);return n.data=t,n}}class xT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gl(a){return a.hasNext()?a.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.fields=t,t.sort(de.comparator)}static empty(){return new wn([])}unionWith(t){let n=new Zt(de.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new wn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Dl(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new V0("Invalid base64 string: "+u):u}})(t);return new _e(n)}static fromUint8Array(t){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(t);return new _e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Et(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_e.EMPTY_BYTE_STRING=new _e("");const NI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(a){if(ft(!!a,39018),typeof a=="string"){let t=0;const n=NI.exec(a);if(ft(!!n,46558,{timestamp:a}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fe(a.seconds),nanos:fe(a.nanos)}}function fe(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function dr(a){return typeof a=="string"?_e.fromBase64String(a):_e.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="server_timestamp",C0="__type__",x0="__previous_value__",N0="__local_write_time__";function wf(a){var n,r;return((r=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[C0])==null?void 0:r.stringValue)===D0}function bf(a){const t=a.mapValue.fields[x0];return wf(t)?bf(t):t}function Ou(a){const t=fr(a.mapValue.fields[N0].timestampValue);return new Gt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t,n,r,l,u,h,m,g,_,T,A){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=T,this.apiKey=A}}const cg="(default)";class os{constructor(t,n){this.projectId=t,this.database=n||cg}static empty(){return new os("","")}get isDefaultDatabase(){return this.database===cg}isEqual(t){return t instanceof os&&t.projectId===this.projectId&&t.database===this.database}}function OI(a,t){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new os(a.options.projectId,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="__type__",M0="__max__",ns={mapValue:{fields:{__type__:{stringValue:M0}}}},Gg="__vector__",Pl="value",Kh={nullValue:"NULL_VALUE"};function us(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?wf(a)?4:O0(a)?9007199254740991:If(a)?10:11:at(28295,{value:a})}function Gi(a,t){if(a===t)return!0;const n=us(a);if(n!==us(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return Ou(a).isEqual(Ou(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=fr(l.timestampValue),m=fr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(a,t);case 5:return a.stringValue===t.stringValue;case 6:return(function(l,u){return dr(l.bytesValue).isEqual(dr(u.bytesValue))})(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return(function(l,u){return fe(l.geoPointValue.latitude)===fe(u.geoPointValue.latitude)&&fe(l.geoPointValue.longitude)===fe(u.geoPointValue.longitude)})(a,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return fe(l.integerValue)===fe(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=fe(l.doubleValue),m=fe(u.doubleValue);return h===m?Cu(h)===Cu(m):isNaN(h)&&isNaN(m)}return!1})(a,t);case 9:return Dl(a.arrayValue.values||[],t.arrayValue.values||[],Gi);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},m=u.mapValue.fields||{};if(CT(h)!==CT(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Gi(h[g],m[g])))return!1;return!0})(a,t);default:return at(52216,{left:a})}}function Pu(a,t){return(a.values||[]).find((n=>Gi(n,t)))!==void 0}function cs(a,t){if(a===t)return 0;const n=us(a),r=us(t);if(n!==r)return Et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Et(a.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=fe(u.integerValue||u.doubleValue),g=fe(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(a,t);case 3:return NT(a.timestampValue,t.timestampValue);case 4:return NT(Ou(a),Ou(t));case 5:return rg(a.stringValue,t.stringValue);case 6:return(function(u,h){const m=dr(u),g=dr(h);return m.compareTo(g)})(a.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const T=Et(m[_],g[_]);if(T!==0)return T}return Et(m.length,g.length)})(a.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=Et(fe(u.latitude),fe(h.latitude));return m!==0?m:Et(fe(u.longitude),fe(h.longitude))})(a.geoPointValue,t.geoPointValue);case 9:return MT(a.arrayValue,t.arrayValue);case 10:return(function(u,h){var b,B,J,$;const m=u.fields||{},g=h.fields||{},_=(b=m[Pl])==null?void 0:b.arrayValue,T=(B=g[Pl])==null?void 0:B.arrayValue,A=Et(((J=_==null?void 0:_.values)==null?void 0:J.length)||0,(($=T==null?void 0:T.values)==null?void 0:$.length)||0);return A!==0?A:MT(_,T)})(a.mapValue,t.mapValue);case 11:return(function(u,h){if(u===ns.mapValue&&h===ns.mapValue)return 0;if(u===ns.mapValue)return 1;if(h===ns.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},T=Object.keys(_);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const b=rg(g[A],T[A]);if(b!==0)return b;const B=cs(m[g[A]],_[T[A]]);if(B!==0)return B}return Et(g.length,T.length)})(a.mapValue,t.mapValue);default:throw at(23264,{he:n})}}function NT(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return Et(a,t);const n=fr(a),r=fr(t),l=Et(n.seconds,r.seconds);return l!==0?l:Et(n.nanos,r.nanos)}function MT(a,t){const n=a.values||[],r=t.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=cs(n[l],r[l]);if(u)return u}return Et(n.length,r.length)}function zl(a){return hg(a)}function hg(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return dr(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return nt.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=hg(u);return r+"]"})(a.arrayValue):"mapValue"in a?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of r)u?u=!1:l+=",",l+=`${h}:${hg(n.fields[h])}`;return l+"}"})(a.mapValue):at(61005,{value:a})}function Yh(a){switch(us(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bf(a);return t?16+Yh(t):16;case 5:return 2*a.stringValue.length;case 6:return dr(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+Yh(u)),0)})(a.arrayValue);case 10:case 11:return(function(r){let l=0;return ps(r.fields,((u,h)=>{l+=u.length+Yh(h)})),l})(a.mapValue);default:throw at(13486,{value:a})}}function ua(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function fg(a){return!!a&&"integerValue"in a}function zu(a){return!!a&&"arrayValue"in a}function OT(a){return!!a&&"nullValue"in a}function PT(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Xh(a){return!!a&&"mapValue"in a}function If(a){var n,r;return((r=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[jg])==null?void 0:r.stringValue)===Gg}function wu(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const t={mapValue:{fields:{}}};return ps(a.mapValue.fields,((n,r)=>t.mapValue.fields[n]=wu(r))),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=wu(a.arrayValue.values[n]);return t}return{...a}}function O0(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===M0}const P0={mapValue:{fields:{[jg]:{stringValue:Gg},[Pl]:{arrayValue:{}}}}};function PI(a){return"nullValue"in a?Kh:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?ua(os.empty(),nt.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?If(a)?P0:{mapValue:{}}:at(35942,{value:a})}function zI(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?ua(os.empty(),nt.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?P0:"mapValue"in a?If(a)?{mapValue:{}}:ns:at(61959,{value:a})}function zT(a,t){const n=cs(a.value,t.value);return n!==0?n:a.inclusive&&!t.inclusive?-1:!a.inclusive&&t.inclusive?1:0}function UT(a,t){const n=cs(a.value,t.value);return n!==0?n:a.inclusive&&!t.inclusive?1:!a.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.value=t}static empty(){return new tn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Xh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=wu(n)}setAll(t){let n=de.emptyPath(),r={},l=[];t.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,l),r={},l=[],n=m.popLast()}h?r[m.lastSegment()]=wu(h):l.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(t){const n=this.field(t.popLast());Xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Gi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=n.mapValue.fields[t.get(r)];Xh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,r){ps(n,((l,u)=>t[l]=u));for(const l of r)delete t[l]}clone(){return new tn(wu(this.value))}}function z0(a){const t=[];return ps(a.fields,((n,r)=>{const l=new de([n]);if(Xh(r)){const u=z0(r.mapValue).fields;if(u.length===0)t.push(l);else for(const h of u)t.push(l.child(h))}else t.push(l)})),new wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t,n,r,l,u,h,m){this.key=t,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new le(t,0,gt.min(),gt.min(),gt.min(),tn.empty(),0)}static newFoundDocument(t,n,r,l){return new le(t,1,n,gt.min(),r,l,0)}static newNoDocument(t,n){return new le(t,2,n,gt.min(),gt.min(),tn.empty(),0)}static newUnknownDocument(t,n){return new le(t,3,n,gt.min(),gt.min(),tn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof le&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new le(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t,n){this.position=t,this.inclusive=n}}function LT(a,t,n){let r=0;for(let l=0;l<a.position.length;l++){const u=t[l],h=a.position[l];if(u.field.isKeyField()?r=nt.comparator(nt.fromName(h.referenceValue),n.key):r=cs(h,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function qT(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Gi(a.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(t,n="asc"){this.field=t,this.dir=n}}function UI(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{}class Ot extends U0{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new LI(t,n,r):n==="array-contains"?new kI(t,r):n==="in"?new j0(t,r):n==="not-in"?new FI(t,r):n==="array-contains-any"?new jI(t,r):new Ot(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new qI(t,r):new BI(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cs(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(cs(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends U0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Xt(t,n)}matches(t){return Ul(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ul(a){return a.op==="and"}function dg(a){return a.op==="or"}function Hg(a){return L0(a)&&Ul(a)}function L0(a){for(const t of a.filters)if(t instanceof Xt)return!1;return!0}function mg(a){if(a instanceof Ot)return a.field.canonicalString()+a.op.toString()+zl(a.value);if(Hg(a))return a.filters.map((t=>mg(t))).join(",");{const t=a.filters.map((n=>mg(n))).join(",");return`${a.op}(${t})`}}function q0(a,t){return a instanceof Ot?(function(r,l){return l instanceof Ot&&r.op===l.op&&r.field.isEqual(l.field)&&Gi(r.value,l.value)})(a,t):a instanceof Xt?(function(r,l){return l instanceof Xt&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,h,m)=>u&&q0(h,l.filters[m])),!0):!1})(a,t):void at(19439)}function B0(a,t){const n=a.filters.concat(t);return Xt.create(n,a.op)}function k0(a){return a instanceof Ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${zl(n.value)}`})(a):a instanceof Xt?(function(n){return n.op.toString()+" {"+n.getFilters().map(k0).join(" ,")+"}"})(a):"Filter"}class LI extends Ot{constructor(t,n,r){super(t,n,r),this.key=nt.fromName(r.referenceValue)}matches(t){const n=nt.comparator(t.key,this.key);return this.matchesComparison(n)}}class qI extends Ot{constructor(t,n){super(t,"in",n),this.keys=F0("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class BI extends Ot{constructor(t,n){super(t,"not-in",n),this.keys=F0("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function F0(a,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>nt.fromName(r.referenceValue)))}class kI extends Ot{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return zu(n)&&Pu(n.arrayValue,this.value)}}class j0 extends Ot{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Pu(this.value.arrayValue,n)}}class FI extends Ot{constructor(t,n){super(t,"not-in",n)}matches(t){if(Pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pu(this.value.arrayValue,n)}}class jI extends Ot{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!zu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Pu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t,n=null,r=[],l=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function gg(a,t=null,n=[],r=[],l=null,u=null,h=null){return new GI(a,t,n,r,l,u,h)}function ca(a){const t=it(a);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>mg(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Ku(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>zl(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>zl(r))).join(",")),t.Te=n}return t.Te}function Xu(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!UI(a.orderBy[n],t.orderBy[n]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!q0(a.filters[n],t.filters[n]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!qT(a.startAt,t.startAt)&&qT(a.endAt,t.endAt)}function af(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}function lf(a,t){return a.filters.filter((n=>n instanceof Ot&&n.field.isEqual(t)))}function BT(a,t,n){let r=Kh,l=!0;for(const u of lf(a,t)){let h=Kh,m=!0;switch(u.op){case"<":case"<=":h=PI(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Kh}zT({value:r,inclusive:l},{value:h,inclusive:m})<0&&(r=h,l=m)}if(n!==null){for(let u=0;u<a.orderBy.length;++u)if(a.orderBy[u].field.isEqual(t)){const h=n.position[u];zT({value:r,inclusive:l},{value:h,inclusive:n.inclusive})<0&&(r=h,l=n.inclusive);break}}return{value:r,inclusive:l}}function kT(a,t,n){let r=ns,l=!0;for(const u of lf(a,t)){let h=ns,m=!0;switch(u.op){case">=":case">":h=zI(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=ns}UT({value:r,inclusive:l},{value:h,inclusive:m})>0&&(r=h,l=m)}if(n!==null){for(let u=0;u<a.orderBy.length;++u)if(a.orderBy[u].field.isEqual(t)){const h=n.position[u];UT({value:r,inclusive:l},{value:h,inclusive:n.inclusive})>0&&(r=h,l=n.inclusive);break}}return{value:r,inclusive:l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t,n=null,r=[],l=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function G0(a,t,n,r,l,u,h,m){return new mr(a,t,n,r,l,u,h,m)}function Xl(a){return new mr(a)}function FT(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function HI(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}function Qg(a){return a.collectionGroup!==null}function bl(a){const t=it(a);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Zt(de.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Uu(u,r))})),n.has(de.keyField().canonicalString())||t.Ie.push(new Uu(de.keyField(),r))}return t.Ie}function mn(a){const t=it(a);return t.Ee||(t.Ee=QI(t,bl(a))),t.Ee}function QI(a,t){if(a.limitType==="F")return gg(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Uu(l.field,u)}));const n=a.endAt?new hs(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new hs(a.startAt.position,a.startAt.inclusive):null;return gg(a.path,a.collectionGroup,t,a.filters,a.limit,n,r)}}function pg(a,t){const n=a.filters.concat([t]);return new mr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function KI(a,t){const n=a.explicitOrderBy.concat([t]);return new mr(a.path,a.collectionGroup,n,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}function of(a,t,n){return new mr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,n,a.startAt,a.endAt)}function YI(a,t){return new mr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,t,a.endAt)}function XI(a,t){return new mr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,t)}function Zu(a,t){return Xu(mn(a),mn(t))&&a.limitType===t.limitType}function H0(a){return`${ca(mn(a))}|lt:${a.limitType}`}function El(a){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>k0(l))).join(", ")}]`),Ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>zl(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>zl(l))).join(",")),`Target(${r})`})(mn(a))}; limitType=${a.limitType})`}function Ju(a,t){return t.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):nt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(a,t)&&(function(r,l){for(const u of bl(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(a,t)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(a,t)&&(function(r,l){return!(r.startAt&&!(function(h,m,g){const _=LT(h,m,g);return h.inclusive?_<=0:_<0})(r.startAt,bl(r),l)||r.endAt&&!(function(h,m,g){const _=LT(h,m,g);return h.inclusive?_>=0:_>0})(r.endAt,bl(r),l))})(a,t)}function Q0(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function K0(a){return(t,n)=>{let r=!1;for(const l of bl(a)){const u=ZI(l,t,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function ZI(a,t,n){const r=a.field.isKeyField()?nt.comparator(t.key,n.key):(function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?cs(g,_):at(42886)})(a.field,t,n);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return at(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){ps(this.inner,((n,r)=>{for(const[l,u]of r)t(l,u)}))}isEmpty(){return R0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new re(nt.comparator);function bn(){return JI}const Y0=new re(nt.comparator);function pu(...a){let t=Y0;for(const n of a)t=t.insert(n.key,n);return t}function X0(a){let t=Y0;return a.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function ki(){return bu()}function Z0(){return bu()}function bu(){return new gr((a=>a.toString()),((a,t)=>a.isEqual(t)))}const $I=new re(nt.comparator),WI=new Zt(nt.comparator);function bt(...a){let t=WI;for(const n of a)t=t.add(n);return t}const tR=new Zt(Et);function Kg(){return tR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(t)?"-0":t}}function J0(a){return{integerValue:""+a}}function $0(a,t){return p0(t)?J0(t):Yg(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this._=void 0}}function eR(a,t,n){return a instanceof Ll?(function(l,u){const h={fields:{[C0]:{stringValue:D0},[N0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&wf(u)&&(u=bf(u)),u&&(h.fields[x0]=u),{mapValue:h}})(n,t):a instanceof ha?tA(a,t):a instanceof fa?eA(a,t):(function(l,u){const h=W0(l,u),m=jT(h)+jT(l.Ae);return fg(h)&&fg(l.Ae)?J0(m):Yg(l.serializer,m)})(a,t)}function nR(a,t,n){return a instanceof ha?tA(a,t):a instanceof fa?eA(a,t):n}function W0(a,t){return a instanceof ql?(function(r){return fg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class Ll extends Rf{}class ha extends Rf{constructor(t){super(),this.elements=t}}function tA(a,t){const n=nA(t);for(const r of a.elements)n.some((l=>Gi(l,r)))||n.push(r);return{arrayValue:{values:n}}}class fa extends Rf{constructor(t){super(),this.elements=t}}function eA(a,t){let n=nA(t);for(const r of a.elements)n=n.filter((l=>!Gi(l,r)));return{arrayValue:{values:n}}}class ql extends Rf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function jT(a){return fe(a.integerValue||a.doubleValue)}function nA(a){return zu(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(t,n){this.field=t,this.transform=n}}function iR(a,t){return a.field.isEqual(t.field)&&(function(r,l){return r instanceof ha&&l instanceof ha||r instanceof fa&&l instanceof fa?Dl(r.elements,l.elements,Gi):r instanceof ql&&l instanceof ql?Gi(r.Ae,l.Ae):r instanceof Ll&&l instanceof Ll})(a.transform,t.transform)}class rR{constructor(t,n){this.version=t,this.transformResults=n}}class me{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new me}static exists(t){return new me(void 0,t)}static updateTime(t){return new me(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zh(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class Vf{}function iA(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new Jl(a.key,me.none()):new Zl(a.key,a.data,me.none());{const n=a.data,r=tn.empty();let l=new Zt(de.comparator);for(let u of t.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?r.delete(u):r.set(u,h),l=l.add(u)}return new pr(a.key,r,new wn(l.toArray()),me.none())}}function sR(a,t,n){a instanceof Zl?(function(l,u,h){const m=l.value.clone(),g=HT(l.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(a,t,n):a instanceof pr?(function(l,u,h){if(!Zh(l.precondition,u))return void u.convertToUnknownDocument(h.version);const m=HT(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(rA(l)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(a,t,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,n)}function Iu(a,t,n,r){return a instanceof Zl?(function(u,h,m,g){if(!Zh(u.precondition,h))return m;const _=u.value.clone(),T=QT(u.fieldTransforms,g,h);return _.setAll(T),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(a,t,n,r):a instanceof pr?(function(u,h,m,g){if(!Zh(u.precondition,h))return m;const _=QT(u.fieldTransforms,g,h),T=h.data;return T.setAll(rA(u)),T.setAll(_),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(a,t,n,r):(function(u,h,m){return Zh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(a,t,n)}function aR(a,t){let n=null;for(const r of a.fieldTransforms){const l=t.data.field(r.field),u=W0(r.transform,l||null);u!=null&&(n===null&&(n=tn.empty()),n.set(r.field,u))}return n||null}function GT(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Dl(r,l,((u,h)=>iR(u,h)))})(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Zl extends Vf{constructor(t,n,r,l=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class pr extends Vf{constructor(t,n,r,l,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function rA(a){const t=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=a.data.field(n);t.set(n,r)}})),t}function HT(a,t,n){const r=new Map;ft(a.length===n.length,32656,{Ve:n.length,de:a.length});for(let l=0;l<n.length;l++){const u=a[l],h=u.transform,m=t.data.field(u.field);r.set(u.field,nR(h,m,n[l]))}return r}function QT(a,t,n){const r=new Map;for(const l of a){const u=l.transform,h=n.data.field(l.field);r.set(l.field,eR(u,h,t))}return r}class Jl extends Vf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xg extends Vf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(t,n,r,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&sR(u,t,r[l])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Iu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Iu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Z0();return this.mutations.forEach((l=>{const u=t.get(l.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(l.key)?null:m;const g=iA(h,m);g!==null&&r.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(gt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),bt())}isEqual(t){return this.batchId===t.batchId&&Dl(this.mutations,t.mutations,((n,r)=>GT(n,r)))&&Dl(this.baseMutations,t.baseMutations,((n,r)=>GT(n,r)))}}class Jg{constructor(t,n,r,l){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(t,n,r){ft(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=(function(){return $I})();const u=t.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,r[h].version);return new Jg(t,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,Ut;function sA(a){switch(a){case F.OK:return at(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return at(15467,{code:a})}}function aA(a){if(a===void 0)return Ae("GRPC error has no .code"),F.UNKNOWN;switch(a){case Oe.OK:return F.OK;case Oe.CANCELLED:return F.CANCELLED;case Oe.UNKNOWN:return F.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return F.INTERNAL;case Oe.UNAVAILABLE:return F.UNAVAILABLE;case Oe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Oe.NOT_FOUND:return F.NOT_FOUND;case Oe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Oe.ABORTED:return F.ABORTED;case Oe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Oe.DATA_LOSS:return F.DATA_LOSS;default:return at(39323,{code:a})}}(Ut=Oe||(Oe={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new rs([4294967295,4294967295],0);function KT(a){const t=lA().encode(a),n=new WE;return n.update(t),new Uint8Array(n.digest())}function YT(a){const t=new DataView(a.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new rs([n,r],0),new rs([l,u],0)]}class Wg{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _u(`Invalid padding: ${n}`);if(r<0)throw new _u(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new _u(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=rs.fromNumber(this.ge)}ye(t,n,r){let l=t.add(n.multiply(rs.fromNumber(r)));return l.compare(oR)===1&&(l=new rs([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=KT(t),[r,l]=YT(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,l,u);if(!this.we(h))return!1}return!0}static create(t,n,r){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Wg(u,l,n);return r.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const n=KT(t),[r,l]=YT(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,l,u);this.be(h)}}be(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(t,n,r,l,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const l=new Map;return l.set(t,tc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Wu(gt.min(),l,new re(Et),bn(),bt())}}class tc{constructor(t,n,r,l,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new tc(r,n,bt(),bt(),bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(t,n,r,l){this.Se=t,this.removedTargetIds=n,this.key=r,this.De=l}}class oA{constructor(t,n){this.targetId=t,this.Ce=n}}class uA{constructor(t,n,r=_e.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=l}}class XT{constructor(){this.ve=0,this.Fe=ZT(),this.Me=_e.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=bt(),n=bt(),r=bt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:at(38017,{changeType:u})}})),new tc(this.Me,this.xe,t,n,r)}Ke(){this.Oe=!1,this.Fe=ZT()}qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class uR{constructor(t){this.Ge=t,this.ze=new Map,this.je=bn(),this.He=Lh(),this.Je=Lh(),this.Ze=new re(Et)}Xe(t){for(const n of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(t.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:at(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,r=t.Ce.count,l=this.ot(n);if(l){const u=l.target;if(af(u))if(r===0){const h=new nt(u.path);this.et(n,h,le.newNoDocument(h,gt.min()))}else ft(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const m=this.ut(t),g=m?this.ct(m,t,h):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,_)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let h,m;try{h=dr(r).toUint8Array()}catch(g){if(g instanceof V0)return mi("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Wg(h,l,u)}catch(g){return mi(g instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&af(m.target)){const g=new nt(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,le.newNoDocument(g,t))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let r=bt();this.Je.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const l=new Wu(t,n,this.Ze,this.je,r);return this.je=bn(),this.He=Lh(),this.Je=Lh(),this.Ze=new re(Et),l}Ye(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(t)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(t)),this.Je=this.Je.insert(n,this.Rt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let n=this.ze.get(t);return n||(n=new XT,this.ze.set(t,n)),n}Rt(t){let n=this.Je.get(t);return n||(n=new Zt(Et),this.Je=this.Je.insert(t,n)),n}It(t){let n=this.He.get(t);return n||(n=new Zt(Et),this.He=this.He.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||W("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new XT),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Lh(){return new re(nt.comparator)}function ZT(){return new re(nt.comparator)}const cR={asc:"ASCENDING",desc:"DESCENDING"},hR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"};class dR{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _g(a,t){return a.useProto3Json||Ku(t)?t:{value:t}}function Bl(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cA(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function mR(a,t){return Bl(a,t.toTimestamp())}function Se(a){return ft(!!a,49232),gt.fromTimestamp((function(n){const r=fr(n);return new Gt(r.seconds,r.nanos)})(a))}function tp(a,t){return yg(a,t).canonicalString()}function yg(a,t){const n=(function(l){return new xt(["projects",l.projectId,"databases",l.database])})(a).child("documents");return t===void 0?n:n.child(t)}function hA(a){const t=xt.fromString(a);return ft(EA(t),10190,{key:t.toString()}),t}function Lu(a,t){return tp(a.databaseId,t.path)}function ji(a,t){const n=hA(t);if(n.get(1)!==a.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new nt(mA(n))}function fA(a,t){return tp(a.databaseId,t)}function dA(a){const t=hA(a);return t.length===4?xt.emptyPath():mA(t)}function vg(a){return new xt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function mA(a){return ft(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function JT(a,t,n){return{name:Lu(a,t),fields:n.value.mapValue.fields}}function gA(a,t,n){const r=ji(a,t.name),l=Se(t.updateTime),u=t.createTime?Se(t.createTime):gt.min(),h=new tn({mapValue:{fields:t.fields}}),m=le.newFoundDocument(r,l,u,h);return n&&m.setHasCommittedMutations(),n?m.setHasCommittedMutations():m}function gR(a,t){return"found"in t?(function(r,l){ft(!!l.found,43571),l.found.name,l.found.updateTime;const u=ji(r,l.found.name),h=Se(l.found.updateTime),m=l.found.createTime?Se(l.found.createTime):gt.min(),g=new tn({mapValue:{fields:l.found.fields}});return le.newFoundDocument(u,h,m,g)})(a,t):"missing"in t?(function(r,l){ft(!!l.missing,3894),ft(!!l.readTime,22933);const u=ji(r,l.missing),h=Se(l.readTime);return le.newNoDocument(u,h)})(a,t):at(7234,{result:t})}function pR(a,t){let n;if("targetChange"in t){t.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:at(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(_,T){return _.useProto3Json?(ft(T===void 0||typeof T=="string",58123),_e.fromBase64String(T||"")):(ft(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),_e.fromUint8Array(T||new Uint8Array))})(a,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(_){const T=_.code===void 0?F.UNKNOWN:aA(_.code);return new Z(T,_.message||"")})(h);n=new uA(r,l,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=ji(a,r.document.name),u=Se(r.document.updateTime),h=r.document.createTime?Se(r.document.createTime):gt.min(),m=new tn({mapValue:{fields:r.document.fields}}),g=le.newFoundDocument(l,u,h,m),_=r.targetIds||[],T=r.removedTargetIds||[];n=new Jh(_,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=ji(a,r.document),u=r.readTime?Se(r.readTime):gt.min(),h=le.newNoDocument(l,u),m=r.removedTargetIds||[];n=new Jh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=ji(a,r.document),u=r.removedTargetIds||[];n=new Jh([],u,l,null)}else{if(!("filter"in t))return at(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,h=new lR(l,u),m=r.targetId;n=new oA(m,h)}}return n}function qu(a,t){let n;if(t instanceof Zl)n={update:JT(a,t.key,t.value)};else if(t instanceof Jl)n={delete:Lu(a,t.key)};else if(t instanceof pr)n={update:JT(a,t.key,t.data),updateMask:AR(t.fieldMask)};else{if(!(t instanceof Xg))return at(16599,{dt:t.type});n={verify:Lu(a,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(u,h){const m=h.transform;if(m instanceof Ll)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ha)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ql)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw at(20930,{transform:h.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:mR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:at(27497)})(a,t.precondition)),n}function Tg(a,t){const n=t.currentDocument?(function(u){return u.updateTime!==void 0?me.updateTime(Se(u.updateTime)):u.exists!==void 0?me.exists(u.exists):me.none()})(t.currentDocument):me.none(),r=t.updateTransforms?t.updateTransforms.map((l=>(function(h,m){let g=null;if("setToServerValue"in m)ft(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new Ll;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];g=new ha(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];g=new fa(T)}else"increment"in m?g=new ql(h,m.increment):at(16584,{proto:m});const _=de.fromServerFormat(m.fieldPath);return new $u(_,g)})(a,l))):[];if(t.update){t.update.name;const l=ji(a,t.update.name),u=new tn({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=(function(g){const _=g.fieldPaths||[];return new wn(_.map((T=>de.fromServerFormat(T))))})(t.updateMask);return new pr(l,u,h,n,r)}return new Zl(l,u,n,r)}if(t.delete){const l=ji(a,t.delete);return new Jl(l,n)}if(t.verify){const l=ji(a,t.verify);return new Xg(l,n)}return at(1463,{proto:t})}function _R(a,t){return a&&a.length>0?(ft(t!==void 0,14353),a.map((n=>(function(l,u){let h=l.updateTime?Se(l.updateTime):Se(u);return h.isEqual(gt.min())&&(h=Se(u)),new rR(h,l.transformResults||[])})(n,t)))):[]}function pA(a,t){return{documents:[fA(a,t.path)]}}function _A(a,t){const n={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fA(a,l);const u=(function(_){if(_.length!==0)return TA(Xt.create(_,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((T=>(function(b){return{field:Al(b.field),direction:vR(b.dir)}})(T)))})(t.orderBy);h&&(n.structuredQuery.orderBy=h);const m=_g(a,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:n,parent:l}}function yA(a){let t=dA(a.parent);const n=a.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){ft(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let u=[];n.where&&(u=(function(A){const b=vA(A);return b instanceof Xt&&Hg(b)?b.getFilters():[b]})(n.where));let h=[];n.orderBy&&(h=(function(A){return A.map((b=>(function(J){return new Uu(Sl(J.field),(function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(b)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let b;return b=typeof A=="object"?A.value:A,Ku(b)?null:b})(n.limit));let g=null;n.startAt&&(g=(function(A){const b=!!A.before,B=A.values||[];return new hs(B,b)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const b=!A.before,B=A.values||[];return new hs(B,b)})(n.endAt)),G0(t,l,h,u,m,"F",g,_)}function yR(a,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function vA(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Sl(n.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Sl(n.unaryFilter.field);return Ot.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Sl(n.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Sl(n.unaryFilter.field);return Ot.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(a):a.fieldFilter!==void 0?(function(n){return Ot.create(Sl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return Xt.create(n.compositeFilter.filters.map((r=>vA(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(n.compositeFilter.op))})(a):at(30097,{filter:a})}function vR(a){return cR[a]}function TR(a){return hR[a]}function ER(a){return fR[a]}function Al(a){return{fieldPath:a.canonicalString()}}function Sl(a){return de.fromServerFormat(a.fieldPath)}function TA(a){return a instanceof Ot?(function(n){if(n.op==="=="){if(PT(n.value))return{unaryFilter:{field:Al(n.field),op:"IS_NAN"}};if(OT(n.value))return{unaryFilter:{field:Al(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PT(n.value))return{unaryFilter:{field:Al(n.field),op:"IS_NOT_NAN"}};if(OT(n.value))return{unaryFilter:{field:Al(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(n.field),op:TR(n.op),value:n.value}}})(a):a instanceof Xt?(function(n){const r=n.getFilters().map((l=>TA(l)));return r.length===1?r[0]:{compositeFilter:{op:ER(n.op),filters:r}}})(a):at(54877,{filter:a})}function AR(a){const t=[];return a.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function EA(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}function AA(a){return!!a&&typeof a._toProto=="function"&&a._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,n,r,l,u=gt.min(),h=gt.min(),m=_e.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new hr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(t){this.yt=t}}function SR(a,t){let n;if(t.document)n=gA(a.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=nt.fromSegments(t.noDocument.path),l=ma(t.noDocument.readTime);n=le.newNoDocument(r,l),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return at(56709);{const r=nt.fromSegments(t.unknownDocument.path),l=ma(t.unknownDocument.version);n=le.newUnknownDocument(r,l)}}return t.readTime&&n.setReadTime((function(l){const u=new Gt(l[0],l[1]);return gt.fromTimestamp(u)})(t.readTime)),n}function $T(a,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,h){return{name:Lu(u,h.key),fields:h.data.value.mapValue.fields,updateTime:Bl(u,h.version.toTimestamp()),createTime:Bl(u,h.createTime.toTimestamp())}})(a.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:da(t.version)};else{if(!t.isUnknownDocument())return at(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:da(t.version)}}return r}function uf(a){const t=a.toTimestamp();return[t.seconds,t.nanoseconds]}function da(a){const t=a.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ma(a){const t=new Gt(a.seconds,a.nanoseconds);return gt.fromTimestamp(t)}function ea(a,t){const n=(t.baseMutations||[]).map((u=>Tg(a.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>Tg(a.yt,u))),l=Gt.fromMillis(t.localWriteTimeMs);return new Zg(t.batchId,l,n,r)}function yu(a){const t=ma(a.readTime),n=a.lastLimboFreeSnapshotVersion!==void 0?ma(a.lastLimboFreeSnapshotVersion):gt.min();let r;return r=(function(u){return u.documents!==void 0})(a.query)?(function(u){const h=u.documents.length;return ft(h===1,1966,{count:h}),mn(Xl(dA(u.documents[0])))})(a.query):(function(u){return mn(yA(u))})(a.query),new hr(r,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,t,n,_e.fromBase64String(a.resumeToken))}function wA(a,t){const n=da(t.snapshotVersion),r=da(t.lastLimboFreeSnapshotVersion);let l;l=af(t.target)?pA(a.yt,t.target):_A(a.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ca(t.target),readTime:n,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:l}}function ep(a){const t=yA({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?of(t,t.limit,"L"):t}function Xm(a,t){return new $g(t.largestBatchId,Tg(a.yt,t.overlayMutation))}function WT(a,t){const n=t.path.lastSegment();return[a,ln(t.path.popLast()),n]}function tE(a,t,n,r){return{indexId:a,uid:t,sequenceNumber:n,readTime:da(r.readTime),documentKey:ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{getBundleMetadata(t,n){return eE(t).get(n).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:ma(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,n){return eE(t).put((function(l){return{bundleId:l.id,createTime:da(Se(l.createTime)),version:l.version}})(n))}getNamedQuery(t,n){return nE(t).get(n).next((r=>{if(r)return(function(u){return{name:u.name,query:ep(u.bundledQuery),readTime:ma(u.readTime)}})(r)}))}saveNamedQuery(t,n){return nE(t).put((function(l){return{name:l.name,readTime:da(Se(l.readTime)),bundledQuery:l.bundledQuery}})(n))}}function eE(a){return ke(a,Ef)}function nE(a){return ke(a,Af)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(t,n){this.serializer=t,this.userId=n}static wt(t,n){const r=n.uid||"";return new Df(t,r)}getOverlay(t,n){return uu(t).get(WT(this.userId,n)).next((r=>r?Xm(this.serializer,r):null))}getOverlays(t,n){const r=ki();return z.forEach(n,(l=>this.getOverlay(t,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(t,n,r){const l=[];return r.forEach(((u,h)=>{const m=new $g(n,h);l.push(this.bt(t,m))})),z.waitFor(l)}removeOverlaysForBatchId(t,n,r){const l=new Set;n.forEach((h=>l.add(ln(h.getCollectionPath()))));const u=[];return l.forEach((h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(uu(t).X(og,m))})),z.waitFor(u)}getOverlaysForCollection(t,n,r){const l=ki(),u=ln(n),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return uu(t).H(og,h).next((m=>{for(const g of m){const _=Xm(this.serializer,g);l.set(_.getKey(),_)}return l}))}getOverlaysForCollectionGroup(t,n,r,l){const u=ki();let h;const m=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return uu(t).ee({index:A0,range:m},((g,_,T)=>{const A=Xm(this.serializer,_);u.size()<l||A.largestBatchId===h?(u.set(A.getKey(),A),h=A.largestBatchId):T.done()})).next((()=>u))}bt(t,n){return uu(t).put((function(l,u,h){const[m,g,_]=WT(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:qu(l.yt,h.mutation)}})(this.serializer,this.userId,n))}}function uu(a){return ke(a,Sf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{St(t){return ke(t,kg)}getSessionToken(t){return this.St(t).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?_e.fromUint8Array(r):_e.EMPTY_BYTE_STRING}))}setSessionToken(t,n){return this.St(t).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){}Dt(t,n){this.Ct(t,n),n.vt()}Ct(t,n){if("nullValue"in t)this.Ft(n,5);else if("booleanValue"in t)this.Ft(n,10),n.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(n,15),n.Mt(fe(t.integerValue));else if("doubleValue"in t){const r=fe(t.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Cu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=fr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,n),this.Nt(n);else if("bytesValue"in t)this.Ft(n,30),n.Bt(dr(t.bytesValue)),this.Nt(n);else if("referenceValue"in t)this.Lt(t.referenceValue,n);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in t?O0(t)?this.Ft(n,Number.MAX_SAFE_INTEGER):If(t)?this.kt(t.mapValue,n):(this.Kt(t.mapValue,n),this.Nt(n)):"arrayValue"in t?(this.qt(t.arrayValue,n),this.Nt(n)):at(19022,{Ut:t})}Ot(t,n){this.Ft(n,25),this.$t(t,n)}$t(t,n){n.xt(t)}Kt(t,n){const r=t.fields||{};this.Ft(n,55);for(const l of Object.keys(r))this.Ot(l,n),this.Ct(r[l],n)}kt(t,n){var h,m;const r=t.fields||{};this.Ft(n,53);const l=Pl,u=((m=(h=r[l].arrayValue)==null?void 0:h.values)==null?void 0:m.length)||0;this.Ft(n,15),n.Mt(fe(u)),this.Ot(l,n),this.Ct(r[l],n)}qt(t,n){const r=t.values||[];this.Ft(n,50);for(const l of r)this.Ct(l,n)}Lt(t,n){this.Ft(n,37),nt.fromName(t).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(t,n){t.Mt(n)}Nt(t){t.Mt(2)}}na.Wt=new na;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=255;function IR(a){if(a===0)return 8;let t=0;return a>>4||(t+=4,a<<=4),a>>6||(t+=2,a<<=2),a>>7||(t+=1),t}function iE(a){const t=64-(function(r){let l=0;for(let u=0;u<8;++u){const h=IR(255&r[u]);if(l+=h,h!==8)break}return l})(a);return Math.ceil(t/8)}class RR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const l=n.codePointAt(0);this.Gt(240|l>>>18),this.Gt(128|63&l>>>12),this.Gt(128|63&l>>>6),this.Gt(128|63&l)}}this.zt()}Xt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const l=n.codePointAt(0);this.Ht(240|l>>>18),this.Ht(128|63&l>>>12),this.Ht(128|63&l>>>6),this.Ht(128|63&l)}}this.Jt()}Yt(t){const n=this.en(t),r=iE(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let l=n.length-r;l<n.length;++l)this.buffer[this.position++]=255&n[l]}nn(t){const n=this.en(t),r=iE(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let l=n.length-r;l<n.length;++l)this.buffer[this.position++]=~(255&n[l])}rn(){this.sn(pl),this.sn(255)}_n(){this.an(pl),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const n=(function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)})(t),r=!!(128&n[0]);n[0]^=r?255:128;for(let l=1;l<n.length;++l)n[l]^=r?255:0;return n}Gt(t){const n=255&t;n===0?(this.sn(0),this.sn(255)):n===pl?(this.sn(pl),this.sn(0)):this.sn(n)}Ht(t){const n=255&t;n===0?(this.an(0),this.an(255)):n===pl?(this.an(pl),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const n=t+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const l=new Uint8Array(r);l.set(this.buffer),this.buffer=l}}class VR{constructor(t){this.cn=t}Bt(t){this.cn.Qt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.Yt(t)}vt(){this.cn.rn()}}class DR{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Xt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class cu{constructor(){this.cn=new RR,this.ascending=new VR(this.cn),this.descending=new DR(this.cn)}seed(t){this.cn.seed(t)}ln(t){return t===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n,r,l){this.hn=t,this.Pn=n,this.Tn=r,this.In=l}En(){const t=this.In.length,n=t===0||this.In[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.In,0),n!==t?r.set([0],this.In.length):++r[r.length-1],new ia(this.hn,this.Pn,this.Tn,r)}Rn(t,n,r){return{indexId:this.hn,uid:t,arrayValue:$h(this.Tn),directionalValue:$h(this.In),orderedDocumentKey:$h(n),documentKey:r.path.toArray()}}An(t,n,r){const l=this.Rn(t,n,r);return[l.indexId,l.uid,l.arrayValue,l.directionalValue,l.orderedDocumentKey,l.documentKey]}}function Jr(a,t){let n=a.hn-t.hn;return n!==0?n:(n=rE(a.Tn,t.Tn),n!==0?n:(n=rE(a.In,t.In),n!==0?n:nt.comparator(a.Pn,t.Pn)))}function rE(a,t){for(let n=0;n<a.length&&n<t.length;++n){const r=a[n]-t[n];if(r!==0)return r}return a.length-t.length}function $h(a){return JE()?(function(n){let r="";for(let l=0;l<n.length;l++)r+=String.fromCharCode(n[l]);return r})(a):a}function sE(a){return typeof a!="string"?a:(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(a)}class aE{constructor(t){this.Vn=new Zt(((n,r)=>de.comparator(n.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.dn=t.orderBy,this.mn=[];for(const n of t.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(t){if(ft(t.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=sg(t);if(n!==void 0&&!this.pn(n))return!1;const r=$s(t);let l=new Set,u=0,h=0;for(;u<r.length&&this.pn(r[u]);++u)l=l.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!l.has(m.field.canonicalString())){const g=r[u];if(!this.yn(m,g)||!this.wn(this.dn[h++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.dn.length||!this.wn(this.dn[h++],m))return!1}return!0}bn(){if(this.fn)return null;let t=new Zt(de.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Gh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),n.push(new Gh(r.field,0))}for(const r of this.dn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),n.push(new Gh(r.field,r.dir==="asc"?0:1)));return new ef(ef.UNKNOWN_ID,this.collectionId,n,Du.empty())}pn(t){for(const n of this.mn)if(this.yn(n,t))return!0;return!1}yn(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===r}wn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(a){var n,r;if(ft(a instanceof Ot||a instanceof Xt,20012),a instanceof Ot){if(a instanceof j0){const l=((r=(n=a.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((u=>Ot.create(a.field,"==",u))))||[];return Xt.create(l,"or")}return a}const t=a.filters.map((l=>bA(l)));return Xt.create(t,a.op)}function CR(a){if(a.getFilters().length===0)return[];const t=Sg(bA(a));return ft(IA(t),7391),Eg(t)||Ag(t)?[t]:t.getFilters()}function Eg(a){return a instanceof Ot}function Ag(a){return a instanceof Xt&&Hg(a)}function IA(a){return Eg(a)||Ag(a)||(function(n){if(n instanceof Xt&&dg(n)){for(const r of n.getFilters())if(!Eg(r)&&!Ag(r))return!1;return!0}return!1})(a)}function Sg(a){if(ft(a instanceof Ot||a instanceof Xt,34018),a instanceof Ot)return a;if(a.filters.length===1)return Sg(a.filters[0]);const t=a.filters.map((r=>Sg(r)));let n=Xt.create(t,a.op);return n=cf(n),IA(n)?n:(ft(n instanceof Xt,64498),ft(Ul(n),40251),ft(n.filters.length>1,57927),n.filters.reduce(((r,l)=>np(r,l))))}function np(a,t){let n;return ft(a instanceof Ot||a instanceof Xt,38388),ft(t instanceof Ot||t instanceof Xt,25473),n=a instanceof Ot?t instanceof Ot?(function(l,u){return Xt.create([l,u],"and")})(a,t):lE(a,t):t instanceof Ot?lE(t,a):(function(l,u){if(ft(l.filters.length>0&&u.filters.length>0,48005),Ul(l)&&Ul(u))return B0(l,u.getFilters());const h=dg(l)?l:u,m=dg(l)?u:l,g=h.filters.map((_=>np(_,m)));return Xt.create(g,"or")})(a,t),cf(n)}function lE(a,t){if(Ul(t))return B0(t,a.getFilters());{const n=t.filters.map((r=>np(a,r)));return Xt.create(n,"or")}}function cf(a){if(ft(a instanceof Ot||a instanceof Xt,11850),a instanceof Ot)return a;const t=a.getFilters();if(t.length===1)return cf(t[0]);if(L0(a))return a;const n=t.map((l=>cf(l))),r=[];return n.forEach((l=>{l instanceof Ot?r.push(l):l instanceof Xt&&(l.op===a.op?r.push(...l.filters):r.push(l))})),r.length===1?r[0]:Xt.create(r,a.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.Sn=new ip}addToCollectionParentIndex(t,n){return this.Sn.add(n),z.resolve()}getCollectionParents(t,n){return z.resolve(this.Sn.getEntries(n))}addFieldIndex(t,n){return z.resolve()}deleteFieldIndex(t,n){return z.resolve()}deleteAllFieldIndexes(t){return z.resolve()}createTargetIndexes(t,n){return z.resolve()}getDocumentsMatchingTarget(t,n){return z.resolve(null)}getIndexType(t,n){return z.resolve(0)}getFieldIndexes(t,n){return z.resolve([])}getNextCollectionGroupToUpdate(t){return z.resolve(null)}getMinOffset(t,n){return z.resolve(zn.min())}getMinOffsetFromCollectionGroup(t,n){return z.resolve(zn.min())}updateCollectionGroup(t,n,r){return z.resolve()}updateIndexEntries(t,n){return z.resolve()}}class ip{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n]||new Zt(xt.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(t){return(this.index[t]||new Zt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="IndexedDbIndexManager",qh=new Uint8Array(0);class NR{constructor(t,n){this.databaseId=n,this.Dn=new ip,this.Cn=new gr((r=>ca(r)),((r,l)=>Xu(r,l))),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.Dn.has(n)){const r=n.lastSegment(),l=n.popLast();t.addOnCommittedListener((()=>{this.Dn.add(n)}));const u={collectionId:r,parent:ln(l)};return uE(t).put(u)}return z.resolve()}getCollectionParents(t,n){const r=[],l=IDBKeyRange.bound([n,""],[l0(n),""],!1,!0);return uE(t).H(l).next((u=>{for(const h of u){if(h.collectionId!==n)break;r.push(Bi(h.parent))}return r}))}addFieldIndex(t,n){const r=hu(t),l=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(n);delete l.indexId;const u=r.add(l);if(n.indexState){const h=yl(t);return u.next((m=>{h.put(tE(m,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return u.next()}deleteFieldIndex(t,n){const r=hu(t),l=yl(t),u=_l(t);return r.delete(n.indexId).next((()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const n=hu(t),r=_l(t),l=yl(t);return n.X().next((()=>r.X())).next((()=>l.X()))}createTargetIndexes(t,n){return z.forEach(this.vn(n),(r=>this.getIndexType(t,r).next((l=>{if(l===0||l===1){const u=new aE(r).bn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,n){const r=_l(t);let l=!0;const u=new Map;return z.forEach(this.vn(n),(h=>this.Fn(t,h).next((m=>{l&&(l=!!m),u.set(h,m)})))).next((()=>{if(l){let h=bt();const m=[];return z.forEach(u,((g,_)=>{W(oE,`Using index ${(function(ct){return`id=${ct.indexId}|cg=${ct.collectionGroup}|f=${ct.fields.map((Vt=>`${Vt.fieldPath}:${Vt.kind}`)).join(",")}`})(g)} to execute ${ca(n)}`);const T=(function(ct,Vt){const lt=sg(Vt);if(lt===void 0)return null;for(const ht of lf(ct,lt.fieldPath))switch(ht.op){case"array-contains-any":return ht.value.arrayValue.values||[];case"array-contains":return[ht.value]}return null})(_,g),A=(function(ct,Vt){const lt=new Map;for(const ht of $s(Vt))for(const I of lf(ct,ht.fieldPath))switch(I.op){case"==":case"in":lt.set(ht.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return lt.set(ht.fieldPath.canonicalString(),I.value),Array.from(lt.values())}return null})(_,g),b=(function(ct,Vt){const lt=[];let ht=!0;for(const I of $s(Vt)){const w=I.kind===0?BT(ct,I.fieldPath,ct.startAt):kT(ct,I.fieldPath,ct.startAt);lt.push(w.value),ht&&(ht=w.inclusive)}return new hs(lt,ht)})(_,g),B=(function(ct,Vt){const lt=[];let ht=!0;for(const I of $s(Vt)){const w=I.kind===0?kT(ct,I.fieldPath,ct.endAt):BT(ct,I.fieldPath,ct.endAt);lt.push(w.value),ht&&(ht=w.inclusive)}return new hs(lt,ht)})(_,g),J=this.Mn(g,_,b),$=this.Mn(g,_,B),tt=this.xn(g,_,A),mt=this.On(g.indexId,T,J,b.inclusive,$,B.inclusive,tt);return z.forEach(mt,(_t=>r.Z(_t,n.limit).next((ct=>{ct.forEach((Vt=>{const lt=nt.fromSegments(Vt.documentKey);h.has(lt)||(h=h.add(lt),m.push(lt))}))}))))})).next((()=>m))}return z.resolve(null)}))}vn(t){let n=this.Cn.get(t);return n||(t.filters.length===0?n=[t]:n=CR(Xt.create(t.filters,"and")).map((r=>gg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Cn.set(t,n),n)}On(t,n,r,l,u,h,m){const g=(n!=null?n.length:1)*Math.max(r.length,u.length),_=g/(n!=null?n.length:1),T=[];for(let A=0;A<g;++A){const b=n?this.Nn(n[A/_]):qh,B=this.Bn(t,b,r[A%_],l),J=this.Ln(t,b,u[A%_],h),$=m.map((tt=>this.Bn(t,b,tt,!0)));T.push(...this.createRange(B,J,$))}return T}Bn(t,n,r,l){const u=new ia(t,nt.empty(),n,r);return l?u:u.En()}Ln(t,n,r,l){const u=new ia(t,nt.empty(),n,r);return l?u.En():u}Fn(t,n){const r=new aE(n),l=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,l).next((u=>{let h=null;for(const m of u)r.gn(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h}))}getIndexType(t,n){let r=2;const l=this.vn(n);return z.forEach(l,(u=>this.Fn(t,u).next((h=>{h?r!==0&&h.fields.length<(function(g){let _=new Zt(de.comparator),T=!1;for(const A of g.filters)for(const b of A.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?T=!0:_=_.add(b.field));for(const A of g.orderBy)A.field.isKeyField()||(_=_.add(A.field));return _.size+(T?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(h){return h.limit!==null})(n)&&l.length>1&&r===2?1:r))}kn(t,n){const r=new cu;for(const l of $s(t)){const u=n.data.field(l.fieldPath);if(u==null)return null;const h=r.ln(l.kind);na.Wt.Dt(u,h)}return r.un()}Nn(t){const n=new cu;return na.Wt.Dt(t,n.ln(0)),n.un()}Kn(t,n){const r=new cu;return na.Wt.Dt(ua(this.databaseId,n),r.ln((function(u){const h=$s(u);return h.length===0?0:h[h.length-1].kind})(t))),r.un()}xn(t,n,r){if(r===null)return[];let l=[];l.push(new cu);let u=0;for(const h of $s(t)){const m=r[u++];for(const g of l)if(this.qn(n,h.fieldPath)&&zu(m))l=this.Un(l,h,m);else{const _=g.ln(h.kind);na.Wt.Dt(m,_)}}return this.$n(l)}Mn(t,n,r){return this.xn(t,n,r.position)}$n(t){const n=[];for(let r=0;r<t.length;++r)n[r]=t[r].un();return n}Un(t,n,r){const l=[...t],u=[];for(const h of r.arrayValue.values||[])for(const m of l){const g=new cu;g.seed(m.un()),na.Wt.Dt(h,g.ln(n.kind)),u.push(g)}return u}qn(t,n){return!!t.filters.find((r=>r instanceof Ot&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,n){const r=hu(t),l=yl(t);return(n?r.H(lg,IDBKeyRange.bound(n,n)):r.H()).next((u=>{const h=[];return z.forEach(u,(m=>l.get([m.indexId,this.uid]).next((g=>{h.push((function(T,A){const b=A?new Du(A.sequenceNumber,new zn(ma(A.readTime),new nt(Bi(A.documentKey)),A.largestBatchId)):Du.empty(),B=T.fields.map((([J,$])=>new Gh(de.fromServerFormat(J),$)));return new ef(T.indexId,T.collectionGroup,B,b)})(m,g))})))).next((()=>h))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((n=>n.length===0?null:(n.sort(((r,l)=>{const u=r.indexState.sequenceNumber-l.indexState.sequenceNumber;return u!==0?u:Et(r.collectionGroup,l.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(t,n,r){const l=hu(t),u=yl(t);return this.Wn(t).next((h=>l.H(lg,IDBKeyRange.bound(n,n)).next((m=>z.forEach(m,(g=>u.put(tE(g.indexId,this.uid,h,r))))))))}updateIndexEntries(t,n){const r=new Map;return z.forEach(n,((l,u)=>{const h=r.get(l.collectionGroup);return(h?z.resolve(h):this.getFieldIndexes(t,l.collectionGroup)).next((m=>(r.set(l.collectionGroup,m),z.forEach(m,(g=>this.Qn(t,l,g).next((_=>{const T=this.Gn(u,g);return _.isEqual(T)?z.resolve():this.zn(t,u,g,_,T)})))))))}))}jn(t,n,r,l){return _l(t).put(l.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(t,n,r,l){return _l(t).delete(l.An(this.uid,this.Kn(r,n.key),n.key))}Qn(t,n,r){const l=_l(t);let u=new Zt(Jr);return l.ee({index:E0,range:IDBKeyRange.only([r.indexId,this.uid,$h(this.Kn(r,n))])},((h,m)=>{u=u.add(new ia(r.indexId,n,sE(m.arrayValue),sE(m.directionalValue)))})).next((()=>u))}Gn(t,n){let r=new Zt(Jr);const l=this.kn(n,t);if(l==null)return r;const u=sg(n);if(u!=null){const h=t.data.field(u.fieldPath);if(zu(h))for(const m of h.arrayValue.values||[])r=r.add(new ia(n.indexId,t.key,this.Nn(m),l))}else r=r.add(new ia(n.indexId,t.key,qh,l));return r}zn(t,n,r,l,u){W(oE,"Updating index entries for document '%s'",n.key);const h=[];return(function(g,_,T,A,b){const B=g.getIterator(),J=_.getIterator();let $=gl(B),tt=gl(J);for(;$||tt;){let mt=!1,_t=!1;if($&&tt){const ct=T($,tt);ct<0?_t=!0:ct>0&&(mt=!0)}else $!=null?_t=!0:mt=!0;mt?(A(tt),tt=gl(J)):_t?(b($),$=gl(B)):($=gl(B),tt=gl(J))}})(l,u,Jr,(m=>{h.push(this.jn(t,n,r,m))}),(m=>{h.push(this.Hn(t,n,r,m))})),z.waitFor(h)}Wn(t){let n=1;return yl(t).ee({index:T0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,l,u)=>{u.done(),n=l.sequenceNumber+1})).next((()=>n))}createRange(t,n,r){r=r.sort(((h,m)=>Jr(h,m))).filter(((h,m,g)=>!m||Jr(h,g[m-1])!==0));const l=[];l.push(t);for(const h of r){const m=Jr(h,t),g=Jr(h,n);if(m===0)l[0]=t.En();else if(m>0&&g<0)l.push(h),l.push(h.En());else if(g>0)break}l.push(n);const u=[];for(let h=0;h<l.length;h+=2){if(this.Jn(l[h],l[h+1]))return[];const m=l[h].An(this.uid,qh,nt.empty()),g=l[h+1].An(this.uid,qh,nt.empty());u.push(IDBKeyRange.bound(m,g))}return u}Jn(t,n){return Jr(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(cE)}getMinOffset(t,n){return z.mapArray(this.vn(n),(r=>this.Fn(t,r).next((l=>l||at(44426))))).next(cE)}}function uE(a){return ke(a,Mu)}function _l(a){return ke(a,Su)}function hu(a){return ke(a,Bg)}function yl(a){return ke(a,Au)}function cE(a){ft(a.length!==0,28825);let t=a[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<a.length;r++){const l=a[r].indexState.offset;Ug(l,t)<0&&(t=l),n<l.largestBatchId&&(n=l.largestBatchId)}return new zn(t.readTime,t.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RA=41943040;class sn{static withCacheSize(t){return new sn(t,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(a,t,n){const r=a.store(ci),l=a.store(xl),u=[],h=IDBKeyRange.only(n.batchId);let m=0;const g=r.ee({range:h},((T,A,b)=>(m++,b.delete())));u.push(g.next((()=>{ft(m===1,47070,{batchId:n.batchId})})));const _=[];for(const T of n.mutations){const A=_0(t,T.key.path,n.batchId);u.push(l.delete(A)),_.push(T.key)}return z.waitFor(u).next((()=>_))}function hf(a){if(!a)return 0;let t;if(a.document)t=a.document;else if(a.unknownDocument)t=a.unknownDocument;else{if(!a.noDocument)throw at(14731);t=a.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(RA,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class Cf{constructor(t,n,r,l){this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=l,this.Zn={}}static wt(t,n,r,l){ft(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new Cf(u,n,r,l)}checkEmpty(t){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(t).ee({index:sa,range:r},((l,u,h)=>{n=!1,h.done()})).next((()=>n))}addMutationBatch(t,n,r,l){const u=wl(t),h=$r(t);return h.add({}).next((m=>{ft(typeof m=="number",49019);const g=new Zg(m,n,r,l),_=(function(B,J,$){const tt=$.baseMutations.map((_t=>qu(B.yt,_t))),mt=$.mutations.map((_t=>qu(B.yt,_t)));return{userId:J,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:tt,mutations:mt}})(this.serializer,this.userId,g),T=[];let A=new Zt(((b,B)=>Et(b.canonicalString(),B.canonicalString())));for(const b of l){const B=_0(this.userId,b.key.path,m);A=A.add(b.key.path.popLast()),T.push(h.put(_)),T.push(u.put(B,lI))}return A.forEach((b=>{T.push(this.indexManager.addToCollectionParentIndex(t,b))})),t.addOnCommittedListener((()=>{this.Zn[m]=g.keys()})),z.waitFor(T).next((()=>g))}))}lookupMutationBatch(t,n){return $r(t).get(n).next((r=>r?(ft(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ea(this.serializer,r)):null))}Xn(t,n){return this.Zn[n]?z.resolve(this.Zn[n]):this.lookupMutationBatch(t,n).next((r=>{if(r){const l=r.keys();return this.Zn[n]=l,l}return null}))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,l=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return $r(t).ee({index:sa,range:l},((h,m,g)=>{m.userId===this.userId&&(ft(m.batchId>=r,47524,{Yn:r}),u=ea(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ss;return $r(t).ee({index:sa,range:n,reverse:!0},((l,u,h)=>{r=u.batchId,h.done()})).next((()=>r))}getAllMutationBatches(t){const n=IDBKeyRange.bound([this.userId,ss],[this.userId,Number.POSITIVE_INFINITY]);return $r(t).H(sa,n).next((r=>r.map((l=>ea(this.serializer,l)))))}getAllMutationBatchesAffectingDocumentKey(t,n){const r=Hh(this.userId,n.path),l=IDBKeyRange.lowerBound(r),u=[];return wl(t).ee({range:l},((h,m,g)=>{const[_,T,A]=h,b=Bi(T);if(_===this.userId&&n.path.isEqual(b))return $r(t).get(A).next((B=>{if(!B)throw at(61480,{er:h,batchId:A});ft(B.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:B.userId,batchId:A}),u.push(ea(this.serializer,B))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Zt(Et);const l=[];return n.forEach((u=>{const h=Hh(this.userId,u.path),m=IDBKeyRange.lowerBound(h),g=wl(t).ee({range:m},((_,T,A)=>{const[b,B,J]=_,$=Bi(B);b===this.userId&&u.path.isEqual($)?r=r.add(J):A.done()}));l.push(g)})),z.waitFor(l).next((()=>this.tr(t,r)))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,l=r.length+1,u=Hh(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new Zt(Et);return wl(t).ee({range:h},((g,_,T)=>{const[A,b,B]=g,J=Bi(b);A===this.userId&&r.isPrefixOf(J)?J.length===l&&(m=m.add(B)):T.done()})).next((()=>this.tr(t,m)))}tr(t,n){const r=[],l=[];return n.forEach((u=>{l.push($r(t).get(u).next((h=>{if(h===null)throw at(35274,{batchId:u});ft(h.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:h.userId,batchId:u}),r.push(ea(this.serializer,h))})))})),z.waitFor(l).next((()=>r))}removeMutationBatch(t,n){return VA(t.le,this.userId,n).next((r=>(t.addOnCommittedListener((()=>{this.nr(n.batchId)})),z.forEach(r,(l=>this.referenceDelegate.markPotentiallyOrphaned(t,l))))))}nr(t){delete this.Zn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((n=>{if(!n)return z.resolve();const r=IDBKeyRange.lowerBound((function(h){return[h]})(this.userId)),l=[];return wl(t).ee({range:r},((u,h,m)=>{if(u[0]===this.userId){const g=Bi(u[1]);l.push(g)}else m.done()})).next((()=>{ft(l.length===0,56720,{rr:l.map((u=>u.canonicalString()))})}))}))}containsKey(t,n){return DA(t,this.userId,n)}ir(t){return CA(t).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:ss,lastStreamToken:""}))}}function DA(a,t,n){const r=Hh(t,n.path),l=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return wl(a).ee({range:u,Y:!0},((m,g,_)=>{const[T,A,b]=m;T===t&&A===l&&(h=!0),_.done()})).next((()=>h))}function $r(a){return ke(a,ci)}function wl(a){return ke(a,xl)}function CA(a){return ke(a,xu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new ga(0)}static ar(){return new ga(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.ur(t).next((n=>{const r=new ga(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(t,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.ur(t).next((n=>gt.fromTimestamp(new Gt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.ur(t).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(t,n,r){return this.ur(t).next((l=>(l.highestListenSequenceNumber=n,r&&(l.lastRemoteSnapshotVersion=r.toTimestamp()),n>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=n),this.cr(t,l))))}addTargetData(t,n){return this.lr(t,n).next((()=>this.ur(t).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(t,r))))))}updateTargetData(t,n){return this.lr(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next((()=>vl(t).delete(n.targetId))).next((()=>this.ur(t))).next((r=>(ft(r.targetCount>0,8065),r.targetCount-=1,this.cr(t,r))))}removeTargets(t,n,r){let l=0;const u=[];return vl(t).ee(((h,m)=>{const g=yu(m);g.sequenceNumber<=n&&r.get(g.targetId)===null&&(l++,u.push(this.removeTargetData(t,g)))})).next((()=>z.waitFor(u))).next((()=>l))}forEachTarget(t,n){return vl(t).ee(((r,l)=>{const u=yu(l);n(u)}))}ur(t){return fE(t).get(sf).next((n=>(ft(n!==null,2888),n)))}cr(t,n){return fE(t).put(sf,n)}lr(t,n){return vl(t).put(wA(this.serializer,n))}hr(t,n){let r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.ur(t).next((n=>n.targetCount))}getTargetData(t,n){const r=ca(n),l=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return vl(t).ee({range:l,index:v0},((h,m,g)=>{const _=yu(m);Xu(n,_.target)&&(u=_,g.done())})).next((()=>u))}addMatchingKeys(t,n,r){const l=[],u=es(t);return n.forEach((h=>{const m=ln(h.path);l.push(u.put({targetId:r,path:m})),l.push(this.referenceDelegate.addReference(t,r,h))})),z.waitFor(l)}removeMatchingKeys(t,n,r){const l=es(t);return z.forEach(n,(u=>{const h=ln(u.path);return z.waitFor([l.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,n){const r=es(t),l=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(l)}getMatchingKeysForTargetId(t,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),l=es(t);let u=bt();return l.ee({range:r,Y:!0},((h,m,g)=>{const _=Bi(h[1]),T=new nt(_);u=u.add(T)})).next((()=>u))}containsKey(t,n){const r=ln(n.path),l=IDBKeyRange.bound([r],[l0(r)],!1,!0);let u=0;return es(t).ee({index:qg,Y:!0,range:l},(([h,m],g,_)=>{h!==0&&(u++,_.done())})).next((()=>u>0))}At(t,n){return vl(t).get(n).next((r=>r?yu(r):null))}}function vl(a){return ke(a,Nl)}function fE(a){return ke(a,oa)}function es(a){return ke(a,Ml)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="LruGarbageCollector",OR=1048576;function mE([a,t],[n,r]){const l=Et(a,n);return l===0?Et(t,r):l}class PR{constructor(t){this.Pr=t,this.buffer=new Zt(mE),this.Tr=0}Ir(){return++this.Tr}Er(t){const n=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xA{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){W(dE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){gs(n)?W(dE,"Ignoring IndexedDB error during garbage collection: ",n):await ms(n)}await this.Ar(3e5)}))}}class zR{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.dr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return z.resolve(Sn.ce);const r=new PR(n);return this.Vr.forEachTarget(t,(l=>r.Er(l.sequenceNumber))).next((()=>this.Vr.mr(t,(l=>r.Er(l))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(hE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hE):this.gr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,n){let r,l,u,h,m,g,_;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,h=Date.now(),this.nthSequenceNumber(t,l)))).next((A=>(r=A,m=Date.now(),this.removeTargets(t,r,n)))).next((A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((A=>(_=Date.now(),Tl()<=cr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${l} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(_-g)+`ms
Total Duration: ${_-T}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:A}))))}}function NA(a,t){return new zR(a,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t,n){this.db=t,this.garbageCollector=NA(this,n)}dr(t){const n=this.pr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>n.next((l=>r+l))))}pr(t){let n=0;return this.mr(t,(r=>{n++})).next((()=>n))}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}mr(t,n){return this.yr(t,((r,l)=>n(l)))}addReference(t,n,r){return Bh(t,r)}removeReference(t,n,r){return Bh(t,r)}removeTargets(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)}markPotentiallyOrphaned(t,n){return Bh(t,n)}wr(t,n){return(function(l,u){let h=!1;return CA(l).te((m=>DA(l,m,u).next((g=>(g&&(h=!0),z.resolve(!g)))))).next((()=>h))})(t,n)}removeOrphanedDocuments(t,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let u=0;return this.yr(t,((h,m)=>{if(m<=n){const g=this.wr(t,h).next((_=>{if(!_)return u++,r.getEntry(t,h).next((()=>(r.removeEntry(h,gt.min()),es(t).delete((function(A){return[0,ln(A.path)]})(h)))))}));l.push(g)}})).next((()=>z.waitFor(l))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,n){return Bh(t,n)}yr(t,n){const r=es(t);let l,u=Sn.ce;return r.ee({index:qg},(([h,m],{path:g,sequenceNumber:_})=>{h===0?(u!==Sn.ce&&n(new nt(Bi(l)),u),u=_,l=g):u=Sn.ce})).next((()=>{u!==Sn.ce&&n(new nt(Bi(l)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Bh(a,t){return es(a).put((function(r,l){return{targetId:0,path:ln(r.path),sequenceNumber:l}})(t,a.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.changes=new gr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,le.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,r){return Zs(t).put(r)}removeEntry(t,n,r){return Zs(t).delete((function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],uf(h),m[m.length-1]]})(n,r))}updateMetadata(t,n){return this.getMetadata(t).next((r=>(r.byteSize+=n,this.br(t,r))))}getEntry(t,n){let r=le.newInvalidDocument(n);return Zs(t).ee({index:Qh,range:IDBKeyRange.only(fu(n))},((l,u)=>{r=this.Sr(n,u)})).next((()=>r))}Dr(t,n){let r={size:0,document:le.newInvalidDocument(n)};return Zs(t).ee({index:Qh,range:IDBKeyRange.only(fu(n))},((l,u)=>{r={document:this.Sr(n,u),size:hf(u)}})).next((()=>r))}getEntries(t,n){let r=bn();return this.Cr(t,n,((l,u)=>{const h=this.Sr(l,u);r=r.insert(l,h)})).next((()=>r))}vr(t,n){let r=bn(),l=new re(nt.comparator);return this.Cr(t,n,((u,h)=>{const m=this.Sr(u,h);r=r.insert(u,m),l=l.insert(u,hf(h))})).next((()=>({documents:r,Fr:l})))}Cr(t,n,r){if(n.isEmpty())return z.resolve();let l=new Zt(_E);n.forEach((g=>l=l.add(g)));const u=IDBKeyRange.bound(fu(l.first()),fu(l.last())),h=l.getIterator();let m=h.getNext();return Zs(t).ee({index:Qh,range:u},((g,_,T)=>{const A=nt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;m&&_E(m,A)<0;)r(m,null),m=h.getNext();m&&m.isEqual(A)&&(r(m,_),m=h.hasNext()?h.getNext():null),m?T.j(fu(m)):T.done()})).next((()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null}))}getDocumentsMatchingQuery(t,n,r,l,u){const h=n.path,m=[h.popLast().toArray(),h.lastSegment(),uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zs(t).H(IDBKeyRange.bound(m,g,!0)).next((_=>{u==null||u.incrementDocumentReadCount(_.length);let T=bn();for(const A of _){const b=this.Sr(nt.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);b.isFoundDocument()&&(Ju(n,b)||l.has(b.key))&&(T=T.insert(b.key,b))}return T}))}getAllFromCollectionGroup(t,n,r,l){let u=bn();const h=pE(n,r),m=pE(n,zn.max());return Zs(t).ee({index:y0,range:IDBKeyRange.bound(h,m,!0)},((g,_,T)=>{const A=this.Sr(nt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);u=u.insert(A.key,A),u.size===l&&T.done()})).next((()=>u))}newChangeBuffer(t){return new qR(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((n=>n.byteSize))}getMetadata(t){return gE(t).get(ag).next((n=>(ft(!!n,20021),n)))}br(t,n){return gE(t).put(ag,n)}Sr(t,n){if(n){const r=SR(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(gt.min())))return r}return le.newInvalidDocument(t)}}function OA(a){return new LR(a)}class qR extends MA{constructor(t,n){super(),this.Mr=t,this.trackRemovals=n,this.Or=new gr((r=>r.toString()),((r,l)=>r.isEqual(l)))}applyChanges(t){const n=[];let r=0,l=new Zt(((u,h)=>Et(u.canonicalString(),h.canonicalString())));return this.changes.forEach(((u,h)=>{const m=this.Or.get(u);if(n.push(this.Mr.removeEntry(t,u,m.readTime)),h.isValidDocument()){const g=$T(this.Mr.serializer,h);l=l.add(u.path.popLast());const _=hf(g);r+=_-m.size,n.push(this.Mr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=$T(this.Mr.serializer,h.convertToNoDocument(gt.min()));n.push(this.Mr.addEntry(t,u,g))}})),l.forEach((u=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(t,u))})),n.push(this.Mr.updateMetadata(t,r)),z.waitFor(n)}getFromCache(t,n){return this.Mr.Dr(t,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,n){return this.Mr.vr(t,n).next((({documents:r,Fr:l})=>(l.forEach(((u,h)=>{this.Or.set(u,{size:h,readTime:r.get(u).readTime})})),r)))}}function gE(a){return ke(a,Nu)}function Zs(a){return ke(a,rf)}function fu(a){const t=a.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function pE(a,t){const n=t.documentKey.path.toArray();return[a,uf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function _E(a,t){const n=a.path.toArray(),r=t.path.toArray();let l=0;for(let u=0;u<n.length-2&&u<r.length-2;++u)if(l=Et(n[u],r[u]),l)return l;return l=Et(n.length,r.length),l||(l=Et(n[n.length-2],r[r.length-2]),l||Et(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(t,n,r,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(r!==null&&Iu(r.mutation,l,wn.empty(),Gt.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,bt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=bt()){const l=ki();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,r).next((u=>{let h=pu();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(t,n){const r=ki();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,bt())))}populateOverlays(t,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(t,n,r,l){let u=bn();const h=bu(),m=(function(){return bu()})();return n.forEach(((g,_)=>{const T=r.get(_.key);l.has(_.key)&&(T===void 0||T.mutation instanceof pr)?u=u.insert(_.key,_):T!==void 0?(h.set(_.key,T.mutation.getFieldMask()),Iu(T.mutation,_,T.mutation.getFieldMask(),Gt.now())):h.set(_.key,wn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((_,T)=>h.set(_,T))),n.forEach(((_,T)=>m.set(_,new BR(T,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(t,n){const r=bu();let l=new re(((h,m)=>h-m)),u=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=n.get(g);if(_===null)return;let T=r.get(g)||wn.empty();T=m.applyToLocalView(_,T),r.set(g,T);const A=(l.get(m.batchId)||bt()).add(g);l=l.insert(m.batchId,A)}))})).next((()=>{const h=[],m=l.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,T=g.value,A=Z0();T.forEach((b=>{if(!u.has(b)){const B=iA(n.get(b),r.get(b));B!==null&&A.set(b,B),u=u.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(t,_,A))}return z.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,l){return HI(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Qg(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,l):this.getDocumentsMatchingCollectionQuery(t,n,r,l)}getNextDocuments(t,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,l-u.size):z.resolve(ki());let m=Cl,g=u;return h.next((_=>z.forEach(_,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?z.resolve():this.remoteDocumentCache.getEntry(t,T).next((b=>{g=g.insert(T,b)}))))).next((()=>this.populateOverlays(t,_,u))).next((()=>this.computeViews(t,g,_,bt()))).next((T=>({batchId:m,changes:X0(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new nt(n)).next((r=>{let l=pu();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,l){const u=n.collectionGroup;let h=pu();return this.indexManager.getCollectionParents(t,u).next((m=>z.forEach(m,(g=>{const _=(function(A,b){return new mr(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,l).next((T=>{T.forEach(((A,b)=>{h=h.insert(A,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,l)))).next((h=>{u.forEach(((g,_)=>{const T=_.getKey();h.get(T)===null&&(h=h.insert(T,le.newInvalidDocument(T)))}));let m=pu();return h.forEach(((g,_)=>{const T=u.get(g);T!==void 0&&Iu(T.mutation,_,wn.empty(),Gt.now()),Ju(n,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,n){return z.resolve(this.Nr.get(n))}saveBundleMetadata(t,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Se(l.createTime)}})(n)),z.resolve()}getNamedQuery(t,n){return z.resolve(this.Br.get(n))}saveNamedQuery(t,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:ep(l.bundledQuery),readTime:Se(l.readTime)}})(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.overlays=new re(nt.comparator),this.Lr=new Map}getOverlay(t,n){return z.resolve(this.overlays.get(n))}getOverlays(t,n){const r=ki();return z.forEach(n,(l=>this.getOverlay(t,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((l,u)=>{this.bt(t,n,u)})),z.resolve()}removeOverlaysForBatchId(t,n,r){const l=this.Lr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(t,n,r){const l=ki(),u=n.length+1,h=new nt(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>r&&l.set(g.getKey(),g)}return z.resolve(l)}getOverlaysForCollectionGroup(t,n,r,l){let u=new re(((_,T)=>_-T));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let T=u.get(_.largestBatchId);T===null&&(T=ki(),u=u.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const m=ki(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,T)=>m.set(_,T))),!(m.size()>=l)););return z.resolve(m)}bt(t,n,r){const l=this.overlays.get(r.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(r.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new $g(n,r));let u=this.Lr.get(n);u===void 0&&(u=bt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.sessionToken=_e.EMPTY_BYTE_STRING}getSessionToken(t){return z.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this.kr=new Zt(He.Kr),this.qr=new Zt(He.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,n){const r=new He(t,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Wr(new He(t,n))}Qr(t,n){t.forEach((r=>this.removeReference(r,n)))}Gr(t){const n=new nt(new xt([])),r=new He(n,t),l=new He(n,t+1),u=[];return this.qr.forEachInRange([r,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const n=new nt(new xt([])),r=new He(n,t),l=new He(n,t+1);let u=bt();return this.qr.forEachInRange([r,l],(h=>{u=u.add(h.key)})),u}containsKey(t){const n=new He(t,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class He{constructor(t,n){this.key=t,this.Hr=n}static Kr(t,n){return nt.comparator(t.key,n.key)||Et(t.Hr,n.Hr)}static Ur(t,n){return Et(t.Hr,n.Hr)||nt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Zt(He.Kr)}checkEmpty(t){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Zg(u,n,r,l);this.mutationQueue.push(h);for(const m of l)this.Jr=this.Jr.add(new He(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return z.resolve(h)}lookupMutationBatch(t,n){return z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,l=this.Xr(r),u=l<0?0:l;return z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?ss:this.Yn-1)}getAllMutationBatches(t){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new He(n,0),l=new He(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,l],(h=>{const m=this.Zr(h.Hr);u.push(m)})),z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Zt(Et);return n.forEach((l=>{const u=new He(l,0),h=new He(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(m=>{r=r.add(m.Hr)}))})),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,l=r.length+1;let u=r;nt.isDocumentKey(u)||(u=u.child(""));const h=new He(new nt(u),0);let m=new Zt(Et);return this.Jr.forEachWhile((g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===l&&(m=m.add(g.Hr)),!0)}),h),z.resolve(this.Yr(m))}Yr(t){const n=[];return t.forEach((r=>{const l=this.Zr(r);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){ft(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(n.mutations,(l=>{const u=new He(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Jr=r}))}nr(t){}containsKey(t,n){const r=new He(n,0),l=this.Jr.firstAfterOrEqual(r);return z.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,z.resolve()}ei(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(t){this.ti=t,this.docs=(function(){return new re(nt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():le.newInvalidDocument(n))}getEntries(t,n){let r=bn();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():le.newInvalidDocument(l))})),z.resolve(r)}getDocumentsMatchingQuery(t,n,r,l){let u=bn();const h=n.path,m=new nt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:T}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||Ug(f0(T),r)<=0||(l.has(T.key)||Ju(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return z.resolve(u)}getAllFromCollectionGroup(t,n,r,l){at(9500)}ni(t,n){return z.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new QR(this)}getSize(t){return z.resolve(this.size)}}class QR extends MA{constructor(t){super(),this.Mr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(t,l)):this.Mr.removeEntry(r)})),z.waitFor(n)}getFromCache(t,n){return this.Mr.getEntry(t,n)}getAllFromCache(t,n){return this.Mr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(t){this.persistence=t,this.ri=new gr((n=>ca(n)),Xu),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.ii=0,this.si=new rp,this.targetCount=0,this.oi=ga._r()}forEachTarget(t,n){return this.ri.forEach(((r,l)=>n(l))),z.resolve()}getLastRemoteSnapshotVersion(t){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return z.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),z.resolve()}lr(t){this.ri.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.oi=new ga(n),this.highestTargetId=n),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,n){return this.lr(n),this.targetCount+=1,z.resolve()}updateTargetData(t,n){return this.lr(n),z.resolve()}removeTargetData(t,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(t,n,r){let l=0;const u=[];return this.ri.forEach(((h,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),l++)})),z.waitFor(u).next((()=>l))}getTargetCount(t){return z.resolve(this.targetCount)}getTargetData(t,n){const r=this.ri.get(n)||null;return z.resolve(r)}addMatchingKeys(t,n,r){return this.si.$r(n,r),z.resolve()}removeMatchingKeys(t,n,r){this.si.Qr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(t,h))})),z.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this.si.Gr(n),z.resolve()}getMatchingKeysForTargetId(t,n){const r=this.si.jr(n);return z.resolve(r)}containsKey(t,n){return z.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(t,n){this._i={},this.overlays={},this.ai=new Sn(0),this.ui=!1,this.ui=!0,this.ci=new jR,this.referenceDelegate=t(this),this.li=new KR(this),this.indexManager=new xR,this.remoteDocumentCache=(function(l){return new HR(l)})((r=>this.referenceDelegate.hi(r))),this.serializer=new SA(n),this.Pi=new kR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new FR,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this._i[t.toKey()];return r||(r=new GR(n,this.referenceDelegate),this._i[t.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,n,r){W("MemoryPersistence","Starting transaction:",t);const l=new YR(this.ai.next());return this.referenceDelegate.Ti(),r(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(t,n){return z.or(Object.values(this._i).map((r=>()=>r.containsKey(t,n))))}}class YR extends m0{constructor(t){super(),this.currentSequenceNumber=t}}class xf{constructor(t){this.persistence=t,this.Ri=new rp,this.Ai=null}static Vi(t){return new xf(t)}get di(){if(this.Ai)return this.Ai;throw at(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),z.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(t,n){return this.di.add(n.toString()),z.resolve()}removeTarget(t,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(t,n)))}Ti(){this.Ai=new Set}Ii(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,(r=>{const l=nt.fromPath(r);return this.mi(t,l).next((u=>{u||n.removeEntry(l,gt.min())}))})).next((()=>(this.Ai=null,n.apply(t))))}updateLimboDocument(t,n){return this.mi(t,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(t){return 0}mi(t,n){return z.or([()=>z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class ff{constructor(t,n){this.persistence=t,this.fi=new gr((r=>ln(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=NA(this,n)}static Vi(t,n){return new ff(t,n)}Ti(){}Ii(t){return z.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}dr(t){const n=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((l=>r+l))))}pr(t){let n=0;return this.mr(t,(r=>{n++})).next((()=>n))}mr(t,n){return z.forEach(this.fi,((r,l)=>this.wr(t,r,l).next((u=>u?z.resolve():n(l)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(t,(h=>this.wr(t,h,n).next((m=>{m||(r++,u.removeEntry(h,gt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.fi.set(n,t.currentSequenceNumber),z.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.fi.set(r,t.currentSequenceNumber),z.resolve()}removeReference(t,n,r){return this.fi.set(r,t.currentSequenceNumber),z.resolve()}updateLimboDocument(t,n){return this.fi.set(n,t.currentSequenceNumber),z.resolve()}hi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Yh(t.data.value)),n}wr(t,n,r){return z.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.fi.get(n);return z.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t){this.serializer=t}k(t,n,r,l){const u=new Tf("createOrUpgrade",n);r<1&&l>=1&&((function(g){g.createObjectStore(Yu)})(t),(function(g){g.createObjectStore(xu,{keyPath:aI}),g.createObjectStore(ci,{keyPath:VT,autoIncrement:!0}).createIndex(sa,DT,{unique:!0}),g.createObjectStore(xl)})(t),yE(t),(function(g){g.createObjectStore(Ws)})(t));let h=z.resolve();return r<3&&l>=3&&(r!==0&&((function(g){g.deleteObjectStore(Ml),g.deleteObjectStore(Nl),g.deleteObjectStore(oa)})(t),yE(t)),h=h.next((()=>(function(g){const _=g.store(oa),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gt.min().toTimestamp(),targetCount:0};return _.put(sf,T)})(u)))),r<4&&l>=4&&(r!==0&&(h=h.next((()=>(function(g,_){return _.store(ci).H().next((A=>{g.deleteObjectStore(ci),g.createObjectStore(ci,{keyPath:VT,autoIncrement:!0}).createIndex(sa,DT,{unique:!0});const b=_.store(ci),B=A.map((J=>b.put(J)));return z.waitFor(B)}))})(t,u)))),h=h.next((()=>{(function(g){g.createObjectStore(Ol,{keyPath:gI})})(t)}))),r<5&&l>=5&&(h=h.next((()=>this.gi(u)))),r<6&&l>=6&&(h=h.next((()=>((function(g){g.createObjectStore(Nu)})(t),this.pi(u))))),r<7&&l>=7&&(h=h.next((()=>this.yi(u)))),r<8&&l>=8&&(h=h.next((()=>this.wi(t,u)))),r<9&&l>=9&&(h=h.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&l>=10&&(h=h.next((()=>this.bi(u)))),r<11&&l>=11&&(h=h.next((()=>{(function(g){g.createObjectStore(Ef,{keyPath:pI})})(t),(function(g){g.createObjectStore(Af,{keyPath:_I})})(t)}))),r<12&&l>=12&&(h=h.next((()=>{(function(g){const _=g.createObjectStore(Sf,{keyPath:wI});_.createIndex(og,bI,{unique:!1}),_.createIndex(A0,II,{unique:!1})})(t)}))),r<13&&l>=13&&(h=h.next((()=>(function(g){const _=g.createObjectStore(rf,{keyPath:oI});_.createIndex(Qh,uI),_.createIndex(y0,cI)})(t))).next((()=>this.Si(t,u))).next((()=>t.deleteObjectStore(Ws)))),r<14&&l>=14&&(h=h.next((()=>this.Di(t,u)))),r<15&&l>=15&&(h=h.next((()=>(function(g){g.createObjectStore(Bg,{keyPath:yI,autoIncrement:!0}).createIndex(lg,vI,{unique:!1}),g.createObjectStore(Au,{keyPath:TI}).createIndex(T0,EI,{unique:!1}),g.createObjectStore(Su,{keyPath:AI}).createIndex(E0,SI,{unique:!1})})(t)))),r<16&&l>=16&&(h=h.next((()=>{n.objectStore(Au).clear()})).next((()=>{n.objectStore(Su).clear()}))),r<17&&l>=17&&(h=h.next((()=>{(function(g){g.createObjectStore(kg,{keyPath:RI})})(t)}))),r<18&&l>=18&&JE()&&(h=h.next((()=>{n.objectStore(Au).clear()})).next((()=>{n.objectStore(Su).clear()}))),h}pi(t){let n=0;return t.store(Ws).ee(((r,l)=>{n+=hf(l)})).next((()=>{const r={byteSize:n};return t.store(Nu).put(ag,r)}))}gi(t){const n=t.store(xu),r=t.store(ci);return n.H().next((l=>z.forEach(l,(u=>{const h=IDBKeyRange.bound([u.userId,ss],[u.userId,u.lastAcknowledgedBatchId]);return r.H(sa,h).next((m=>z.forEach(m,(g=>{ft(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const _=ea(this.serializer,g);return VA(t,u.userId,_).next((()=>{}))}))))}))))}yi(t){const n=t.store(Ml),r=t.store(Ws);return t.store(oa).get(sf).next((l=>{const u=[];return r.ee(((h,m)=>{const g=new xt(h),_=(function(A){return[0,ln(A)]})(g);u.push(n.get(_).next((T=>T?z.resolve():(A=>n.put({targetId:0,path:ln(A),sequenceNumber:l.highestListenSequenceNumber}))(g))))})).next((()=>z.waitFor(u)))}))}wi(t,n){t.createObjectStore(Mu,{keyPath:mI});const r=n.store(Mu),l=new ip,u=h=>{if(l.add(h)){const m=h.lastSegment(),g=h.popLast();return r.put({collectionId:m,parent:ln(g)})}};return n.store(Ws).ee({Y:!0},((h,m)=>{const g=new xt(h);return u(g.popLast())})).next((()=>n.store(xl).ee({Y:!0},(([h,m,g],_)=>{const T=Bi(m);return u(T.popLast())}))))}bi(t){const n=t.store(Nl);return n.ee(((r,l)=>{const u=yu(l),h=wA(this.serializer,u);return n.put(h)}))}Si(t,n){const r=n.store(Ws),l=[];return r.ee(((u,h)=>{const m=n.store(rf),g=(function(A){return A.document?new nt(xt.fromString(A.document.name).popFirst(5)):A.noDocument?nt.fromSegments(A.noDocument.path):A.unknownDocument?nt.fromSegments(A.unknownDocument.path):at(36783)})(h).path.toArray(),_={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};l.push(m.put(_))})).next((()=>z.waitFor(l)))}Di(t,n){const r=n.store(ci),l=OA(this.serializer),u=new sp(xf.Vi,this.serializer.yt);return r.H().next((h=>{const m=new Map;return h.forEach((g=>{let _=m.get(g.userId)??bt();ea(this.serializer,g).keys().forEach((T=>_=_.add(T))),m.set(g.userId,_)})),z.forEach(m,((g,_)=>{const T=new Qe(_),A=Df.wt(this.serializer,T),b=u.getIndexManager(T),B=Cf.wt(T,this.serializer,b,u.referenceDelegate);return new PA(l,B,A,b).recalculateAndSaveOverlaysForDocumentKeys(new ug(n,Sn.ce),g).next()}))}))}}function yE(a){a.createObjectStore(Ml,{keyPath:fI}).createIndex(qg,dI,{unique:!0}),a.createObjectStore(Nl,{keyPath:"targetId"}).createIndex(v0,hI,{unique:!0}),a.createObjectStore(oa)}const Wr="IndexedDbPersistence",Zm=18e5,Jm=5e3,$m="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zA="main";class ap{constructor(t,n,r,l,u,h,m,g,_,T,A=18){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ci=u,this.window=h,this.document=m,this.Fi=_,this.Mi=T,this.xi=A,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=b=>Promise.resolve(),!ap.v())throw new Z(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UR(this,l),this.Ki=n+zA,this.serializer=new SA(g),this.qi=new Fi(this.Ki,this.xi,new XR(this.serializer)),this.ci=new bR,this.li=new MR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OA(this.serializer),this.Pi=new wR,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,T===!1&&Ae(Wr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,$m);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.li.getHighestSequenceNumber(t)))})).then((t=>{this.ai=new Sn(t,this.Fi)})).then((()=>{this.ui=!0})).catch((t=>(this.qi&&this.qi.close(),Promise.reject(t))))}zi(t){return this.ki=async n=>{if(this.started)return t(n)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.qi.q((async n=>{n.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>kh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(t).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(t))).next((n=>this.isPrimary&&!n?this.Ji(t).next((()=>!1)):!!n&&this.Zi(t).next((()=>!0)))))).catch((t=>{if(gs(t))return W(Wr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return W(Wr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Ci.enqueueRetryable((()=>this.ki(t))),this.isPrimary=t}))}ji(t){return du(t).get(ml).next((n=>z.resolve(this.Xi(n))))}Yi(t){return kh(t).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Zm)){this.Li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=ke(n,Ol);return r.H().next((l=>{const u=this.ns(l,Zm),h=l.filter((m=>u.indexOf(m)===-1));return z.forEach(h,(m=>r.delete(m.clientId))).next((()=>h))}))})).catch((()=>[]));if(this.Ui)for(const n of t)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(t){return!!t&&t.ownerId===this.clientId}Hi(t){return this.Mi?z.resolve(!0):du(t).get(ml).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Jm)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,$m);return!1}}return!(!this.networkEnabled||!this.inForeground)||kh(t).H().next((r=>this.ns(r,Jm).find((l=>{if(this.clientId!==l.clientId){const u=!this.networkEnabled&&l.networkEnabled,h=!this.inForeground&&l.inForeground,m=this.networkEnabled===l.networkEnabled;if(u||h&&m)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&W(Wr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Yu,Ol],(t=>{const n=new ug(t,Sn.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(t,n){return t.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(t=>kh(t).H().next((n=>this.ns(n,Zm).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(t,n){return Cf.wt(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new NR(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Df.wt(this.serializer,t)}getBundleCache(){return this.Pi}runTransaction(t,n,r){W(Wr,"Starting transaction:",t);const l=n==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?CI:g===17?I0:g===16?DI:g===15?Fg:g===14?b0:g===13?w0:g===12?VI:g===11?S0:void at(60245)})(this.xi);let h;return this.qi.runTransaction(t,l,u,(m=>(h=new ug(m,this.ai?this.ai.next():Sn.ce),n==="readwrite-primary"?this.ji(h).next((g=>!!g||this.Hi(h))).next((g=>{if(!g)throw Ae(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Z(F.FAILED_PRECONDITION,d0);return r(h)})).next((g=>this.Zi(h).next((()=>g)))):this.Ps(h).next((()=>r(h)))))).then((m=>(h.raiseOnCommittedEvent(),m)))}Ps(t){return du(t).get(ml).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Jm)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Z(F.FAILED_PRECONDITION,$m)}))}Zi(t){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return du(t).put(ml,n)}static v(){return Fi.v()}Ji(t){const n=du(t);return n.get(ml).next((r=>this.Xi(r)?(W(Wr,"Releasing primary lease."),n.delete(ml)):z.resolve()))}ts(t,n){const r=Date.now();return!(t<r-n)&&(!(t>r)||(Ae(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Oi=()=>{this._s();const n=/(?:Version|Mobile)\/1[456]/;ZE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(t){var n;try{const r=((n=this.Ui)==null?void 0:n.getItem(this.rs(t)))!==null;return W(Wr,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ae(Wr,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(t){Ae("Failed to set zombie client id.",t)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function du(a){return ke(a,Yu)}function kh(a){return ke(a,Ol)}function lp(a,t){let n=a.projectId;return a.isDefaultDatabase||(n+="."+a.database),"firestore/"+t+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(t,n,r,l){this.targetId=t,this.fromCache=n,this.Ts=r,this.Is=l}static Es(t,n){let r=bt(),l=bt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new op(t,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return ZE()?8:g0(tf())>0?6:4})()}initialize(t,n){this.fs=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,l){const u={result:null};return this.gs(t,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(t,n,l,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new ZR;return this.ys(t,n,h).next((m=>{if(u.result=m,this.As)return this.ws(t,n,h,m.size)}))})).next((()=>u.result))}ws(t,n,r,l){return r.documentReadCount<this.Vs?(Tl()<=cr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",El(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Tl()<=cr.DEBUG&&W("QueryEngine","Query:",El(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.ds*l?(Tl()<=cr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",El(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mn(n))):z.resolve())}gs(t,n){if(FT(n))return z.resolve(null);let r=mn(n);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=of(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const h=bt(...u);return this.fs.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const _=this.bs(n,m);return this.Ss(n,_,h,g.readTime)?this.gs(t,of(n,null,"F")):this.Ds(t,_,n,g)}))))})))))}ps(t,n,r,l){return FT(n)||l.isEqual(gt.min())?z.resolve(null):this.fs.getDocuments(t,r).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,r,l)?z.resolve(null):(Tl()<=cr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),El(n)),this.Ds(t,h,n,h0(l,Cl)).next((m=>m)))}))}bs(t,n){let r=new Zt(K0(t));return n.forEach(((l,u)=>{Ju(t,u)&&(r=r.add(u))})),r}Ss(t,n,r,l){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(t,n,r){return Tl()<=cr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",El(n)),this.fs.getDocumentsMatchingQuery(t,n,zn.min(),r)}Ds(t,n,r,l){return this.fs.getDocumentsMatchingQuery(t,r,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="LocalStore",JR=3e8;class $R{constructor(t,n,r,l){this.persistence=t,this.Cs=n,this.serializer=l,this.vs=new re(Et),this.Fs=new gr((u=>ca(u)),Xu),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(r)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new PA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.vs)))}}function LA(a,t,n,r){return new $R(a,t,n,r)}async function qA(a,t){const n=it(a);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Os(t),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],m=[];let g=bt();for(const _ of l){h.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}for(const _ of u){m.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(r,g).next((_=>({Ns:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function WR(a,t){const n=it(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=t.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,T){const A=_.batch,b=A.keys();let B=z.resolve();return b.forEach((J=>{B=B.next((()=>T.getEntry(g,J))).next(($=>{const tt=_.docVersions.get(J);ft(tt!==null,48541),$.version.compareTo(tt)<0&&(A.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),T.addEntry($)))}))})),B.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(n,r,t,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=bt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function BA(a){const t=it(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.li.getLastRemoteSnapshotVersion(n)))}function t1(a,t){const n=it(a),r=t.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const m=[];t.targetChanges.forEach(((T,A)=>{const b=l.get(A);if(!b)return;m.push(n.li.removeMatchingKeys(u,T.removedDocuments,A).next((()=>n.li.addMatchingKeys(u,T.addedDocuments,A))));let B=b.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(A)!==null?B=B.withResumeToken(_e.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):T.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(T.resumeToken,r)),l=l.insert(A,B),(function($,tt,mt){return $.resumeToken.approximateByteSize()===0||tt.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=JR?!0:mt.addedDocuments.size+mt.modifiedDocuments.size+mt.removedDocuments.size>0})(b,B,T)&&m.push(n.li.updateTargetData(u,B))}));let g=bn(),_=bt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(kA(u,h,t.documentUpdates).next((T=>{g=T.Bs,_=T.Ls}))),!r.isEqual(gt.min())){const T=n.li.getLastRemoteSnapshotVersion(u).next((A=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return z.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,_))).next((()=>g))})).then((u=>(n.vs=l,u)))}function kA(a,t,n){let r=bt(),l=bt();return n.forEach((u=>r=r.add(u))),t.getEntries(a,r).next((u=>{let h=bn();return n.forEach(((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(m)),g.isNoDocument()&&g.version.isEqual(gt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):W(up,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function e1(a,t){const n=it(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=ss),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function kl(a,t){const n=it(a);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.li.getTargetData(r,t).next((u=>u?(l=u,z.resolve(l)):n.li.allocateTargetId(r).next((h=>(l=new hr(t,h,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.vs.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(t,r.targetId)),r}))}async function Fl(a,t,n){const r=it(a),l=r.vs.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!gs(h))throw h;W(up,`Failed to update sequence numbers for target ${t}: ${h}`)}r.vs=r.vs.remove(t),r.Fs.delete(l.target)}function df(a,t,n){const r=it(a);let l=gt.min(),u=bt();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,T){const A=it(g),b=A.Fs.get(T);return b!==void 0?z.resolve(A.vs.get(b)):A.li.getTargetData(_,T)})(r,h,mn(t)).next((m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(h,t,n?l:gt.min(),n?u:bt()))).next((m=>(GA(r,Q0(t),m),{documents:m,ks:u})))))}function FA(a,t){const n=it(a),r=it(n.li),l=n.vs.get(t);return l?Promise.resolve(l.target):n.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,t).next((h=>h?h.target:null))))}function jA(a,t){const n=it(a),r=n.Ms.get(t)||gt.min();return n.persistence.runTransaction("Get new document changes","readonly",(l=>n.xs.getAllFromCollectionGroup(l,t,h0(r,Cl),Number.MAX_SAFE_INTEGER))).then((l=>(GA(n,t,l),l)))}function GA(a,t,n){let r=a.Ms.get(t)||gt.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),a.Ms.set(t,r)}async function n1(a,t,n,r){const l=it(a);let u=bt(),h=bn();for(const _ of n){const T=t.Ks(_.metadata.name);_.document&&(u=u.add(T));const A=t.qs(_);A.setReadTime(t.Us(_.metadata.readTime)),h=h.insert(T,A)}const m=l.xs.newChangeBuffer({trackRemovals:!0}),g=await kl(l,(function(T){return mn(Xl(xt.fromString(`__bundle__/docs/${T}`)))})(r));return l.persistence.runTransaction("Apply bundle documents","readwrite",(_=>kA(_,m,h).next((T=>(m.apply(_),T))).next((T=>l.li.removeMatchingKeysForTargetId(_,g.targetId).next((()=>l.li.addMatchingKeys(_,u,g.targetId))).next((()=>l.localDocuments.getLocalViewOfDocuments(_,T.Bs,T.Ls))).next((()=>T.Bs))))))}async function i1(a,t,n=bt()){const r=await kl(a,mn(ep(t.bundledQuery))),l=it(a);return l.persistence.runTransaction("Save named query","readwrite",(u=>{const h=Se(t.readTime);if(r.snapshotVersion.compareTo(h)>=0)return l.Pi.saveNamedQuery(u,t);const m=r.withResumeToken(_e.EMPTY_BYTE_STRING,h);return l.vs=l.vs.insert(m.targetId,m),l.li.updateTargetData(u,m).next((()=>l.li.removeMatchingKeysForTargetId(u,r.targetId))).next((()=>l.li.addMatchingKeys(u,n,r.targetId))).next((()=>l.Pi.saveNamedQuery(u,t)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firestore_clients";function vE(a,t){return`${HA}_${a}_${t}`}const QA="firestore_mutations";function TE(a,t,n){let r=`${QA}_${a}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const KA="firestore_targets";function Wm(a,t){return`${KA}_${a}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="SharedClientState";class mf{constructor(t,n,r,l){this.user=t,this.batchId=n,this.state=r,this.error=l}static $s(t,n,r){const l=JSON.parse(r);let u,h=typeof l=="object"&&["pending","acknowledged","rejected"].indexOf(l.state)!==-1&&(l.error===void 0||typeof l.error=="object");return h&&l.error&&(h=typeof l.error.message=="string"&&typeof l.error.code=="string",h&&(u=new Z(l.error.code,l.error.message))),h?new mf(t,n,l.state,u):(Ae(qi,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Ru{constructor(t,n,r){this.targetId=t,this.state=n,this.error=r}static $s(t,n){const r=JSON.parse(n);let l,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(l=new Z(r.error.code,r.error.message))),u?new Ru(t,r.state,l):(Ae(qi,`Failed to parse target state for ID '${t}': ${n}`),null)}Ws(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class gf{constructor(t,n){this.clientId=t,this.activeTargetIds=n}static $s(t,n){const r=JSON.parse(n);let l=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Kg();for(let h=0;l&&h<r.activeTargetIds.length;++h)l=p0(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return l?new gf(t,u):(Ae(qi,`Failed to parse client data for instance '${t}': ${n}`),null)}}class cp{constructor(t,n){this.clientId=t,this.onlineState=n}static $s(t){const n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new cp(n.clientId,n.onlineState):(Ae(qi,`Failed to parse online state: ${t}`),null)}}class wg{constructor(){this.activeTargetIds=Kg()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class tg{constructor(t,n,r,l,u){this.window=t,this.Ci=n,this.persistenceKey=r,this.zs=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new re(Et),this.started=!1,this.Zs=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Xs=vE(this.persistenceKey,this.zs),this.Ys=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new wg),this.eo=new RegExp(`^${HA}_${h}_([^_]*)$`),this.no=new RegExp(`^${QA}_${h}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${KA}_${h}_(\\d+)$`),this.io=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this.so=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.hs();for(const r of t){if(r===this.zs)continue;const l=this.getItem(vE(this.persistenceKey,r));if(l){const u=gf.$s(r,l);u&&(this.Js=this.Js.insert(u.clientId,u))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ys,JSON.stringify(t))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(t){let n=!1;return this.Js.forEach(((r,l)=>{l.activeTargetIds.has(t)&&(n=!0)})),n}addPendingMutation(t){this.co(t,"pending")}updateMutationState(t,n,r){this.co(t,n,r),this.lo(t)}addLocalQueryTarget(t,n=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const l=this.storage.getItem(Wm(this.persistenceKey,t));if(l){const u=Ru.$s(t,l);u&&(r=u.state)}}return n&&this.ho.Qs(t),this.oo(),r}removeLocalQueryTarget(t){this.ho.Gs(t),this.oo()}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Wm(this.persistenceKey,t))}updateQueryState(t,n,r){this.Po(t,n,r)}handleUserChange(t,n,r){n.forEach((l=>{this.lo(l)})),this.currentUser=t,r.forEach((l=>{this.addPendingMutation(l)}))}setOnlineState(t){this.To(t)}notifyBundleLoaded(t){this.Io(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(t){const n=this.storage.getItem(t);return W(qi,"READ",t,n),n}setItem(t,n){W(qi,"SET",t,n),this.storage.setItem(t,n)}removeItem(t){W(qi,"REMOVE",t),this.storage.removeItem(t)}Hs(t){const n=t;if(n.storageArea===this.storage){if(W(qi,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Ae("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(u){let h=Sn.ce;if(u!=null)try{const m=JSON.parse(u);ft(typeof m=="number",30636,{yo:u}),h=m}catch(m){Ae(qi,"Failed to read sequence number from WebStorage",m)}return h})(n.newValue);r!==Sn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((l=>this.syncEngine.bo(l))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(t,n,r){const l=new mf(this.currentUser,t,n,r),u=TE(this.persistenceKey,this.currentUser,t);this.setItem(u,l.Ws())}lo(t){const n=TE(this.persistenceKey,this.currentUser,t);this.removeItem(n)}To(t){const n={clientId:this.zs,onlineState:t};this.storage.setItem(this.io,JSON.stringify(n))}Po(t,n,r){const l=Wm(this.persistenceKey,t),u=new Ru(t,n,r);this.setItem(l,u.Ws())}Io(t){const n=JSON.stringify(Array.from(t));this.setItem(this.so,n)}Eo(t){const n=this.eo.exec(t);return n?n[1]:null}Ao(t,n){const r=this.Eo(t);return gf.$s(r,n)}Vo(t,n){const r=this.no.exec(t),l=Number(r[1]),u=r[2]!==void 0?r[2]:null;return mf.$s(new Qe(u),l,n)}fo(t,n){const r=this.ro.exec(t),l=Number(r[1]);return Ru.$s(l,n)}_o(t){return cp.$s(t)}wo(t){return JSON.parse(t)}async mo(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.So(t.batchId,t.state,t.error);W(qi,`Ignoring mutation for non-active user ${t.user.uid}`)}po(t){return this.syncEngine.Do(t.targetId,t.state,t.error)}Ro(t,n){const r=n?this.Js.insert(t,n):this.Js.remove(t),l=this.uo(this.Js),u=this.uo(r),h=[],m=[];return u.forEach((g=>{l.has(g)||h.push(g)})),l.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Co(h,m).then((()=>{this.Js=r}))}ao(t){this.Js.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}uo(t){let n=Kg();return t.forEach(((r,l)=>{n=n.unionWith(l.activeTargetIds)})),n}}class YA{constructor(){this.vo=new wg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,n,r){this.Fo[t]=n}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new wg,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{Mo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="ConnectivityMonitor";class AE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){W(EE,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){W(EE,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function bg(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="RestConnection",s1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class a1{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+t.host,this.Uo=`projects/${r}/databases/${l}`,this.$o=this.databaseId.database===cg?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Wo(t,n,r,l,u){const h=bg(),m=this.Qo(t,n.toUriEncodedString());W(eg,`Sending RPC '${t}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:_}=new URL(m),T=XE(_);return this.zo(t,m,g,r,T).then((A=>(W(eg,`Received RPC '${t}' ${h}: `,A),A)),(A=>{throw mi(eg,`RPC '${t}' ${h} failed with error: `,A,"url: ",m,"request:",r),A}))}jo(t,n,r,l,u,h){return this.Wo(t,n,r,l,u)}Go(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>t[u]=l)),r&&r.headers.forEach(((l,u)=>t[u]=l))}Qo(t,n){const r=s1[t];let l=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection",mu=(a,t,n)=>{a.listen(t,(r=>{try{n(r)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Il extends a1{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!Il.c_){const t=i0();mu(t,n0.STAT_EVENT,(n=>{n.stat===ig.PROXY?W(rn,"STAT_EVENT: detected buffering proxy"):n.stat===ig.NOPROXY&&W(rn,"STAT_EVENT: detected no buffering proxy")})),Il.c_=!0}}zo(t,n,r,l,u){const h=bg();return new Promise(((m,g)=>{const _=new t0;_.setWithCredentials(!0),_.listenOnce(e0.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case jh.NO_ERROR:const A=_.getResponseJson();W(rn,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(A)),m(A);break;case jh.TIMEOUT:W(rn,`RPC '${t}' ${h} timed out`),g(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const b=_.getStatus();if(W(rn,`RPC '${t}' ${h} failed with status:`,b,"response text:",_.getResponseText()),b>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const J=B==null?void 0:B.error;if(J&&J.status&&J.message){const $=(function(mt){const _t=mt.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_t)>=0?_t:F.UNKNOWN})(J.status);g(new Z($,J.message))}else g(new Z(F.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Z(F.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:t,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{W(rn,`RPC '${t}' ${h} completed.`)}}));const T=JSON.stringify(l);W(rn,`RPC '${t}' ${h} sending request:`,l),_.send(n,"POST",T,r,15)}))}T_(t,n,r){const l=bg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const _=u.join("");W(rn,`Creating RPC '${t}' stream ${l}: ${_}`,m);const T=h.createWebChannel(_,m);this.I_(T);let A=!1,b=!1;const B=new l1({Ho:J=>{b?W(rn,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(A||(W(rn,`Opening RPC '${t}' stream ${l} transport.`),T.open(),A=!0),W(rn,`RPC '${t}' stream ${l} sending:`,J),T.send(J))},Jo:()=>T.close()});return mu(T,gu.EventType.OPEN,(()=>{b||(W(rn,`RPC '${t}' stream ${l} transport opened.`),B.i_())})),mu(T,gu.EventType.CLOSE,(()=>{b||(b=!0,W(rn,`RPC '${t}' stream ${l} transport closed`),B.o_(),this.E_(T))})),mu(T,gu.EventType.ERROR,(J=>{b||(b=!0,mi(rn,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),B.o_(new Z(F.UNAVAILABLE,"The operation could not be completed")))})),mu(T,gu.EventType.MESSAGE,(J=>{var $;if(!b){const tt=J.data[0];ft(!!tt,16349);const mt=tt,_t=(mt==null?void 0:mt.error)||(($=mt[0])==null?void 0:$.error);if(_t){W(rn,`RPC '${t}' stream ${l} received error:`,_t);const ct=_t.status;let Vt=(function(I){const w=Oe[I];if(w!==void 0)return aA(w)})(ct),lt=_t.message;ct==="NOT_FOUND"&&lt.includes("database")&&lt.includes("does not exist")&&lt.includes(this.databaseId.database)&&mi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Vt===void 0&&(Vt=F.INTERNAL,lt="Unknown error status: "+ct+" with message "+_t.message),b=!0,B.o_(new Z(Vt,lt)),T.close()}else W(rn,`RPC '${t}' stream ${l} received:`,tt),B.__(tt)}})),Il.u_(),setTimeout((()=>{B.s_()}),0),B}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((n=>n===t))}Go(t,n,r){super.Go(t,n,r),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return r0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(a){return new Il(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){return typeof window<"u"?window:null}function Wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(a){return new dR(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il.c_=!1;class hp{constructor(t,n,r=1e3,l=1.5,u=6e4){this.Ci=t,this.timerId=n,this.R_=r,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&W("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="PersistentStream";class ZA{constructor(t,n,r,l,u,h,m,g){this.Ci=t,this.b_=r,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hp(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Ae(n.toString()),Ae("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(n)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{t((()=>{const l=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,n){const r=this.Q_(this.D_);this.stream=this.j_(t,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return W(SE,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return n=>{this.Ci.enqueueAndForget((()=>this.D_===t?n():(W(SE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class u1 extends ZA{constructor(t,n,r,l,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,h),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=pR(this.serializer,t),r=(function(u){if(!("targetChange"in u))return gt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?gt.min():h.readTime?Se(h.readTime):gt.min()})(t);return this.listener.J_(n,r)}Z_(t){const n={};n.database=vg(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=af(g)?{documents:pA(u,g)}:{query:_A(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=cA(u,h.resumeToken);const _=_g(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(gt.min())>0){m.readTime=Bl(u,h.snapshotVersion.toTimestamp());const _=_g(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,t);const r=yR(this.serializer,t);r&&(n.labels=r),this.K_(n)}X_(t){const n={};n.database=vg(this.serializer),n.removeTarget=t,this.K_(n)}}class c1 extends ZA{constructor(t,n,r,l,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}H_(t){return ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=_R(t.writeResults,t.commitTime),r=Se(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=vg(this.serializer),this.K_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>qu(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{}class f1 extends h1{constructor(t,n,r,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(t,yg(n,r),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Z(F.UNKNOWN,u.toString())}))}jo(t,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.jo(t,yg(n,r),l,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Z(F.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function d1(a,t,n,r){return new f1(a,t,n,r)}class m1{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ae(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class g1{constructor(t,n,r,l,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{r.enqueueAndForget((async()=>{_s(this)&&(W(pa,"Restarting streams for network reachability change."),await(async function(g){const _=it(g);_.Ea.add(4),await $l(_),_.Va.set("Unknown"),_.Ea.delete(4),await nc(_)})(this))}))})),this.Va=new m1(r,l)}}async function nc(a){if(_s(a))for(const t of a.Ra)await t(!0)}async function $l(a){for(const t of a.Ra)await t(!1)}function Nf(a,t){const n=it(a);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),mp(n)?dp(n):to(n).O_()&&fp(n,t))}function jl(a,t){const n=it(a),r=to(n);n.Ia.delete(t),r.O_()&&JA(n,t),n.Ia.size===0&&(r.O_()?r.L_():_s(n)&&n.Va.set("Unknown"))}function fp(a,t){if(a.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gt.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}to(a).Z_(t)}function JA(a,t){a.da.$e(t),to(a).X_(t)}function dp(a){a.da=new uR({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),At:t=>a.Ia.get(t)||null,ht:()=>a.datastore.serializer.databaseId}),to(a).start(),a.Va.ua()}function mp(a){return _s(a)&&!to(a).x_()&&a.Ia.size>0}function _s(a){return it(a).Ea.size===0}function $A(a){a.da=void 0}async function p1(a){a.Va.set("Online")}async function _1(a){a.Ia.forEach(((t,n)=>{fp(a,t)}))}async function y1(a,t){$A(a),mp(a)?(a.Va.ha(t),dp(a)):a.Va.set("Unknown")}async function v1(a,t,n){if(a.Va.set("Online"),t instanceof uA&&t.state===2&&t.cause)try{await(async function(l,u){const h=u.cause;for(const m of u.targetIds)l.Ia.has(m)&&(await l.remoteSyncer.rejectListen(m,h),l.Ia.delete(m),l.da.removeTarget(m))})(a,t)}catch(r){W(pa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await pf(a,r)}else if(t instanceof Jh?a.da.Xe(t):t instanceof oA?a.da.st(t):a.da.tt(t),!n.isEqual(gt.min()))try{const r=await BA(a.localStore);n.compareTo(r)>=0&&await(function(u,h){const m=u.da.Tt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(_);T&&u.Ia.set(_,T.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(_e.EMPTY_BYTE_STRING,T.snapshotVersion)),JA(u,g);const A=new hr(T.target,g,_,T.sequenceNumber);fp(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(a,n)}catch(r){W(pa,"Failed to raise snapshot:",r),await pf(a,r)}}async function pf(a,t,n){if(!gs(t))throw t;a.Ea.add(1),await $l(a),a.Va.set("Offline"),n||(n=()=>BA(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{W(pa,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await nc(a)}))}function WA(a,t){return t().catch((n=>pf(a,n,t)))}async function Wl(a){const t=it(a),n=fs(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ss;for(;T1(t);)try{const l=await e1(t.localStore,r);if(l===null){t.Ta.length===0&&n.L_();break}r=l.batchId,E1(t,l)}catch(l){await pf(t,l)}tS(t)&&eS(t)}function T1(a){return _s(a)&&a.Ta.length<10}function E1(a,t){a.Ta.push(t);const n=fs(a);n.O_()&&n.Y_&&n.ea(t.mutations)}function tS(a){return _s(a)&&!fs(a).x_()&&a.Ta.length>0}function eS(a){fs(a).start()}async function A1(a){fs(a).ra()}async function S1(a){const t=fs(a);for(const n of a.Ta)t.ea(n.mutations)}async function w1(a,t,n){const r=a.Ta.shift(),l=Jg.from(r,t,n);await WA(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await Wl(a)}async function b1(a,t){t&&fs(a).Y_&&await(async function(r,l){if((function(h){return sA(h)&&h!==F.ABORTED})(l.code)){const u=r.Ta.shift();fs(r).B_(),await WA(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Wl(r)}})(a,t),tS(a)&&eS(a)}async function wE(a,t){const n=it(a);n.asyncQueue.verifyOperationInProgress(),W(pa,"RemoteStore received new credentials");const r=_s(n);n.Ea.add(3),await $l(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await nc(n)}async function Ig(a,t){const n=it(a);t?(n.Ea.delete(2),await nc(n)):t||(n.Ea.add(2),await $l(n),n.Va.set("Unknown"))}function to(a){return a.ma||(a.ma=(function(n,r,l){const u=it(n);return u.sa(),new u1(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Zo:p1.bind(null,a),Yo:_1.bind(null,a),t_:y1.bind(null,a),J_:v1.bind(null,a)}),a.Ra.push((async t=>{t?(a.ma.B_(),mp(a)?dp(a):a.Va.set("Unknown")):(await a.ma.stop(),$A(a))}))),a.ma}function fs(a){return a.fa||(a.fa=(function(n,r,l){const u=it(n);return u.sa(),new c1(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Zo:()=>Promise.resolve(),Yo:A1.bind(null,a),t_:b1.bind(null,a),ta:S1.bind(null,a),na:w1.bind(null,a)}),a.Ra.push((async t=>{t?(a.fa.B_(),await Wl(a)):(await a.fa.stop(),a.Ta.length>0&&(W(pa,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t,n,r,l,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,l,u){const h=Date.now()+r,m=new gp(t,n,h,l,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eo(a,t){if(Ae("AsyncQueue",`${t}: ${a}`),gs(a))return new Z(F.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static emptySet(t){return new Rl(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||nt.comparator(n.key,r.key):(n,r)=>nt.comparator(n.key,r.key),this.keyedMap=pu(),this.sortedSet=new re(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Rl)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Rl;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.ga=new re(nt.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):at(63341,{Vt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Gl{constructor(t,n,r,l,u,h,m,g,_){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,n,r,l,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new Gl(t,n,Rl.emptySet(n),h,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class R1{constructor(){this.queries=IE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=it(n),u=l.queries;l.queries=IE(),u.forEach(((h,m)=>{for(const g of m.ba)g.onError(r)}))})(this,new Z(F.ABORTED,"Firestore shutting down"))}}function IE(){return new gr((a=>H0(a)),Zu)}async function pp(a,t){const n=it(a);let r=3;const l=t.query;let u=n.queries.get(l);u?!u.Sa()&&t.Da()&&(r=2):(u=new I1,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const m=eo(h,`Initialization of query '${El(t.query)}' failed`);return void t.onError(m)}n.queries.set(l,u),u.ba.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&yp(n)}async function _p(a,t){const n=it(a),r=t.query;let l=3;const u=n.queries.get(r);if(u){const h=u.ba.indexOf(t);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=t.Da()?0:1:!u.Sa()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function V1(a,t){const n=it(a);let r=!1;for(const l of t){const u=l.query,h=n.queries.get(u);if(h){for(const m of h.ba)m.Fa(l)&&(r=!0);h.wa=l}}r&&yp(n)}function D1(a,t,n){const r=it(a),l=r.queries.get(t);if(l)for(const u of l.ba)u.onError(n);r.queries.delete(t)}function yp(a){a.Ca.forEach((t=>{t.next()}))}var Rg,RE;(RE=Rg||(Rg={})).Ma="default",RE.Cache="cache";class vp{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new Gl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Gl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Rg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(t,n){this.qa=t,this.byteLength=n}Ua(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t){this.serializer=t}Ks(t){return ji(this.serializer,t)}qs(t){return t.metadata.exists?gA(this.serializer,t.document,!1):le.newNoDocument(this.Ks(t.metadata.name),this.Us(t.metadata.readTime))}Us(t){return Se(t)}}class x1{constructor(t,n){this.$a=t,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=nS(t)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(t){this.progress.bytesLoaded+=t.byteLength;let n=this.progress.documentsLoaded;if(t.qa.namedQuery)this.Wa.push(t.qa.namedQuery);else if(t.qa.documentMetadata){this.Qa.push({metadata:t.qa.documentMetadata}),t.qa.documentMetadata.exists||++n;const r=xt.fromString(t.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.qa.document&&(this.Qa[this.Qa.length-1].document=t.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(t){const n=new Map,r=new VE(this.serializer);for(const l of t)if(l.metadata.queries){const u=r.Ks(l.metadata.name);for(const h of l.metadata.queries){const m=(n.get(h)||bt()).add(u);n.set(h,m)}}return n}async ja(t){const n=await n1(t,new VE(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const l of this.Wa)await i1(t,l,r.get(l.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function nS(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(t){this.key=t}}class rS{constructor(t){this.key=t}}class sS{constructor(t,n){this.query=t,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=bt(),this.mutatedKeys=bt(),this.eu=K0(t),this.tu=new Rl(this.eu)}get nu(){return this.Za}ru(t,n){const r=n?n.iu:new bE,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,m=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,A)=>{const b=l.get(T),B=Ju(this.query,A)?A:null,J=!!b&&this.mutatedKeys.has(b.key),$=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let tt=!1;b&&B?b.data.isEqual(B.data)?J!==$&&(r.track({type:3,doc:B}),tt=!0):this.su(b,B)||(r.track({type:2,doc:B}),tt=!0,(g&&this.eu(B,g)>0||_&&this.eu(B,_)<0)&&(m=!0)):!b&&B?(r.track({type:0,doc:B}),tt=!0):b&&!B&&(r.track({type:1,doc:b}),tt=!0,(g||_)&&(m=!0)),tt&&(B?(h=h.add(B),u=$?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:h,iu:r,Ss:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((T,A)=>(function(B,J){const $=tt=>{switch(tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Vt:tt})}};return $(B)-$(J)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(r),l=l??!1;const m=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,_=g!==this.Xa;return this.Xa=g,h.length!==0||_?{snapshot:new Gl(this.query,t.tu,u,h,t.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=bt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return t.forEach((r=>{this.Ya.has(r)||n.push(new rS(r))})),this.Ya.forEach((r=>{t.has(r)||n.push(new iS(r))})),n}cu(t){this.Za=t.ks,this.Ya=bt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ys="SyncEngine";class N1{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class M1{constructor(t){this.key=t,this.hu=!1}}class O1{constructor(t,n,r,l,u,h){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new gr((m=>H0(m)),Zu),this.Iu=new Map,this.Eu=new Set,this.Ru=new re(nt.comparator),this.Au=new Map,this.Vu=new rp,this.du={},this.mu=new Map,this.fu=ga.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function P1(a,t,n=!0){const r=Mf(a);let l;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await aS(r,t,n,!0),l}async function z1(a,t){const n=Mf(a);await aS(n,t,!0,!1)}async function aS(a,t,n,r){const l=await kl(a.localStore,mn(t)),u=l.targetId,h=a.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await Tp(a,t,u,h==="current",l.resumeToken)),a.isPrimaryClient&&n&&Nf(a.remoteStore,l),m}async function Tp(a,t,n,r,l){a.pu=(A,b,B)=>(async function($,tt,mt,_t){let ct=tt.view.ru(mt);ct.Ss&&(ct=await df($.localStore,tt.query,!1).then((({documents:I})=>tt.view.ru(I,ct))));const Vt=_t&&_t.targetChanges.get(tt.targetId),lt=_t&&_t.targetMismatches.get(tt.targetId)!=null,ht=tt.view.applyChanges(ct,$.isPrimaryClient,Vt,lt);return Vg($,tt.targetId,ht.au),ht.snapshot})(a,A,b,B);const u=await df(a.localStore,t,!0),h=new sS(t,u.ks),m=h.ru(u.documents),g=tc.createSynthesizedTargetChangeForCurrentChange(n,r&&a.onlineState!=="Offline",l),_=h.applyChanges(m,a.isPrimaryClient,g);Vg(a,n,_.au);const T=new N1(t,n,h);return a.Tu.set(t,T),a.Iu.has(n)?a.Iu.get(n).push(t):a.Iu.set(n,[t]),_.snapshot}async function U1(a,t,n){const r=it(a),l=r.Tu.get(t),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((h=>!Zu(h,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Fl(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&jl(r.remoteStore,l.targetId),Hl(r,l.targetId)})).catch(ms)):(Hl(r,l.targetId),await Fl(r.localStore,l.targetId,!0))}async function L1(a,t){const n=it(a),r=n.Tu.get(t),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jl(n.remoteStore,r.targetId))}async function q1(a,t,n){const r=wp(a);try{const l=await(function(h,m){const g=it(h),_=Gt.now(),T=m.reduce(((B,J)=>B.add(J.key)),bt());let A,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let J=bn(),$=bt();return g.xs.getEntries(B,T).next((tt=>{J=tt,J.forEach(((mt,_t)=>{_t.isValidDocument()||($=$.add(mt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(B,J))).next((tt=>{A=tt;const mt=[];for(const _t of m){const ct=aR(_t,A.get(_t.key).overlayedDocument);ct!=null&&mt.push(new pr(_t.key,ct,z0(ct.value.mapValue),me.exists(!0)))}return g.mutationQueue.addMutationBatch(B,_,mt,m)})).next((tt=>{b=tt;const mt=tt.applyToLocalDocumentSet(A,$);return g.documentOverlayCache.saveOverlays(B,tt.batchId,mt)}))})).then((()=>({batchId:b.batchId,changes:X0(A)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),(function(h,m,g){let _=h.du[h.currentUser.toKey()];_||(_=new re(Et)),_=_.insert(m,g),h.du[h.currentUser.toKey()]=_})(r,l.batchId,n),await _r(r,l.changes),await Wl(r.remoteStore)}catch(l){const u=eo(l,"Failed to persist write");n.reject(u)}}async function lS(a,t){const n=it(a);try{const r=await t1(n.localStore,t);t.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(ft(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?ft(h.hu,14607):l.removedDocuments.size>0&&(ft(h.hu,42227),h.hu=!1))})),await _r(n,r,t)}catch(r){await ms(r)}}function DE(a,t,n){const r=it(a);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&l.push(m.snapshot)})),(function(h,m){const g=it(h);g.onlineState=m;let _=!1;g.queries.forEach(((T,A)=>{for(const b of A.ba)b.va(m)&&(_=!0)})),_&&yp(g)})(r.eventManager,t),l.length&&r.Pu.J_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function B1(a,t,n){const r=it(a);r.sharedClientState.updateQueryState(t,"rejected",n);const l=r.Au.get(t),u=l&&l.key;if(u){let h=new re(nt.comparator);h=h.insert(u,le.newNoDocument(u,gt.min()));const m=bt().add(u),g=new Wu(gt.min(),new Map,new re(Et),h,m);await lS(r,g),r.Ru=r.Ru.remove(u),r.Au.delete(t),Sp(r)}else await Fl(r.localStore,t,!1).then((()=>Hl(r,t,n))).catch(ms)}async function k1(a,t){const n=it(a),r=t.batch.batchId;try{const l=await WR(n.localStore,t);Ap(n,r,null),Ep(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _r(n,l)}catch(l){await ms(l)}}async function F1(a,t,n){const r=it(a);try{const l=await(function(h,m){const g=it(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return g.mutationQueue.lookupMutationBatch(_,m).next((A=>(ft(A!==null,37113),T=A.keys(),g.mutationQueue.removeMutationBatch(_,A)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>g.localDocuments.getDocuments(_,T)))}))})(r.localStore,t);Ap(r,t,n),Ep(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _r(r,l)}catch(l){await ms(l)}}async function j1(a,t){const n=it(a);_s(n.remoteStore)||W(ys,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(h){const m=it(h);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(g=>m.mutationQueue.getHighestUnacknowledgedBatchId(g)))})(n.localStore);if(r===ss)return void t.resolve();const l=n.mu.get(r)||[];l.push(t),n.mu.set(r,l)}catch(r){const l=eo(r,"Initialization of waitForPendingWrites() operation failed");t.reject(l)}}function Ep(a,t){(a.mu.get(t)||[]).forEach((n=>{n.resolve()})),a.mu.delete(t)}function Ap(a,t,n){const r=it(a);let l=r.du[r.currentUser.toKey()];if(l){const u=l.get(t);u&&(n?u.reject(n):u.resolve(),l=l.remove(t)),r.du[r.currentUser.toKey()]=l}}function Hl(a,t,n=null){a.sharedClientState.removeLocalQueryTarget(t);for(const r of a.Iu.get(t))a.Tu.delete(r),n&&a.Pu.yu(r,n);a.Iu.delete(t),a.isPrimaryClient&&a.Vu.Gr(t).forEach((r=>{a.Vu.containsKey(r)||oS(a,r)}))}function oS(a,t){a.Eu.delete(t.path.canonicalString());const n=a.Ru.get(t);n!==null&&(jl(a.remoteStore,n),a.Ru=a.Ru.remove(t),a.Au.delete(n),Sp(a))}function Vg(a,t,n){for(const r of n)r instanceof iS?(a.Vu.addReference(r.key,t),G1(a,r)):r instanceof rS?(W(ys,"Document no longer in limbo: "+r.key),a.Vu.removeReference(r.key,t),a.Vu.containsKey(r.key)||oS(a,r.key)):at(19791,{wu:r})}function G1(a,t){const n=t.key,r=n.path.canonicalString();a.Ru.get(n)||a.Eu.has(r)||(W(ys,"New document in limbo: "+n),a.Eu.add(r),Sp(a))}function Sp(a){for(;a.Eu.size>0&&a.Ru.size<a.maxConcurrentLimboResolutions;){const t=a.Eu.values().next().value;a.Eu.delete(t);const n=new nt(xt.fromString(t)),r=a.fu.next();a.Au.set(r,new M1(n)),a.Ru=a.Ru.insert(n,r),Nf(a.remoteStore,new hr(mn(Xl(n.path)),r,"TargetPurposeLimboResolution",Sn.ce))}}async function _r(a,t,n){const r=it(a),l=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{h.push(r.pu(g,t,n).then((_=>{var T;if((_||n)&&r.isPrimaryClient){const A=_?!_.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(_){l.push(_);const A=op.Es(g.targetId,_);u.push(A)}})))})),await Promise.all(h),r.Pu.J_(l),await(async function(g,_){const T=it(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>z.forEach(_,(b=>z.forEach(b.Ts,(B=>T.persistence.referenceDelegate.addReference(A,b.targetId,B))).next((()=>z.forEach(b.Is,(B=>T.persistence.referenceDelegate.removeReference(A,b.targetId,B)))))))))}catch(A){if(!gs(A))throw A;W(up,"Failed to update sequence numbers: "+A)}for(const A of _){const b=A.targetId;if(!A.fromCache){const B=T.vs.get(b),J=B.snapshotVersion,$=B.withLastLimboFreeSnapshotVersion(J);T.vs=T.vs.insert(b,$)}}})(r.localStore,u))}async function H1(a,t){const n=it(a);if(!n.currentUser.isEqual(t)){W(ys,"User change. New user:",t.toKey());const r=await qA(n.localStore,t);n.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new Z(F.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await _r(n,r.Ns)}}function Q1(a,t){const n=it(a),r=n.Au.get(t);if(r&&r.hu)return bt().add(r.key);{let l=bt();const u=n.Iu.get(t);if(!u)return l;for(const h of u){const m=n.Tu.get(h);l=l.unionWith(m.view.nu)}return l}}async function K1(a,t){const n=it(a),r=await df(n.localStore,t.query,!0),l=t.view.cu(r);return n.isPrimaryClient&&Vg(n,t.targetId,l.au),l}async function Y1(a,t){const n=it(a);return jA(n.localStore,t).then((r=>_r(n,r)))}async function X1(a,t,n,r){const l=it(a),u=await(function(m,g){const _=it(m),T=it(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",(A=>T.Xn(A,g).next((b=>b?_.localDocuments.getDocuments(A,b):z.resolve(null)))))})(l.localStore,t);u!==null?(n==="pending"?await Wl(l.remoteStore):n==="acknowledged"||n==="rejected"?(Ap(l,t,r||null),Ep(l,t),(function(m,g){it(it(m).mutationQueue).nr(g)})(l.localStore,t)):at(6720,"Unknown batchState",{bu:n}),await _r(l,u)):W(ys,"Cannot apply mutation batch with id: "+t)}async function Z1(a,t){const n=it(a);if(Mf(n),wp(n),t===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),l=await CE(n,r.toArray());n.gu=!0,await Ig(n.remoteStore,!0);for(const u of l)Nf(n.remoteStore,u)}else if(t===!1&&n.gu!==!1){const r=[];let l=Promise.resolve();n.Iu.forEach(((u,h)=>{n.sharedClientState.isLocalQueryTarget(h)?r.push(h):l=l.then((()=>(Hl(n,h),Fl(n.localStore,h,!0)))),jl(n.remoteStore,h)})),await l,await CE(n,r),(function(h){const m=it(h);m.Au.forEach(((g,_)=>{jl(m.remoteStore,_)})),m.Vu.zr(),m.Au=new Map,m.Ru=new re(nt.comparator)})(n),n.gu=!1,await Ig(n.remoteStore,!1)}}async function CE(a,t,n){const r=it(a),l=[],u=[];for(const h of t){let m;const g=r.Iu.get(h);if(g&&g.length!==0){m=await kl(r.localStore,mn(g[0]));for(const _ of g){const T=r.Tu.get(_),A=await K1(r,T);A.snapshot&&u.push(A.snapshot)}}else{const _=await FA(r.localStore,h);m=await kl(r.localStore,_),await Tp(r,uS(_),h,!1,m.resumeToken)}l.push(m)}return r.Pu.J_(u),l}function uS(a){return G0(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function J1(a){return(function(n){return it(it(n).persistence).hs()})(it(a).localStore)}async function $1(a,t,n,r){const l=it(a);if(l.gu)return void W(ys,"Ignoring unexpected query state notification.");const u=l.Iu.get(t);if(u&&u.length>0)switch(n){case"current":case"not-current":{const h=await jA(l.localStore,Q0(u[0])),m=Wu.createSynthesizedRemoteEventForCurrentChange(t,n==="current",_e.EMPTY_BYTE_STRING);await _r(l,h,m);break}case"rejected":await Fl(l.localStore,t,!0),Hl(l,t,r);break;default:at(64155,n)}}async function W1(a,t,n){const r=Mf(a);if(r.gu){for(const l of t){if(r.Iu.has(l)&&r.sharedClientState.isActiveQueryTarget(l)){W(ys,"Adding an already active target "+l);continue}const u=await FA(r.localStore,l),h=await kl(r.localStore,u);await Tp(r,uS(u),h.targetId,!1,h.resumeToken),Nf(r.remoteStore,h)}for(const l of n)r.Iu.has(l)&&await Fl(r.localStore,l,!1).then((()=>{jl(r.remoteStore,l),Hl(r,l)})).catch(ms)}}function Mf(a){const t=it(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=lS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q1.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=B1.bind(null,t),t.Pu.J_=V1.bind(null,t.eventManager),t.Pu.yu=D1.bind(null,t.eventManager),t}function wp(a){const t=it(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=k1.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=F1.bind(null,t),t}function tV(a,t,n){const r=it(a);(async function(u,h,m){try{const g=await h.getMetadata();if(await(function(B,J){const $=it(B),tt=Se(J.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",(mt=>$.Pi.getBundleMetadata(mt,J.id))).then((mt=>!!mt&&mt.createTime.compareTo(tt)>=0))})(u.localStore,g))return await h.close(),m._completeWith((function(B){return{taskState:"Success",documentsLoaded:B.totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}})(g)),Promise.resolve(new Set);m._updateProgress(nS(g));const _=new x1(g,h.serializer);let T=await h.Su();for(;T;){const b=await _.Ga(T);b&&m._updateProgress(b),T=await h.Su()}const A=await _.ja(u.localStore);return await _r(u,A.Ja,void 0),await(function(B,J){const $=it(B);return $.persistence.runTransaction("Save bundle","readwrite",(tt=>$.Pi.saveBundleMetadata(tt,J)))})(u.localStore,g),m._completeWith(A.progress),Promise.resolve(A.Ha)}catch(g){return mi(ys,`Loading bundle failed with ${g}`),m._failWith(g),Promise.resolve(new Set)}})(r,t,n).then((l=>{r.sharedClientState.notifyBundleLoaded(l)}))}class Bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ec(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return LA(this.persistence,new UA,t.initialUser,this.serializer)}Cu(t){return new sp(xf.Vi,this.serializer)}Du(t){return new YA}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bu.provider={build:()=>new Bu};class eV extends Bu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ft(this.persistence.referenceDelegate instanceof ff,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xA(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new sp((r=>ff.Vi(r,n)),this.serializer)}}class cS extends Bu{constructor(t,n,r){super(),this.xu=t,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await wp(this.xu.syncEngine),await Wl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return LA(this.persistence,new UA,t.initialUser,this.serializer)}Fu(t,n){const r=this.persistence.referenceDelegate.garbageCollector;return new xA(r,t.asyncQueue,n)}Mu(t,n){const r=new rI(n,this.persistence);return new iI(t.asyncQueue,r)}Cu(t){const n=lp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new ap(this.synchronizeTabs,n,t.clientId,r,t.asyncQueue,XA(),Wh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new YA}}class nV extends cS{constructor(t,n){super(t,n,!1),this.xu=t,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const n=this.xu.syncEngine;this.sharedClientState instanceof tg&&(this.sharedClientState.syncEngine={So:X1.bind(null,n),Do:$1.bind(null,n),Co:W1.bind(null,n),hs:J1.bind(null,n),bo:Y1.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await Z1(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const n=XA();if(!tg.v(n))throw new Z(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new tg(n,t.asyncQueue,r,t.clientId,t.initialUser)}}class ku{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H1.bind(null,this.syncEngine),await Ig(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new R1})()}createDatastore(t){const n=ec(t.databaseInfo.databaseId),r=o1(t.databaseInfo);return d1(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,l,u,h,m){return new g1(r,l,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>DE(this.syncEngine,n,0)),(function(){return AE.v()?new AE:new r1})())}createSyncEngine(t,n){return(function(l,u,h,m,g,_,T){const A=new O1(l,u,h,m,g,_);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(l){const u=it(l);W(pa,"RemoteStore shutting down."),u.Ea.add(5),await $l(u),u.Aa.shutdown(),u.Va.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}ku.provider={build:()=>new ku};function xE(a,t=10240){let n=0;return{async read(){if(n<a.byteLength){const r={value:a.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ae("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(t,n){this.Bu=t,this.serializer=n,this.metadata=new en,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const t=await this.Ku();if(t===null)return null;const n=this.Lu.decode(t),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const l=await this.Uu(r);return new C1(JSON.parse(l),t.length+r)}$u(){return this.buffer.findIndex((t=>t===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const t=this.$u();t<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),n}async Uu(t){for(;this.buffer.length<t;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),n}qu(t){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${t}`)}async Wu(){const t=await this.Bu.read();if(!t.done){const n=new Uint8Array(this.buffer.length+t.value.length);n.set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rV=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(l,u){const h=it(l),m={documents:u.map((A=>Lu(h.serializer,A)))},g=await h.jo("BatchGetDocuments",h.serializer.databaseId,xt.emptyPath(),m,u.length),_=new Map;g.forEach((A=>{const b=gR(h.serializer,A);_.set(b.key.toString(),b)}));const T=[];return u.forEach((A=>{const b=_.get(A.toString());ft(!!b,55234,{key:A}),T.push(b)})),T})(this.datastore,t);return n.forEach((r=>this.recordVersion(r))),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new Jl(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((n=>{t.delete(n.key.toString())})),t.forEach(((n,r)=>{const l=nt.fromPath(r);this.mutations.push(new Xg(l,this.precondition(l)))})),await(async function(r,l){const u=it(r),h={writes:l.map((m=>qu(u.serializer,m)))};await u.Wo("Commit",u.serializer.databaseId,xt.emptyPath(),h)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw at(50498,{Gu:t.constructor.name});n=gt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new Z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(gt.min())?me.exists(!1):me.updateTime(n):me.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(gt.min()))throw new Z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return me.updateTime(n)}return me.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(t,n,r,l,u){this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=l,this.deferred=u,this.zu=r.maxAttempts,this.M_=new hp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const t=new rV(this.datastore),n=this.Ju(t);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(r)})).catch((l=>{this.Zu(l)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(t){try{const n=this.updateFunction(t);return!Ku(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(t){this.zu>0&&this.Xu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(t)}Xu(t){if((t==null?void 0:t.name)==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class aV{constructor(t,n,r,l,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=l,this.user=Qe.UNAUTHENTICATED,this.clientId=Pg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{W(ds,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(W(ds,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=eo(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function ng(a,t){a.asyncQueue.verifyOperationInProgress(),W(ds,"Initializing OfflineComponentProvider");const n=a.configuration;await t.initialize(n);let r=n.initialUser;a.setCredentialChangeListener((async l=>{r.isEqual(l)||(await qA(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=t}async function NE(a,t){a.asyncQueue.verifyOperationInProgress();const n=await bp(a);W(ds,"Initializing OnlineComponentProvider"),await t.initialize(n,a.configuration),a.setCredentialChangeListener((r=>wE(t.remoteStore,r))),a.setAppCheckTokenChangeListener(((r,l)=>wE(t.remoteStore,l))),a._onlineComponents=t}async function bp(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){W(ds,"Using user provided OfflineComponentProvider");try{await ng(a,a._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===F.FAILED_PRECONDITION||l.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;mi("Error using user provided cache. Falling back to memory cache: "+n),await ng(a,new Bu)}}else W(ds,"Using default OfflineComponentProvider"),await ng(a,new eV(void 0));return a._offlineComponents}async function Pf(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(W(ds,"Using user provided OnlineComponentProvider"),await NE(a,a._uninitializedComponentsProvider._online)):(W(ds,"Using default OnlineComponentProvider"),await NE(a,new ku))),a._onlineComponents}function hS(a){return bp(a).then((t=>t.persistence))}function Ip(a){return bp(a).then((t=>t.localStore))}function fS(a){return Pf(a).then((t=>t.remoteStore))}function Rp(a){return Pf(a).then((t=>t.syncEngine))}function lV(a){return Pf(a).then((t=>t.datastore))}async function Ql(a){const t=await Pf(a),n=t.eventManager;return n.onListen=P1.bind(null,t.syncEngine),n.onUnlisten=U1.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=z1.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=L1.bind(null,t.syncEngine),n}function oV(a){return a.asyncQueue.enqueue((async()=>{const t=await hS(a),n=await fS(a);return t.setNetworkEnabled(!0),(function(l){const u=it(l);return u.Ea.delete(0),nc(u)})(n)}))}function uV(a){return a.asyncQueue.enqueue((async()=>{const t=await hS(a),n=await fS(a);return t.setNetworkEnabled(!1),(async function(l){const u=it(l);u.Ea.add(0),await $l(u),u.Va.set("Offline")})(n)}))}function cV(a,t,n,r){const l=new Of(r),u=new vp(t,l,n);return a.asyncQueue.enqueueAndForget((async()=>pp(await Ql(a),u))),()=>{l.Nu(),a.asyncQueue.enqueueAndForget((async()=>_p(await Ql(a),u)))}}function hV(a,t){const n=new en;return a.asyncQueue.enqueueAndForget((async()=>(async function(l,u,h){try{const m=await(function(_,T){const A=it(_);return A.persistence.runTransaction("read document","readonly",(b=>A.localDocuments.getDocument(b,T)))})(l,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Z(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const g=eo(m,`Failed to get document '${u} from cache`);h.reject(g)}})(await Ip(a),t,n))),n.promise}function dS(a,t,n={}){const r=new en;return a.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,_){const T=new Of({next:b=>{T.Nu(),h.enqueueAndForget((()=>_p(u,A)));const B=b.docs.has(m);!B&&b.fromCache?_.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&b.fromCache&&g&&g.source==="server"?_.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(b)},error:b=>_.reject(b)}),A=new vp(Xl(m.path),T,{includeMetadataChanges:!0,Ka:!0});return pp(u,A)})(await Ql(a),a.asyncQueue,t,n,r))),r.promise}function fV(a,t){const n=new en;return a.asyncQueue.enqueueAndForget((async()=>(async function(l,u,h){try{const m=await df(l,u,!0),g=new sS(u,m.ks),_=g.ru(m.documents),T=g.applyChanges(_,!1);h.resolve(T.snapshot)}catch(m){const g=eo(m,`Failed to execute query '${u} against cache`);h.reject(g)}})(await Ip(a),t,n))),n.promise}function mS(a,t,n={}){const r=new en;return a.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,_){const T=new Of({next:b=>{T.Nu(),h.enqueueAndForget((()=>_p(u,A))),b.fromCache&&g.source==="server"?_.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(b)},error:b=>_.reject(b)}),A=new vp(m,T,{includeMetadataChanges:!0,Ka:!0});return pp(u,A)})(await Ql(a),a.asyncQueue,t,n,r))),r.promise}function dV(a,t){const n=new en;return a.asyncQueue.enqueueAndForget((async()=>q1(await Rp(a),t,n))),n.promise}function mV(a,t){const n=new Of(t);return a.asyncQueue.enqueueAndForget((async()=>(function(l,u){it(l).Ca.add(u),u.next()})(await Ql(a),n))),()=>{n.Nu(),a.asyncQueue.enqueueAndForget((async()=>(function(l,u){it(l).Ca.delete(u)})(await Ql(a),n)))}}function gV(a,t,n){const r=new en;return a.asyncQueue.enqueueAndForget((async()=>{const l=await lV(a);new sV(a.asyncQueue,l,n,t,r).ju()})),r.promise}function pV(a,t,n,r){const l=(function(h,m){let g;return g=typeof h=="string"?lA().encode(h):h,(function(T,A){return new iV(T,A)})((function(T,A){if(T instanceof Uint8Array)return xE(T,A);if(T instanceof ArrayBuffer)return xE(new Uint8Array(T),A);if(T instanceof ReadableStream)return T.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(g),m)})(n,ec(t));a.asyncQueue.enqueueAndForget((async()=>{tV(await Rp(a),l,r)}))}function _V(a,t){return a.asyncQueue.enqueue((async()=>(function(r,l){const u=it(r);return u.persistence.runTransaction("Get named query","readonly",(h=>u.Pi.getNamedQuery(h,l)))})(await Ip(a),t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="ComponentProvider",ME=new Map;function vV(a,t,n,r,l){return new MI(a,t,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,gS(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firestore.googleapis.com",OE=!0;class PE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pS,this.ssl=OE}else this.host=t.host,this.ssl=t.ssl??OE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=RA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<OR)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}o0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gS(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ic{constructor(t,n,r,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Hb;switch(r.type){case"firstParty":return new Xb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=ME.get(n);r&&(W(yV,"Removing Datastore"),ME.delete(n),r.terminate())})(this),Promise.resolve()}}function TV(a,t,n,r={}){var _;a=kt(a,ic);const l=XE(t),u=a._getSettings(),h={...u,emulatorOptions:a._getEmulatorOptions()},m=`${t}:${n}`;l&&(Sb(`https://${m}`),wb("Firestore",!0)),u.host!==pS&&u.host!==m&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:l,emulatorOptions:r};if(!Ng(g,h)&&(a._setSettings(g),r.mockUserToken)){let T,A;if(typeof r.mockUserToken=="string")T=r.mockUserToken,A=Qe.MOCK_USER;else{T=bb(r.mockUserToken,(_=a._app)==null?void 0:_.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Qe(b)}a._authCredentials=new Qb(new a0(T,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn=class _S{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new _S(this.firestore,t,this._query)}},ie=class vu{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new vu(this.firestore,t,this._key)}toJSON(){return{type:vu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Qu(n,vu._jsonSchema))return new vu(t,r||null,new nt(xt.fromString(n.referencePath)))}};ie._jsonSchemaVersion="firestore/documentReference/1.0",ie._jsonSchema={type:Pe("string",ie._jsonSchemaVersion),referencePath:Pe("string")};let as=class yS extends gn{constructor(t,n,r){super(t,n,Xl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ie(this.firestore,null,new nt(t))}withConverter(t){return new yS(this.firestore,t,this._path)}};function vS(a,t,...n){if(a=ze(a),zg("collection","path",t),a instanceof ic){const r=xt.fromString(t,...n);return ST(r),new as(a,null,r)}{if(!(a instanceof ie||a instanceof as))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(xt.fromString(t,...n));return ST(r),new as(a.firestore,null,r)}}function EV(a,t){if(a=kt(a,ic),zg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gn(a,null,(function(r){return new mr(xt.emptyPath(),r)})(t))}function _f(a,t,...n){if(a=ze(a),arguments.length===1&&(t=Pg.newId()),zg("doc","path",t),a instanceof ic){const r=xt.fromString(t,...n);return AT(r),new ie(a,null,new nt(r))}{if(!(a instanceof ie||a instanceof as))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(xt.fromString(t,...n));return AT(r),new ie(a.firestore,a instanceof as?a.converter:null,new nt(r))}}function TS(a,t){return a=ze(a),t=ze(t),(a instanceof ie||a instanceof as)&&(t instanceof ie||t instanceof as)&&a.firestore===t.firestore&&a.path===t.path&&a.converter===t.converter}function ES(a,t){return a=ze(a),t=ze(t),a instanceof gn&&t instanceof gn&&a.firestore===t.firestore&&Zu(a._query,t._query)&&a.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="AsyncQueue";class UE{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hp(this,"async_queue_retry"),this._c=()=>{const r=Wh();r&&W(zE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new en;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!gs(t))throw t;W(zE,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ae("INTERNAL UNHANDLED ERROR: ",LE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=gp.createAndSchedule(this,t,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&at(47125,{Pc:LE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function LE(a){let t=a.message||"";return a.stack&&(t=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this._progressObserver={},this._taskCompletionResolver=new en,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,n,r){this._progressObserver={next:t,error:n,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,n){return this._taskCompletionResolver.promise.then(t,n)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=-1;let we=class extends ic{constructor(t,n,r,l){super(t,n,r,l),this.type="firestore",this._queue=new UE,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new UE(t),this._firestoreClient=void 0,await t}}};function on(a){if(a._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||AS(a),a._firestoreClient}function AS(a){var r,l,u,h;const t=a._freezeSettings(),n=vV(a._databaseId,((r=a._app)==null?void 0:r.options.appId)||"",a._persistenceKey,(l=a._app)==null?void 0:l.options.apiKey,t);a._componentsProvider||(u=t.localCache)!=null&&u._offlineComponentProvider&&((h=t.localCache)!=null&&h._onlineComponentProvider)&&(a._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),a._firestoreClient=new aV(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(g){const _=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(_),_online:_}})(a._componentsProvider))}function wV(a,t){mi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=a._freezeSettings();return SS(a,ku.provider,{build:r=>new cS(r,n.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function bV(a){mi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=a._freezeSettings();SS(a,ku.provider,{build:n=>new nV(n,t.cacheSizeBytes)})}function SS(a,t,n){if((a=kt(a,we))._firestoreClient||a._terminated)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(a._componentsProvider||a._getSettings().localCache)throw new Z(F.FAILED_PRECONDITION,"SDK cache is already specified.");a._componentsProvider={_online:t,_offline:n},AS(a)}function IV(a){if(a._initialized&&!a._terminated)throw new Z(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new en;return a._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Fi.v())return Promise.resolve();const l=r+zA;await Fi.delete(l)})(lp(a._databaseId,a._persistenceKey)),t.resolve()}catch(n){t.reject(n)}})),t.promise}function RV(a){return(function(n){const r=new en;return n.asyncQueue.enqueueAndForget((async()=>j1(await Rp(n),r))),r.promise})(on(a=kt(a,we)))}function VV(a){return oV(on(a=kt(a,we)))}function DV(a){return uV(on(a=kt(a,we)))}function CV(a,t){const n=on(a=kt(a,we)),r=new AV;return pV(n,a._databaseId,t,r),r}function xV(a,t){return _V(on(a=kt(a,we)),t).then((n=>n?new gn(a,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this._byteString=t}static fromBase64String(t){try{return new an(_e.fromBase64String(t))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new an(_e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qu(t,an._jsonSchema))return an.fromBase64String(t.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:Pe("string",an._jsonSchemaVersion),bytes:Pe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Et(this._lat,t._lat)||Et(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(t){if(Qu(t,hi._jsonSchema))return new hi(t.latitude,t.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:Pe("string",hi._jsonSchemaVersion),latitude:Pe("number"),longitude:Pe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qu(t,fi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new fi(t.vectorValues);throw new Z(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:Pe("string",fi._jsonSchemaVersion),vectorValues:Pe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=/^__.*__$/;class MV{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new pr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(t,this.data,n,this.fieldTransforms)}}class wS{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new pr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function bS(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{dataSource:a})}}class zf{constructor(t,n,r,l,u,h){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new zf({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var l;const n=(l=this.path)==null?void 0:l.child(t),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(t),r}childContextForFieldPath(t){var l;const n=(l=this.path)==null?void 0:l.child(t),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return yf(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(bS(this.dataSource)&&NV.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class OV{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ec(t)}createContext(t,n,r,l=!1){return new zf({dataSource:t,methodName:n,targetDoc:r,path:de.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ea(a){const t=a._freezeSettings(),n=ec(a._databaseId);return new OV(a._databaseId,!!t.ignoreUndefinedProperties,n)}function Uf(a,t,n,r,l,u={}){const h=a.createContext(u.merge||u.mergeFields?2:0,t,n,l);Op("Data must be an object, but it was:",h,r);const m=VS(r,h);let g,_;if(u.merge)g=new wn(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const b=ya(t,A,n);if(!h.contains(b))throw new Z(F.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);xS(T,b)||T.push(b)}g=new wn(T),_=h.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,_=h.fieldTransforms;return new MV(new tn(m),g,_)}class rc extends Ta{_toFieldTransform(t){if(t.dataSource!==2)throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rc}}function IS(a,t,n){return new zf({dataSource:3,targetDoc:t.settings.targetDoc,methodName:a._methodName,arrayElement:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Vp extends Ta{_toFieldTransform(t){return new $u(t.path,new Ll)}isEqual(t){return t instanceof Vp}}class Dp extends Ta{constructor(t,n){super(t),this.Ac=n}_toFieldTransform(t){const n=IS(this,t,!0),r=this.Ac.map((u=>Aa(u,n))),l=new ha(r);return new $u(t.path,l)}isEqual(t){return t instanceof Dp&&Ng(this.Ac,t.Ac)}}class Cp extends Ta{constructor(t,n){super(t),this.Ac=n}_toFieldTransform(t){const n=IS(this,t,!0),r=this.Ac.map((u=>Aa(u,n))),l=new fa(r);return new $u(t.path,l)}isEqual(t){return t instanceof Cp&&Ng(this.Ac,t.Ac)}}class xp extends Ta{constructor(t,n){super(t),this.Vc=n}_toFieldTransform(t){const n=new ql(t.serializer,$0(t.serializer,this.Vc));return new $u(t.path,n)}isEqual(t){return t instanceof xp&&this.Vc===t.Vc}}function Np(a,t,n,r){const l=a.createContext(1,t,n);Op("Data must be an object, but it was:",l,r);const u=[],h=tn.empty();ps(r,((g,_)=>{const T=CS(t,g,n);_=ze(_);const A=l.childContextForFieldPath(T);if(_ instanceof rc)u.push(T);else{const b=Aa(_,A);b!=null&&(u.push(T),h.set(T,b))}}));const m=new wn(u);return new wS(h,m,l.fieldTransforms)}function Mp(a,t,n,r,l,u){const h=a.createContext(1,t,n),m=[ya(t,r,n)],g=[l];if(u.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)m.push(ya(t,u[b])),g.push(u[b+1]);const _=[],T=tn.empty();for(let b=m.length-1;b>=0;--b)if(!xS(_,m[b])){const B=m[b];let J=g[b];J=ze(J);const $=h.childContextForFieldPath(B);if(J instanceof rc)_.push(B);else{const tt=Aa(J,$);tt!=null&&(_.push(B),T.set(B,tt))}}const A=new wn(_);return new wS(T,A,h.fieldTransforms)}function RS(a,t,n,r=!1){return Aa(n,a.createContext(r?4:3,t))}function Aa(a,t){if(DS(a=ze(a)))return Op("Unsupported field value:",t,a),VS(a,t);if(a instanceof Ta)return(function(r,l){if(!bS(l.dataSource))throw l.createError(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(r,l){const u=[];let h=0;for(const m of r){let g=Aa(m,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(a,t)}return(function(r,l){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $0(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Gt.fromDate(r);return{timestampValue:Bl(l.serializer,u)}}if(r instanceof Gt){const u=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bl(l.serializer,u)}}if(r instanceof hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof an)return{bytesValue:cA(l.serializer,r._byteString)};if(r instanceof ie){const u=l.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:tp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof fi)return(function(h,m){const g=h instanceof fi?h.toArray():h;return{mapValue:{fields:{[jg]:{stringValue:Gg},[Pl]:{arrayValue:{values:g.map((T=>{if(typeof T!="number")throw m.createError("VectorValues must only contain numeric values.");return Yg(m.serializer,T)}))}}}}}})(r,l);if(AA(r))return r._toProto(l.serializer);throw l.createError(`Unsupported field value: ${vf(r)}`)})(a,t)}function VS(a,t){const n={};return R0(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ps(a,((r,l)=>{const u=Aa(l,t.childContextForField(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function DS(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Gt||a instanceof hi||a instanceof an||a instanceof ie||a instanceof Ta||a instanceof fi||AA(a))}function Op(a,t,n){if(!DS(n)||!u0(n)){const r=vf(n);throw r==="an object"?t.createError(a+" a custom object"):t.createError(a+" "+r)}}function ya(a,t,n){if((t=ze(t))instanceof _a)return t._internalPath;if(typeof t=="string")return CS(a,t);throw yf("Field path arguments must be of type string or ",a,!1,void 0,n)}const PV=new RegExp("[~\\*/\\[\\]]");function CS(a,t,n){if(t.search(PV)>=0)throw yf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new _a(...t.split("."))._internalPath}catch{throw yf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function yf(a,t,n,r,l){const u=r&&!r.isEmpty(),h=l!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${l}`),g+=")"),new Z(F.INVALID_ARGUMENT,m+a+g)}function xS(a,t){return a.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{convertValue(t,n="none"){switch(us(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(dr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw at(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return ps(t,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(t){var r,l,u;const n=(u=(l=(r=t.fields)==null?void 0:r[Pl].arrayValue)==null?void 0:l.values)==null?void 0:u.map((h=>fe(h.doubleValue)));return new fi(n)}convertGeoPoint(t){return new hi(fe(t.latitude),fe(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=bf(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ou(t));default:return null}}convertTimestamp(t){const n=fr(t);return new Gt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=xt.fromString(t);ft(EA(r),9688,{name:t});const l=new os(r.get(1),r.get(3)),u=new nt(r.popFirst(5));return l.isEqual(n)||Ae(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Pp{constructor(t){super(),this.firestore=t}convertBytes(t){return new an(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ie(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(){return new rc("deleteField")}function UV(){return new Vp("serverTimestamp")}function LV(...a){return new Dp("arrayUnion",a)}function qV(...a){return new Cp("arrayRemove",a)}function BV(a){return new xp("increment",a)}const qE="@firebase/firestore",BE="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(a){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(a,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(t,n,r,l,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new kV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var t;return((t=this._document)==null?void 0:t.data.clone().value.mapValue.fields)??void 0}get(t){if(this._document){const n=this._document.data.field(ya("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kV extends Fu{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class sc extends zp{}function ts(a,t,...n){let r=[];t instanceof zp&&r.push(t),r=r.concat(n),(function(u){const h=u.filter((g=>g instanceof Up)).length,m=u.filter((g=>g instanceof Lf)).length;if(h>1||h>0&&m>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)a=l._apply(a);return a}class Lf extends sc{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Lf(t,n,r)}_apply(t){const n=this._parse(t);return OS(t._query,n),new gn(t.firestore,t.converter,pg(t._query,n))}_parse(t){const n=Ea(t.firestore);return(function(u,h,m,g,_,T,A){let b;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){FE(A,T);const J=[];for(const $ of A)J.push(kE(g,u,$));b={arrayValue:{values:J}}}else b=kE(g,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||FE(A,T),b=RS(m,h,A,T==="in"||T==="not-in");return Ot.create(_,T,b)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function FV(a,t,n){const r=t,l=ya("where",a);return Lf._create(l,r,n)}class Up extends zp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Up(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Xt.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,u){let h=l;const m=u.getFlattenedFilters();for(const g of m)OS(h,g),h=pg(h,g)})(t._query,n),new gn(t.firestore,t.converter,pg(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lp extends sc{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Lp(t,n)}_apply(t){const n=(function(l,u,h){if(l.startAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uu(u,h)})(t._query,this._field,this._direction);return new gn(t.firestore,t.converter,KI(t._query,n))}}function jV(a,t="asc"){const n=t,r=ya("orderBy",a);return Lp._create(r,n)}class qf extends sc{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new qf(t,n,r)}_apply(t){return new gn(t.firestore,t.converter,of(t._query,this._limit,this._limitType))}}function GV(a){return c0("limit",a),qf._create("limit",a,"F")}function HV(a){return c0("limitToLast",a),qf._create("limitToLast",a,"L")}class Bf extends sc{constructor(t,n,r){super(),this.type=t,this._docOrFields=n,this._inclusive=r}static _create(t,n,r){return new Bf(t,n,r)}_apply(t){const n=MS(t,this.type,this._docOrFields,this._inclusive);return new gn(t.firestore,t.converter,YI(t._query,n))}}function QV(...a){return Bf._create("startAt",a,!0)}function KV(...a){return Bf._create("startAfter",a,!1)}class kf extends sc{constructor(t,n,r){super(),this.type=t,this._docOrFields=n,this._inclusive=r}static _create(t,n,r){return new kf(t,n,r)}_apply(t){const n=MS(t,this.type,this._docOrFields,this._inclusive);return new gn(t.firestore,t.converter,XI(t._query,n))}}function YV(...a){return kf._create("endBefore",a,!1)}function XV(...a){return kf._create("endAt",a,!0)}function MS(a,t,n,r){if(n[0]=ze(n[0]),n[0]instanceof Fu)return(function(u,h,m,g,_){if(!g)throw new Z(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const T=[];for(const A of bl(u))if(A.field.isKeyField())T.push(ua(h,g.key));else{const b=g.data.field(A.field);if(wf(b))throw new Z(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const B=A.field.canonicalString();throw new Z(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}T.push(b)}return new hs(T,_)})(a._query,a.firestore._databaseId,t,n[0]._document,r);{const l=Ea(a.firestore);return(function(h,m,g,_,T,A){const b=h.explicitOrderBy;if(T.length>b.length)throw new Z(F.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let J=0;J<T.length;J++){const $=T[J];if(b[J].field.isKeyField()){if(typeof $!="string")throw new Z(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof $}`);if(!Qg(h)&&$.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${$}' contains a slash.`);const tt=h.path.child(xt.fromString($));if(!nt.isDocumentKey(tt))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${tt}' is not because it contains an odd number of segments.`);const mt=new nt(tt);B.push(ua(m,mt))}else{const tt=RS(g,_,$);B.push(tt)}}return new hs(B,A)})(a._query,a.firestore._databaseId,l,t,n,r)}}function kE(a,t,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qg(t)&&n.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(xt.fromString(n));if(!nt.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ua(a,new nt(r))}if(n instanceof ie)return ua(a,n._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vf(n)}.`)}function FE(a,t){if(!Array.isArray(a)||a.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function OS(a,t){const n=(function(l,u){for(const h of l)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Ff(a,t,n){let r;return r=a?n&&(n.merge||n.mergeFields)?a.toFirestore(t,n):a.toFirestore(t):t,r}class ZV extends Pp{constructor(t){super(),this.firestore=t}convertBytes(t){return new an(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ie(this.firestore,null,n)}}class aa{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let Jn=class PS extends Fu{constructor(t,n,r,l,u,h){super(t,n,r,l,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(ya("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=PS._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Jn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jn._jsonSchema={type:Pe("string",Jn._jsonSchemaVersion),bundleSource:Pe("string","DocumentSnapshot"),bundleName:Pe("string"),bundle:Pe("string")};let Vu=class extends Jn{data(t={}){return super.data(t)}},di=class zS{constructor(t,n,r,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new aa(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Vu(this._firestore,this._userDataWriter,r.key,r,new aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((m=>{const g=new Vu(l._firestore,l._userDataWriter,m.doc.key,m.doc,new aa(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Vu(l._firestore,l._userDataWriter,m.doc.key,m.doc,new aa(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,T=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:JV(m.type),doc:g,oldIndex:_,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=zS._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Pg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}};function JV(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:a})}}function US(a,t){return a instanceof Jn&&t instanceof Jn?a._firestore===t._firestore&&a._key.isEqual(t._key)&&(a._document===null?t._document===null:a._document.isEqual(t._document))&&a._converter===t._converter:a instanceof di&&t instanceof di&&a._firestore===t._firestore&&ES(a.query,t.query)&&a.metadata.isEqual(t.metadata)&&a._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di._jsonSchemaVersion="firestore/querySnapshot/1.0",di._jsonSchema={type:Pe("string",di._jsonSchemaVersion),bundleSource:Pe("string","QuerySnapshot"),bundleName:Pe("string"),bundle:Pe("string")};const $V={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WV=class{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ea(t)}set(t,n,r){this._verifyNotCommitted();const l=is(t,this._firestore),u=Ff(l.converter,n,r),h=Uf(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(h.toMutation(l._key,me.none())),this}update(t,n,r,...l){this._verifyNotCommitted();const u=is(t,this._firestore);let h;return h=typeof(n=ze(n))=="string"||n instanceof _a?Mp(this._dataReader,"WriteBatch.update",u._key,n,r,l):Np(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,me.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=is(t,this._firestore);return this._mutations=this._mutations.concat(new Jl(n._key,me.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function is(a,t){if((a=ze(a)).firestore!==t)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Ea(t)}get(t){const n=is(t,this._firestore),r=new ZV(this._firestore);return this._transaction.lookup([n._key]).then((l=>{if(!l||l.length!==1)return at(24041);const u=l[0];if(u.isFoundDocument())return new Fu(this._firestore,r,u.key,u,n.converter);if(u.isNoDocument())return new Fu(this._firestore,r,n._key,null,n.converter);throw at(18433,{doc:u})}))}set(t,n,r){const l=is(t,this._firestore),u=Ff(l.converter,n,r),h=Uf(this._dataReader,"Transaction.set",l._key,u,l.converter!==null,r);return this._transaction.set(l._key,h),this}update(t,n,r,...l){const u=is(t,this._firestore);let h;return h=typeof(n=ze(n))=="string"||n instanceof _a?Mp(this._dataReader,"Transaction.update",u._key,n,r,l):Np(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,h),this}delete(t){const n=is(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e2=class extends t2{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=is(t,this._firestore),r=new Sa(this._firestore);return super.get(t).then((l=>new Jn(this._firestore,r,n._key,l._document,new aa(!1,!1),n.converter)))}};function n2(a,t,n){a=kt(a,we);const r={...$V,...n};(function(h){if(h.maxAttempts<1)throw new Z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const l=on(a);return gV(l,(u=>t(new e2(a,u))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(a){a=kt(a,ie);const t=kt(a.firestore,we),n=on(t);return dS(n,a._key).then((r=>qp(t,a,r)))}function r2(a){a=kt(a,ie);const t=kt(a.firestore,we),n=on(t),r=new Sa(t);return hV(n,a._key).then((l=>new Jn(t,r,a._key,l,new aa(l!==null&&l.hasLocalMutations,!0),a.converter)))}function s2(a){a=kt(a,ie);const t=kt(a.firestore,we),n=on(t);return dS(n,a._key,{source:"server"}).then((r=>qp(t,a,r)))}function a2(a){a=kt(a,gn);const t=kt(a.firestore,we),n=on(t),r=new Sa(t);return NS(a._query),mS(n,a._query).then((l=>new di(t,r,a,l)))}function l2(a){a=kt(a,gn);const t=kt(a.firestore,we),n=on(t),r=new Sa(t);return fV(n,a._query).then((l=>new di(t,r,a,l)))}function o2(a){a=kt(a,gn);const t=kt(a.firestore,we),n=on(t),r=new Sa(t);return mS(n,a._query,{source:"server"}).then((l=>new di(t,r,a,l)))}function jE(a,t,n){a=kt(a,ie);const r=kt(a.firestore,we),l=Ff(a.converter,t,n),u=Ea(r);return ac(r,[Uf(u,"setDoc",a._key,l,a.converter!==null,n).toMutation(a._key,me.none())])}function GE(a,t,n,...r){a=kt(a,ie);const l=kt(a.firestore,we),u=Ea(l);let h;return h=typeof(t=ze(t))=="string"||t instanceof _a?Mp(u,"updateDoc",a._key,t,n,r):Np(u,"updateDoc",a._key,t),ac(l,[h.toMutation(a._key,me.exists(!0))])}function u2(a){return ac(kt(a.firestore,we),[new Jl(a._key,me.none())])}function c2(a,t){const n=kt(a.firestore,we),r=_f(a),l=Ff(a.converter,t),u=Ea(a.firestore);return ac(n,[Uf(u,"addDoc",r._key,l,a.converter!==null,{}).toMutation(r._key,me.exists(!1))]).then((()=>r))}function LS(a,...t){var _,T,A;a=ze(a);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||Dg(t[r])||(n=t[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Dg(t[r])){const b=t[r];t[r]=(_=b.next)==null?void 0:_.bind(b),t[r+1]=(T=b.error)==null?void 0:T.bind(b),t[r+2]=(A=b.complete)==null?void 0:A.bind(b)}let u,h,m;if(a instanceof ie)h=kt(a.firestore,we),m=Xl(a._key.path),u={next:b=>{t[r]&&t[r](qp(h,a,b))},error:t[r+1],complete:t[r+2]};else{const b=kt(a,gn);h=kt(b.firestore,we),m=b._query;const B=new Sa(h);u={next:J=>{t[r]&&t[r](new di(h,B,b,J))},error:t[r+1],complete:t[r+2]},NS(a._query)}const g=on(h);return cV(g,m,l,u)}function h2(a,t){a=kt(a,we);const n=on(a),r=Dg(t)?t:{next:t};return mV(n,r)}function ac(a,t){const n=on(a);return dV(n,t)}function qp(a,t,n){const r=n.docs.get(t._key),l=new Sa(a);return new Jn(a,l,t._key,r,new aa(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){Fb(Db),Vb(new $E("firestore",((r,{instanceIdentifier:l,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new we(new Kb(r.getProvider("auth-internal")),new Zb(h,r.getProvider("app-check-internal")),OI(h,l),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),oT(qE,BE,t),oT(qE,BE,"esm2020")})();const f2="@firebase/firestore-compat",d2="0.4.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(a,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function QE(){if(!xI())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ju{constructor(t){this._delegate=t}static fromBase64String(t){return QE(),new ju(an.fromBase64String(t))}static fromUint8Array(t){return HE(),new ju(an.fromUint8Array(t))}toBase64(){return QE(),this._delegate.toBase64()}toUint8Array(){return HE(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(a){return m2(a,["next","error","complete"])}function m2(a,t){if(typeof a!="object"||a===null)return!1;const n=a;for(const r of t)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{enableIndexedDbPersistence(t,n){return wV(t._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(t){return bV(t._delegate)}clearIndexedDbPersistence(t){return IV(t._delegate)}}class qS{constructor(t,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof os||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const n=this._delegate._getSettings();!t.merge&&n.host!==t.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t={...n,...t},delete t.merge),this._delegate._setSettings(t)}useEmulator(t,n,r={}){TV(this._delegate,t,n,r)}enableNetwork(){return VV(this._delegate)}disableNetwork(){return DV(this._delegate)}enablePersistence(t){let n=!1,r=!1;return t&&(n=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,o0("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return RV(this._delegate)}onSnapshotsInSync(t){return h2(this._delegate,t)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Kl(this,vS(this._delegate,t))}catch(n){throw dn(n,"collection()","Firestore.collection()")}}doc(t){try{return new Zn(this,_f(this._delegate,t))}catch(n){throw dn(n,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new fn(this,EV(this._delegate,t))}catch(n){throw dn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return n2(this._delegate,n=>t(new BS(this,n)))}batch(){return on(this._delegate),new kS(new WV(this._delegate,t=>ac(this._delegate,t)))}loadBundle(t){return CV(this._delegate,t)}namedQuery(t){return xV(this._delegate,t).then(n=>n?new fn(this,n):null)}}class jf extends Pp{constructor(t){super(),this.firestore=t}convertBytes(t){return new ju(new an(t))}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return Zn.forKey(n,this.firestore,null)}}function p2(a){jb(a)}class BS{constructor(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new jf(t)}get(t){const n=la(t);return this._delegate.get(n).then(r=>new Gu(this._firestore,new Jn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(t,n,r){const l=la(t);return r?(Bp("Transaction.set",r),this._delegate.set(l,n,r)):this._delegate.set(l,n),this}update(t,n,r,...l){const u=la(t);return arguments.length===2?this._delegate.update(u,n):this._delegate.update(u,n,r,...l),this}delete(t){const n=la(t);return this._delegate.delete(n),this}}class kS{constructor(t){this._delegate=t}set(t,n,r){const l=la(t);return r?(Bp("WriteBatch.set",r),this._delegate.set(l,n,r)):this._delegate.set(l,n),this}update(t,n,r,...l){const u=la(t);return arguments.length===2?this._delegate.update(u,n):this._delegate.update(u,n,r,...l),this}delete(t){const n=la(t);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class va{constructor(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}fromFirestore(t,n){const r=new Vu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Hu(this._firestore,r),n??{})}toFirestore(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)}static getInstance(t,n){const r=va.INSTANCES;let l=r.get(t);l||(l=new WeakMap,r.set(t,l));let u=l.get(n);return u||(u=new va(t,new jf(t),n),l.set(n,u)),u}}va.INSTANCES=new WeakMap;class Zn{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new jf(t)}static forPath(t,n,r){if(t.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Zn(n,new ie(n._delegate,r,new nt(t)))}static forKey(t,n,r){return new Zn(n,new ie(n._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Kl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Kl(this.firestore,vS(this._delegate,t))}catch(n){throw dn(n,"collection()","DocumentReference.collection()")}}isEqual(t){return t=ze(t),t instanceof ie?TS(this._delegate,t):!1}set(t,n){n=Bp("DocumentReference.set",n);try{return n?jE(this._delegate,t,n):jE(this._delegate,t)}catch(r){throw dn(r,"setDoc()","DocumentReference.set()")}}update(t,n,...r){try{return arguments.length===1?GE(this._delegate,t):GE(this._delegate,t,n,...r)}catch(l){throw dn(l,"updateDoc()","DocumentReference.update()")}}delete(){return u2(this._delegate)}onSnapshot(...t){const n=FS(t),r=jS(t,l=>new Gu(this.firestore,new Jn(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return LS(this._delegate,n,r)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=r2(this._delegate):(t==null?void 0:t.source)==="server"?n=s2(this._delegate):n=i2(this._delegate),n.then(r=>new Gu(this.firestore,new Jn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Zn(this.firestore,t?this._delegate.withConverter(va.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function dn(a,t,n){return a.message=a.message.replace(t,n),a}function FS(a){for(const t of a)if(typeof t=="object"&&!Cg(t))return t;return{}}function jS(a,t){var r,l;let n;return Cg(a[0])?n=a[0]:Cg(a[1])?n=a[1]:typeof a[0]=="function"?n={next:a[0],error:a[1],complete:a[2]}:n={next:a[1],error:a[2],complete:a[3]},{next:u=>{n.next&&n.next(t(u))},error:(r=n.error)==null?void 0:r.bind(n),complete:(l=n.complete)==null?void 0:l.bind(n)}}class Gu{constructor(t,n){this._firestore=t,this._delegate=n}get ref(){return new Zn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,n){return this._delegate.get(t,n)}isEqual(t){return US(this._delegate,t._delegate)}}class Hu extends Gu{data(t){const n=this._delegate.data(t);return this._delegate._converter||Gb(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class fn{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new jf(t)}where(t,n,r){try{return new fn(this.firestore,ts(this._delegate,FV(t,n,r)))}catch(l){throw dn(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,n){try{return new fn(this.firestore,ts(this._delegate,jV(t,n)))}catch(r){throw dn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new fn(this.firestore,ts(this._delegate,GV(t)))}catch(n){throw dn(n,"limit()","Query.limit()")}}limitToLast(t){try{return new fn(this.firestore,ts(this._delegate,HV(t)))}catch(n){throw dn(n,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new fn(this.firestore,ts(this._delegate,QV(...t)))}catch(n){throw dn(n,"startAt()","Query.startAt()")}}startAfter(...t){try{return new fn(this.firestore,ts(this._delegate,KV(...t)))}catch(n){throw dn(n,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new fn(this.firestore,ts(this._delegate,YV(...t)))}catch(n){throw dn(n,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new fn(this.firestore,ts(this._delegate,XV(...t)))}catch(n){throw dn(n,"endAt()","Query.endAt()")}}isEqual(t){return ES(this._delegate,t._delegate)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=l2(this._delegate):(t==null?void 0:t.source)==="server"?n=o2(this._delegate):n=a2(this._delegate),n.then(r=>new xg(this.firestore,new di(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const n=FS(t),r=jS(t,l=>new xg(this.firestore,new di(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return LS(this._delegate,n,r)}withConverter(t){return new fn(this.firestore,t?this._delegate.withConverter(va.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class _2{constructor(t,n){this._firestore=t,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Hu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xg{constructor(t,n){this._firestore=t,this._delegate=n}get query(){return new fn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Hu(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(n=>new _2(this._firestore,n))}forEach(t,n){this._delegate.forEach(r=>{t.call(n,new Hu(this._firestore,r))})}isEqual(t){return US(this._delegate,t._delegate)}}class Kl extends fn{constructor(t,n){super(t,n),this.firestore=t,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Zn(this.firestore,t):null}doc(t){try{return t===void 0?new Zn(this.firestore,_f(this._delegate)):new Zn(this.firestore,_f(this._delegate,t))}catch(n){throw dn(n,"doc()","CollectionReference.doc()")}}add(t){return c2(this._delegate,t).then(n=>new Zn(this.firestore,n))}isEqual(t){return TS(this._delegate,t._delegate)}withConverter(t){return new Kl(this.firestore,t?this._delegate.withConverter(va.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function la(a){return kt(a,ie)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(...t){this._delegate=new _a(...t)}static documentId(){return new kp(de.keyField().canonicalString())}isEqual(t){return t=ze(t),t instanceof _a?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{static serverTimestamp(){const t=UV();return t._methodName="FieldValue.serverTimestamp",new ra(t)}static delete(){const t=zV();return t._methodName="FieldValue.delete",new ra(t)}static arrayUnion(...t){const n=LV(...t);return n._methodName="FieldValue.arrayUnion",new ra(n)}static arrayRemove(...t){const n=qV(...t);return n._methodName="FieldValue.arrayRemove",new ra(n)}static increment(t){const n=BV(t);return n._methodName="FieldValue.increment",new ra(n)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2={Firestore:qS,GeoPoint:hi,Timestamp:Gt,Blob:ju,Transaction:BS,WriteBatch:kS,DocumentReference:Zn,DocumentSnapshot:Gu,Query:fn,QueryDocumentSnapshot:Hu,QuerySnapshot:xg,CollectionReference:Kl,FieldPath:kp,FieldValue:ra,setLogLevel:p2,CACHE_SIZE_UNLIMITED:SV};function v2(a,t){a.INTERNAL.registerComponent(new $E("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),l=n.getProvider("firestore").getImmediate();return t(r,l)},"PUBLIC").setServiceProps({...y2}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(a){v2(a,(t,n)=>new qS(t,n,new g2)),a.registerVersion(f2,d2)}T2(Vl);const E2={apiKey:"AIzaSyDMEemyDYqmbQauU7cgRKQ7cW9BARQAXDg",authDomain:"abidjansolution0006.firebaseapp.com",projectId:"abidjansolution0006",storageBucket:"abidjansolution0006.appspot.com"};Vl.apps.length||Vl.initializeApp(E2);const Js=Vl.firestore(),KE=Vl.auth(),A2=()=>{const[a,t]=Ui.useState(null),[n,r]=Ui.useState("leads"),[l,u]=Ui.useState([]),[h,m]=Ui.useState([]),[g,_]=Ui.useState([]),[T,A]=Ui.useState([]),[b,B]=Ui.useState([]),[J,$]=Ui.useState(!0),[tt,mt]=Ui.useState({name:"",icon:""});Ui.useEffect(()=>{KE.onAuthStateChanged(lt=>{t(lt),lt&&_t(),$(!1)})},[]);const _t=()=>{Js.collection("categories").onSnapshot(lt=>u(lt.docs.map(ht=>({id:ht.id,...ht.data()})))),Js.collection("products").orderBy("priority","asc").onSnapshot(lt=>m(lt.docs.map(ht=>({id:ht.id,...ht.data()})))),Js.collection("heroSlides").orderBy("order","asc").onSnapshot(lt=>_(lt.docs.map(ht=>({id:ht.id,...ht.data()})))),Js.collection("partners").orderBy("order","asc").onSnapshot(lt=>A(lt.docs.map(ht=>({id:ht.id,...ht.data()})))),Js.collection("leads").orderBy("timestamp","desc").onSnapshot(lt=>B(lt.docs.map(ht=>({id:ht.id,...ht.data()}))))},ct=async lt=>{lt.preventDefault(),await Js.collection("categories").add(tt),mt({name:"",icon:""})},Vt=(lt,ht)=>{window.confirm("Supprimer dfinitivement ?")&&Js.collection(lt).doc(ht).delete()};return J?ne.jsx("div",{style:{padding:50,textAlign:"center"},children:"Chargement AS Admin..."}):a?ne.jsxs("div",{style:{display:"flex",minHeight:"100vh",fontFamily:"system-ui"},children:[ne.jsxs("aside",{style:{width:280,background:"#1E293B",color:"white",padding:20},children:[ne.jsx("h2",{style:{color:"#f58220",marginBottom:30},children:"ABIDJAN SOLUTION"}),ne.jsxs("nav",{children:[ne.jsx("div",{onClick:()=>r("leads"),style:{padding:12,cursor:"pointer",background:n==="leads"?"#f58220":""},children:" Leads"}),ne.jsx("div",{onClick:()=>r("products"),style:{padding:12,cursor:"pointer",background:n==="products"?"#f58220":""},children:" Catalogue"}),ne.jsx("div",{onClick:()=>r("categories"),style:{padding:12,cursor:"pointer",background:n==="categories"?"#f58220":""},children:" Catgories"}),ne.jsx("div",{onClick:()=>r("hero"),style:{padding:12,cursor:"pointer",background:n==="hero"?"#f58220":""},children:" Hero Tabs"}),ne.jsx("div",{onClick:()=>r("partners"),style:{padding:12,cursor:"pointer",background:n==="partners"?"#f58220":""},children:" Partenaires"})]})]}),ne.jsxs("main",{style:{flex:1,padding:40,background:"#f8fafc",overflowY:"auto"},children:[n==="categories"&&ne.jsxs(ne.Fragment,{children:[ne.jsx("h1",{children:"Gestion des Catgories"}),ne.jsxs("form",{onSubmit:ct,style:{background:"white",padding:20,borderRadius:8,marginBottom:20},children:[ne.jsx("input",{placeholder:"Nom (ex: Informatique)",value:tt.name,onChange:lt=>mt({...tt,name:lt.target.value}),style:{padding:10,marginRight:10},required:!0}),ne.jsx("input",{placeholder:"Icne (ex: )",value:tt.icon,onChange:lt=>mt({...tt,icon:lt.target.value}),style:{padding:10,marginRight:10},required:!0}),ne.jsx("button",{type:"submit",style:{padding:10,background:"#008060",color:"white",border:"none"},children:"AJOUTER"})]}),l.map(lt=>ne.jsxs("div",{style:{background:"white",padding:10,marginBottom:5,borderRadius:6,display:"flex",justifyContent:"space-between"},children:[ne.jsxs("span",{children:[lt.icon," ",lt.name]}),ne.jsx("button",{onClick:()=>Vt("categories",lt.id),style:{color:"red",border:"none",background:"none"},children:"Retirer"})]},lt.id))]}),n==="leads"&&ne.jsx("h1",{children:"Consultez vos leads entrants"}),n==="products"&&ne.jsx("h1",{children:"Grez vos produits"})]})]}):ne.jsx("div",{style:{display:"grid",placeItems:"center",height:"100vh"},children:ne.jsx("button",{onClick:()=>KE.signInWithPopup(new Vl.auth.GoogleAuthProvider),style:{padding:"15px 30px",background:"#4285F4",color:"white",border:"none",borderRadius:8},children:"ACCS ADMINISTRATION"})})},YE=document.getElementById("root");YE&&kb.createRoot(YE).render(ne.jsx(A2,{}));
